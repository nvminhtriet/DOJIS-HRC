!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="https://static.parastorage.com/services/adi-web/2.2553.0/",a.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||a.p,a(a.s=1909)}({1909:function(e,t,a){angular.module("adiIntroCommon",[]),angular.module("adiIntroInternal",[]),angular.module("adiIntroAppInternal",["adiIntroCommon","adiIntroInternal","adiIntroTemplates"]),angular.module("siteGeneratorIntroInternal",["adiAppCore"]),a(1910)},1910:function(e,t,a){"use strict";var i=window.ob=window.ob||{};!function(e){e.INTRO_STATES={INTRO:"intro",INTRO_CATEGORY_SEARCH:"intro.category-search",INTRO_BLOCKED_CATEGORY:"intro.blocked-category",INTRO_SERVICES_OFFER:"intro.service-offer",INTRO_APPS_RECOMMENDATION:"intro.apps-recommendation",INTRO_IMPORT_SITE_CONTENT:"intro.import-site-content",INTRO_IMPORT_PLATFORMS_URLS:"intro.import-platforms-urls",INTRO_IMPORT_SITE_LEGAL:"intro.import-site-legal",INTRO_IMAGES_SELECTION:"intro.images-selection",INTRO_IMAGES_SELECTION_LOADING:"intro.images-selection-loading",INTRO_BUSINESS_NAME:"intro.business-name",INTRO_BUSINESS_LOCATION:"intro.business-location",INTRO_BUSINESS_DATES:"intro.business-dates",INTRO_EVENT_DETAILS:"intro.event-details",INTRO_SEARCH_CONFIRM:"intro.search-confirm",INTRO_IMPORT_SITE_CONFIRM:"intro.import-site-confirm",INTRO_SELECT_USER:"intro.select-user",INTRO_EDIT_USER:"intro.edit-user",INTRO_RECAPTCHA:"intro.recaptcha",INTRO_YOUTUBE_CHANNEL:"intro.youtube-channel"},e.onRoutEnter=function(t,a,i,n){n!==e.INTRO_STATES.INTRO_CATEGORY_SEARCH&&n!==e.INTRO_STATES.INTRO_RECAPTCHA&&n!==e.INTRO_STATES.INTRO_BLOCKED_CATEGORY&&i.AnonymousFlowEnabled&&!a.hasSession&&t.goToIntroCategorySearch()}}(A||(A={})),window.intro=A,function(e){e.BusinessCategoryIds={"0a375f98cd5e0709300307cb|a4def3d162781f1e96ee1956":["Maintenance Tutorials"],"6201379b79ae02103b8afed3|a4def3d162781f1e96ee1956":["Nature Film Release","Nature Film Coming Soon"],"e8e9dfeb51a3de02e02d18a3|a4def3d162781f1e96ee1956":["Game Show Release","Game Show Coming Soon"],"05304077275b997197ad1349|a4def3d162781f1e96ee1956":["Talk Show Release","Talk Show Coming Soon"],"9dfc2e7b8728e1f0689e5517|a4def3d162781f1e96ee1956":["Reality TV Show Release","Reality TV Show Coming Soon"],"793bbfab7dda1e9e00828b21|a4def3d162781f1e96ee1956":["Western Film Release","Western Film Coming Soon"],"1b899bf147031d13e845f269|a4def3d162781f1e96ee1956":["War Film Release","War Film Coming Soon"],"5804f384c781ce1960408136|a4def3d162781f1e96ee1956":["Sports Film Release","Sports Film Coming Soon"],"ecfe83d6fe85ea3e50d3e35b|a4def3d162781f1e96ee1956":["Sci-Fi Film Release","Sci-Fi Film Coming Soon"],"6244f21e5bccdbc8971e42e7|a4def3d162781f1e96ee1956":["Romantic Film Release","Romantic Film Coming Soon"],"677a9d6a7959e7bda1b73d03|a4def3d162781f1e96ee1956":["News Film Release","News Film Coming Soon"],"98d377b673c40d4dc9d096d8|a4def3d162781f1e96ee1956":["Musical Film Release","Musical Film Coming Soon"],"676166d2cbe32deb1935f4b3|a4def3d162781f1e96ee1956":["Horror Film Release","Horror Film Coming Soon"],"4b1010aef8d7d114a7c23774|a4def3d162781f1e96ee1956":["History Film Release","History Film Coming Soon"],"64f0c07b0ca68d9f6daa6c9b|a4def3d162781f1e96ee1956":["Fantasy Film Release","Fantasy Film Coming Soon"],"6d5d6551f9662c28a04f921b|a4def3d162781f1e96ee1956":["Dramatic Film Release","Dramatic Film Coming Soon"],"873685f13a710d1b85f75ea7|a4def3d162781f1e96ee1956":["Documentary Film Release","Documentary Film Coming Soon"],"1ce61ada707328245639c1d9|a4def3d162781f1e96ee1956":["Instructional Film Release","Instructional Film Coming Soon","Educational Videos"],"c3cc5f40cea06b3f18fccf33|a4def3d162781f1e96ee1956":["Crime Film Release","Crime Film Coming Soon"],"61fc9a08346a5521a23931a0|a4def3d162781f1e96ee1956":["Comedy Film Release","Comedy Film Coming Soon"],"1409d7b5501e76ff76bccb59|a4def3d162781f1e96ee1956":["Animated Film Release","Animated Film Coming Soon"],"c866690d767f2ab3e6aad483|a4def3d162781f1e96ee1956":["Adventure Film Release","Adventure Film Coming Soon"],"a9c60784fe911026fd95da93|a4def3d162781f1e96ee1956":["Action Film Release","Action Film Coming Soon"],"b75c188b9cca9868ec12f5cd|a4def3d162781f1e96ee1956":["Personal Film Release","Personal Film Coming Soon"],"d160fb8c5f74fa03c42a8237|a4def3d162781f1e96ee1956":["World Music Video"],"56b57d84149bb7576d8d9549|a4def3d162781f1e96ee1956":["Rock Music Video"],"1c5be3fa9836cb451e2cbdad|a4def3d162781f1e96ee1956":["Reggae Music Video"],"75d7674bed75736c13849c4c|a4def3d162781f1e96ee1956":["R&B Music Video"],"a2b51b698b3df87d34cb92db|a4def3d162781f1e96ee1956":["Pop Music Video"],"5983b861c14f3fb64d28223d|a4def3d162781f1e96ee1956":["Latin Music Video"],"50c274987982e7528ad6a0a4|a4def3d162781f1e96ee1956":["Jazz Music Video"],"159934465beb41044cd96065|a4def3d162781f1e96ee1956":["Indie Music Video"],"d76607cc28ce4c782fc64e1e|a4def3d162781f1e96ee1956":["Hip Hop Music Video"],"6b845e2edb70fe7d1055eddb|a4def3d162781f1e96ee1956":["Electronic Music Video"],"0977905b91c611a49b399645|a4def3d162781f1e96ee1956":["Country Music Video","Banjo Lesson Videos"],"8c53f2d630df0dfe199f271d|a4def3d162781f1e96ee1956":["Classical Music Video","Classical Instrument Lesson Videos"],"88b56978690cff09a18247c1|a4def3d162781f1e96ee1956":["Music Video"],"8c4956f97c598a290eecb608|a4def3d162781f1e96ee1956":["Casting Agency","Casting Director"],"f2a506932ffe6ce79d2daf7c|a4def3d162781f1e96ee1956":["Singing Videos"],"e0235c44640bfa8f264ccde2|a4def3d162781f1e96ee1956":["Dancing Videos"],"33f52ab8212c789c8e6363d8|a4def3d162781f1e96ee1956":["Beauty Videos"],"1bc4097af1d4907daadf2cd1|a4def3d162781f1e96ee1956":["Cooking Videos"],"661c50553252c18a10807143|a4def3d162781f1e96ee1956":["Gaming Videos"],"e1e196e07453fd7cc298d685|a4def3d162781f1e96ee1956":["Meditation Videos"],"2731a34ef2fe1d287c26869c|a4def3d162781f1e96ee1956":["Pilates Videos"],"92ddb10e7059f7749cd45db1|a4def3d162781f1e96ee1956":["Yoga Videos"],"5fd15df9a305148cdf19519a|a4def3d162781f1e96ee1956":["Physical Fitness Program"],"0e72b2a150d4b1ffad033c6a|a4def3d162781f1e96ee1956":["Technology Tutorials"],"eae1f66a171752beec00e1dc|a4def3d162781f1e96ee1956":["Car Tutorials"],"8144e0f66cb89c74fa97dc8d|a4def3d162781f1e96ee1956":["Woodwind Instrument Lesson Videos"],"74b34e71b96f72dd94777135|a4def3d162781f1e96ee1956":["Violin Lesson Videos"],"a36d06339108914145893a40|a4def3d162781f1e96ee1956":["Tuba Lesson Videos"],"c685a9e33ca18ca2f0b8499a|a4def3d162781f1e96ee1956":["Trumpet Lesson Videos"],"3471ae92dd9fd7c88b77661a|a4def3d162781f1e96ee1956":["String Instrument Lesson Videos"],"6d9cba186f6d05501f76f855|a4def3d162781f1e96ee1956":["Saxophone Lesson Videos"],"cfd1f8d321e613d71384ff30|a4def3d162781f1e96ee1956":["Piano Lesson Videos"],"242942961606f7d63f0f8051|a4def3d162781f1e96ee1956":["Percussion Instrument Lesson Videos"],"2af02da2c6c0bb2545358f81|a4def3d162781f1e96ee1956":["Organ Lesson Videos"],"27f6903ca7e3541e8df7d619|a4def3d162781f1e96ee1956":["Oboe Lesson Videos"],"84b99f2c8237165f87cda608|a4def3d162781f1e96ee1956":["Guitar Lesson Videos"],"411201edae34ec441551d9b9|a4def3d162781f1e96ee1956":["Flute Lesson Videos"],"1067ea161da95b70cedcb749|a4def3d162781f1e96ee1956":["Keyboard Lesson Videos"],"cb3747389d1dd8b51d1bd2b9|a4def3d162781f1e96ee1956":["Drums Lesson Videos"],"52d02604deb4c399271b410f|a4def3d162781f1e96ee1956":["Clarinet Lesson Videos"],"aa23342d1ca53d1876c473fd|a4def3d162781f1e96ee1956":["Cello Lesson Videos"],"6c2187be3c5b3b79e134c978|a4def3d162781f1e96ee1956":["Brass Instrument Lesson Videos"],"b78021beaa0bec3d2095a7a7|a4def3d162781f1e96ee1956":["Bassoon Lesson Videos"],"fbcee9beb67423a8a10b684f|a4def3d162781f1e96ee1956":["Bass Guitar Lesson Videos"],"53131daf050c893df1427113|a4def3d162781f1e96ee1956":["Accordion Lesson Videos"],"9ae489697fe8f69572c8a4db|a4def3d162781f1e96ee1956":["Music Lesson Videos"],"c963797950432a1a33b4e6b5|a4def3d162781f1e96ee1956":["Healthy Lifestyle Videos"],"5d89811ed01b7836cb03e0dc|a4def3d162781f1e96ee1956":["Film Student Portfolio","Videographer","Cinematographer"],"cd8729318924b8cec834a584|a4def3d162781f1e96ee1956":["Lighting and Rigging Company","Lighting and Rigging Technician"],"cb037fabb49429c301ddbddc|a4def3d162781f1e96ee1956":["Location Management Company","Location Manager"],"c6d4706894a4639b006c9c96|a4def3d162781f1e96ee1956":["Screenwriter"],"18acdc1f830ad065fb3855cb|a4def3d162781f1e96ee1956":["Stunt Performer"],"fb51462411cb89e0424cf886|a4def3d162781f1e96ee1956":["Production Design Agency"],"ce5ee0e29c1a76f1361c3a52|a4def3d162781f1e96ee1956":["Wedding & Events Video Company","Wedding & Events Videographer"],"2de6367f95c10fe699e6f60a|a4def3d162781f1e96ee1956":["Film Editor"],"ff467dc0618868b8686ab6a0|72e1e5106f07cecc6118594d":["First Communion"],"dae5521297b842d084c2a323|72e1e5106f07cecc6118594d":["Thanksgiving Party"],"e552929f498a62a98ba5a3f7|72e1e5106f07cecc6118594d":["Garage Sale"],"86647f3959a95da0d01b4ce1|72e1e5106f07cecc6118594d":["Bake Sale"],"49f6c2f24d9963a64357e23d|72e1e5106f07cecc6118594d":["Community Event"],"6af7cc1dfdc9b3188860f7d2|72e1e5106f07cecc6118594d":["Rally"],"bdfd6123b78ba6d75b56948f|72e1e5106f07cecc6118594d":["Business Dinner","Lunch & Learn"],"a474d921c915743229c023a9)|72e1e5106f07cecc6118594d":["Team Building Activity"],"6d789ff6f3e6441c4ab61fc6|72e1e5106f07cecc6118594d":["Kindergarten Graduation"],"f46a52ff1b200a44d6d2cf32|72e1e5106f07cecc6118594d":["Jazz Festival","Jazz Concert"],"8eb097e2b6da2432b72979e6|72e1e5106f07cecc6118594d":["Reunion"],"3fc5b2f667f5bff161d9a830|72e1e5106f07cecc6118594d":["Festival"],"a561e567739d6c5e167dd931|72e1e5106f07cecc6118594d":["Color Run"],"f577ad2502b05abc017c6719|72e1e5106f07cecc6118594d":["Yoga Event"],"062b881aa98542115be627c5|72e1e5106f07cecc6118594d":["Triathlon"],"0c09fa9e5c92a549e5d8f7ea|72e1e5106f07cecc6118594d":["Fitness Event"],"dd40bdb5aa4f1f4b01631cc2|72e1e5106f07cecc6118594d":["Meetup"],"d74be3f8696fb6f0c8e03397|72e1e5106f07cecc6118594d":["Bitcoin Meetup"],"9b721a6ae2292d23982c52c7|72e1e5106f07cecc6118594d":["Movie Premiere","Award Ceremony"],"296fe01647ad3a719c62e491|72e1e5106f07cecc6118594d":["Book Launch"],"5bcfed93f5b01fc3b763c389|72e1e5106f07cecc6118594d":["Masquerade"],"1572d599fb21e196e1d025ad|72e1e5106f07cecc6118594d":["Dinner Party"],"fa88f132ec8072be3e405e93|72e1e5106f07cecc6118594d":["Cocktail Party","Holiday Party"],"0bf42735763b5b482737de33|72e1e5106f07cecc6118594d":["Theatrical Performance"],"0f0505d6cd59359ac1622a6f|72e1e5106f07cecc6118594d":["Destination Wedding"],"86d10658547a7bed37f19208|72e1e5106f07cecc6118594d":["Birthday Party"],"3820738a40e58d1a876bcfc6|72e1e5106f07cecc6118594d":["Event","Save The Date"],"e67b96b94032d874d15c3cc2|72e1e5106f07cecc6118594d":["Promotional Event","Trade Show"],"23e6c60935419e2732a37720|72e1e5106f07cecc6118594d":["Corporate Event","Business Conference"],"3e1e5fc1b08831cc76d7a49a|72e1e5106f07cecc6118594d":["Student Orientation"],"c68957eacb2f68e9d6fd845f|72e1e5106f07cecc6118594d":["Orientation","Networking Event"],"3278c5b2f87b16a681fb354b|72e1e5106f07cecc6118594d":["Baptism"],"8b2dbaf9716ee08ac2028939|72e1e5106f07cecc6118594d":["Bar Mitzvah"],"9a888244f403212ccff7b6dd|72e1e5106f07cecc6118594d":["Grand Opening"],"ffc31798c6f62c75b0011f31|72e1e5106f07cecc6118594d":["Gala"],"b5669a8c6c16e58d95c07131|72e1e5106f07cecc6118594d":["Fourth of July Party"],"38d99f20aaf10ea07a1e9c2f|72e1e5106f07cecc6118594d":["Halloween Party"],"069b4d56303557fd09146ad8|72e1e5106f07cecc6118594d":["Christmas Party"],"cf3c92633b07cf46a80fcb61|72e1e5106f07cecc6118594d":["Graduation"],"ef3f849736779700d5270213|72e1e5106f07cecc6118594d":["Baby Shower"],"b26ac8f5197d483df862b217|72e1e5106f07cecc6118594d":["Wedding Save The Date","Wedding"],"9b4f31e4074251ea86190a36|72e1e5106f07cecc6118594d":["Fundraising Event"],"63f2c45f1db6ecffe4354482|72e1e5106f07cecc6118594d":["Music Festival"],"e97fb2ba8917d20dd0b56c5d|72e1e5106f07cecc6118594d":["Food Festival"],"f9254c6e3acbddd29eac21f7|72e1e5106f07cecc6118594d":["Bridal Shower"],"2b2cc9b9c39ed71dc2a86297|72e1e5106f07cecc6118594d":["Jack and Jill Party","Party"],"c0c2fa79870437a2022edcd4|72e1e5106f07cecc6118594d":["Bachelorette Party"],"ee5461760bbcbd83e49e45ae|72e1e5106f07cecc6118594d":["Bachelor Party"],"7113fb8b7ad2b9ca673fb634|72e1e5106f07cecc6118594d":["Women's Race"],"a28225f2dc09e104b02a4031|72e1e5106f07cecc6118594d":["Race"],"861c25dff819d7012cddca79|72e1e5106f07cecc6118594d":["Gallery Event"],"5960328755ad514967c32bac|72e1e5106f07cecc6118594d":["Pool Party"],"e0235c44640bfa8f264ccde2|72e1e5106f07cecc6118594d":["Dance Performance"],"2f51db3d3e5557a992a38f2b|72e1e5106f07cecc6118594d":["Country Concert"],"a2b51b698b3df87d34cb92db|72e1e5106f07cecc6118594d":["Pop Concert"],"75d7674bed75736c13849c4c|72e1e5106f07cecc6118594d":["R&B Concert"],"1c5be3fa9836cb451e2cbdad|72e1e5106f07cecc6118594d":["Reggae Concert"],"8319c81cf81f45eaaff9a041|72e1e5106f07cecc6118594d":["Opera Concert"],"d160fb8c5f74fa03c42a8237|72e1e5106f07cecc6118594d":["World Music Concert"],"5983b861c14f3fb64d28223d|72e1e5106f07cecc6118594d":["Latin Music Concert"],"896acefaeb443d01f691c978|72e1e5106f07cecc6118594d":["Electronic Concert"],"56b57d84149bb7576d8d9549|72e1e5106f07cecc6118594d":["Rock Concert"],"0b093ca0001bd666ed74cd1c|72e1e5106f07cecc6118594d":["Concert"],"9e9227a5331edf7055628855|72e1e5106f07cecc6118594d":["Classical Music Concert"],"afe23dccbb76850e2db52aae|72e1e5106f07cecc6118594d":["Performance"],"b95e0b911f45222c20f7a2c0|72e1e5106f07cecc6118594d":["Women's Conference"],"048c5d5f0c5b82c1d7de96da|72e1e5106f07cecc6118594d":["Conference"],"bd232ea45da3f093ca7bef2c|72e1e5106f07cecc6118594d":["Engagement Party"],"0646805d3d19e3d6d0598e1f|76794a3aba43f3872dc8fffd":["Fantasy Sports Forum"],"c752ffa3a65a48233c4b4c0d|76794a3aba43f3872dc8fffd":["Money Saving Forum","Business Forum","Forex Forum"],"e23b705a1ee19e4040582207|76794a3aba43f3872dc8fffd":["Architectural Forum"],"6cdf0084539bdc4b14766ffb|76794a3aba43f3872dc8fffd":["Design Forum"],"2425027cb83cba8b1ce84a4f|76794a3aba43f3872dc8fffd":["Beauty Forum"],"9b1ebdc2a2db1cd105e15e16|76794a3aba43f3872dc8fffd":["Fashion Forum"],"508ca0e484398fddf8c2bd77|76794a3aba43f3872dc8fffd":["Relationship Forum"],"cf51e7f7238a39cbae0efb91|76794a3aba43f3872dc8fffd":["Music Forum"],"36e3f8a3f92d475495fd2282|76794a3aba43f3872dc8fffd":["Wedding Forum"],"a1573d776ca3657ad977e867|76794a3aba43f3872dc8fffd":["Medical Forum"],"0a375f98cd5e0709300307cb|76794a3aba43f3872dc8fffd":["DIY Forum"],"8fd91c081dc84ddc472694bd|76794a3aba43f3872dc8fffd":["Interior Design Forum"],"1b99ddaa1e1be2546196e37a|76794a3aba43f3872dc8fffd":["Pregnancy Forum"],"756fc13e2661c96530a0e8e6|76794a3aba43f3872dc8fffd":["Holiday Forum"],"29e05c2a8e05162a7083ee4b|76794a3aba43f3872dc8fffd":["Parenting Forum"],"3c9f40294eaeba1b3da4ac2e|76794a3aba43f3872dc8fffd":["Entertainment Forum"],"48347af720adb587a286adee|76794a3aba43f3872dc8fffd":["Pet Forum"],"a0512671ab2681883359b854|76794a3aba43f3872dc8fffd":["Food Forum"],"680c5dc12a86ef3186c917d3|76794a3aba43f3872dc8fffd":["Health Forum"],"cb037fabb49429c301ddbddc|76794a3aba43f3872dc8fffd":["Travel Forum"],"0b7d96701f1e7e64edc6f506|76794a3aba43f3872dc8fffd":["Hunting Forum"],"2731a34ef2fe1d287c26869c|76794a3aba43f3872dc8fffd":["Pilates Forum"],"92ddb10e7059f7749cd45db1|76794a3aba43f3872dc8fffd":["Yoga Forum"],"3141bbacaf6a9dd3c40bbc7a|76794a3aba43f3872dc8fffd":["Sports Forum"],"bd92073ebb8434c3391471af|76794a3aba43f3872dc8fffd":["Elder Care Forum"],"9e7ea28faf4e7ab40885ed3c|76794a3aba43f3872dc8fffd":["Political Forum"],"dc6489c9e4cb7896019aeecf|76794a3aba43f3872dc8fffd":["Social Forum"],"0f4d9b38bd12695a031bbd8f|76794a3aba43f3872dc8fffd":["Photography Forum"],"9775a021fc617add84878b9d|76794a3aba43f3872dc8fffd":["Advertising Forum"],"b1cfefca6cf60c3a5242b974|76794a3aba43f3872dc8fffd":["Tech Forum"],"d9afb557af9390741c5ce35b|76794a3aba43f3872dc8fffd":["Education Forum"],"9b19d7e94cccae8b611dda8b|76794a3aba43f3872dc8fffd":["Minecraft Forum"],"661c50553252c18a10807143|76794a3aba43f3872dc8fffd":["Gaming Forum"],"84c7367d71a21b8d9ca09480|76794a3aba43f3872dc8fffd":["Coaching Forum"],"f5bf218b530fca6bfcf37272|76794a3aba43f3872dc8fffd":["Agriculture Forum"],"566fe71416a2157a85f712f8|76794a3aba43f3872dc8fffd":["Islam Forum"],"8d0080cece24e80efc3d64d7|76794a3aba43f3872dc8fffd":["Christianity Forum"],"25ba0d305c886cf1434c9e61|76794a3aba43f3872dc8fffd":["Law Forum"],"37e020bd06d5b145b636cc1d|76794a3aba43f3872dc8fffd":["Judaism Forum"],"fb9891451b4bab5e0a8043d2|76794a3aba43f3872dc8fffd":["Job Forum"],"500a3666614ffdaee665af40|76794a3aba43f3872dc8fffd":["Real Estate Forum"],"d557f60d88b5faf6bc596ab9|76794a3aba43f3872dc8fffd":["Automobile Forum"],"9b549be25f14dfb0cfff9de6|76794a3aba43f3872dc8fffd":["Arts Forum"],"c6d4706894a4639b006c9c96|76794a3aba43f3872dc8fffd":["Authors Forum"],"b873456d2c444118efed2c61|76794a3aba43f3872dc8fffd":["Performing Arts Forum"],"1248c826f78d9f1de78d051a|76794a3aba43f3872dc8fffd":["Forum"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d05":["Vegan Food Truck","Vegetarian Food Truck","Crepes Food Truck","Cupcakes Food Truck","Ice Cream Food Truck","Dessert Food Truck","Coffee Food Truck","Juice Food Truck","Dim Sum Food Truck","Doner Kebab Food Truck","Falafel Food Truck","Sandwiches Food Truck","Salad Food Truck","Fish & Chips Food Truck","Fried Chicken Food Truck","Pizza Food Truck","Burger Food Truck","African Food Truck","Kosher Food Truck","Halal Food Truck","Turkish Food Truck","Middle Eastern Food Truck","Brazilian Food Truck","South American Food Truck","Jamaican Food Truck","Cuban Food Truck","Caribbean Food Truck","Mexican Food Truck","Malaysian Food Truck","Indian Food Truck","Thai Food Truck","Chinese Food Truck","Vietnamese Food Truck","Korean Food Truck","Japanese Food Truck","Asian Food Truck","Greek Food Truck","Spanish Food Truck","Italian Food Truck","Mediterranean Food Truck","Tex-mex Food Truck","Hawaiian Food Truck","Cajun Food Truck","Gourmet Food Truck","Fast Food Food Truck","Food Truck","Home Meal Delivery","Food Delivery Service","Doner Kebab Stand","Hot Dog Cart","Ice Cream Cart","Food Cart","Food Court","Cantine","Internet Cafe","Cafeteria","Snack Bar","Salad Bar","Oyster Bar","Soup Bar","Dessert Cafe","Sandwich Cafe","Juice Bar","Ramen Bar","Jamaican Pub","Cuban Bar","Mexican Bar","German Bar","Spanish Bar","Tiki Bar","Irish Pub","Hotel Bar","Piano Bar","Cafe","Taco Stand","French Fries Stand","All You Can Eat Restaurant","Fusion Restaurant","Vegan Restaurant","Vegetarian Restaurant","Family Restaurant","Brunch Restaurant","Breakfast Restaurant","Seafood Restaurant","Seafood Market","Fish Restaurant","Dim Sum Restaurant","Sushi Restaurant","Noodles Restaurant","Doner Restaurant","Hummus Restaurant","Falafel Restaurant","Fish & Chips Restaurant","Tacos Restaurant","Pizza Restaurant","Barbeque Restaurant","Burger Restaurant","Ethiopian Restaurant","Horn African Restaurant","East African Restaurant","South African Restaurant","Central African Restaurant","African Food Restaurant","Kosher Food Restaurant","Israeli Restaurant","Palestinian Restaurant","Syrian Restaurant","Algerian Restaurant","Tunisian Restaurant","Egyptian Restaurant","Libyan Restaurant","Yemen Restaurant","Persian Restaurant","Halal Restaurant","Turkish Restaurant","Moroccan Restaurant","Lebanese Restaurant","Middle Eastern Restaurant","Argentine Restaurant","Brazilian Restaurant","Peruvian Restaurant","South American Restaurant","I-Tal Food Restaurant","Jamaican Restaurant","Cuban Restaurant","Caribbean Restaurant","Guatemalan Restaurant","Mexican Restaurant","Latin American Restaurant","Malaysian Restaurant","Indian Restaurant","Thai Restaurant","Chinese Restaurant","Vietnamese Restaurant","Korean Restaurant","Japanese Restaurant","Asian Restaurant","German Restaurant","Greek Restaurant","Spanish Restaurant","Italian Restaurant","French Restaurant","Mediterranean Restaurant","Eastern European Restaurant","European Restaurant","British Food Restaurant","Tex-Mex Restaurant","Hawaiian Restaurant","Cajun Restaurant","African American Restaurant","Restaurant","American Restaurant","Steak House","Pastry Chef","Private Chef","Chef","Dairy Products Distributor"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d13":["British Pub"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d06":["Olive Oil Distributor"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d07":["Olive oil shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d08":["Donuts Shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d09":["Cupcake Shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d10":["Italian Deli"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d11":["Halal Grocery Store"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d12":["Bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d14":["Brewery"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d15":["Cocktail Bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d16":["sports bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d17":["wine bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d18":["Wedding Bakery"],"629e1bb039a3b42a3cc3a099|ac8eb72e03a52e533dd93cac":["Farm Accommodations","Boathouse","Resort Village","Guesthouse","Motel","Villa","Accommodation","Lodge","Budget hotel","Self Catering Cottage","Homestay","Ski Resort","Luxury Hotel","Boutique Hotel","Hotel","Resort","Golf Resort","Dude Ranch","Tent Lodgings","Cabin Accommodations","Camping Site","Glamping Site","Hostel","Apartment Rental","Bed and Breakfast","Seaside B&B","Riad","Pousada","Townhouse","Beach Hotel","Spa Hotel","Business Hotel","Eco Hotel","Design Hotel","Beachside Apartment Rentals","Cottage"]}}(i||(i={})),function(e){e.TimeZones=[{key:"Pacific/Niue",displayName:"(GMT-11:00) Niue"},{key:"Pacific/Pago_Pago",displayName:"(GMT-11:00) Pago Pago"},{key:"Pacific/Honolulu",displayName:"(GMT-10:00) Hawaii Time"},{key:"Pacific/Rarotonga",displayName:"(GMT-10:00) Rarotonga"},{key:"Pacific/Tahiti",displayName:"(GMT-10:00) Tahiti"},{key:"Pacific/Marquesas",displayName:"(GMT-09:30) Marquesas"},{key:"America/Anchorage",displayName:"(GMT-09:00) Alaska Time"},{key:"Pacific/Gambier",displayName:"(GMT-09:00) Gambier"},{key:"America/Los_Angeles",displayName:"(GMT-08:00) Pacific Time"},{key:"America/Tijuana",displayName:"(GMT-08:00) Pacific Time - Tijuana"},{key:"America/Vancouver",displayName:"(GMT-08:00) Pacific Time - Vancouver"},{key:"America/Whitehorse",displayName:"(GMT-08:00) Pacific Time - Whitehorse"},{key:"Pacific/Pitcairn",displayName:"(GMT-08:00) Pitcairn"},{key:"America/Dawson_Creek",displayName:"(GMT-07:00) Mountain Time - Dawson Creek"},{key:"America/Denver",displayName:"(GMT-07:00) Mountain Time"},{key:"America/Edmonton",displayName:"(GMT-07:00) Mountain Time - Edmonton"},{key:"America/Hermosillo",displayName:"(GMT-07:00) Mountain Time - Hermosillo"},{key:"America/Mazatlan",displayName:"(GMT-07:00) Mountain Time - Chihuahua, Mazatlan"},{key:"America/Phoenix",displayName:"(GMT-07:00) Mountain Time - Arizona"},{key:"America/Yellowknife",displayName:"(GMT-07:00) Mountain Time - Yellowknife"},{key:"America/Belize",displayName:"(GMT-06:00) Belize"},{key:"America/Chicago",displayName:"(GMT-06:00) Central Time"},{key:"America/Costa_Rica",displayName:"(GMT-06:00) Costa Rica"},{key:"America/El_Salvador",displayName:"(GMT-06:00) El Salvador"},{key:"America/Guatemala",displayName:"(GMT-06:00) Guatemala"},{key:"America/Managua",displayName:"(GMT-06:00) Managua"},{key:"America/Mexico_City",displayName:"(GMT-06:00) Central Time - Mexico City"},{key:"America/Regina",displayName:"(GMT-06:00) Central Time - Regina"},{key:"America/Tegucigalpa",displayName:"(GMT-06:00) Central Time - Tegucigalpa"},{key:"America/Winnipeg",displayName:"(GMT-06:00) Central Time - Winnipeg"},{key:"Pacific/Galapagos",displayName:"(GMT-06:00) Galapagos"},{key:"America/Bogota",displayName:"(GMT-05:00) Bogota"},{key:"America/Cancun",displayName:"(GMT-05:00) America Cancun"},{key:"America/Guayaquil",displayName:"(GMT-05:00) Guayaquil"},{key:"America/Havana",displayName:"(GMT-05:00) Havana"},{key:"America/Iqaluit",displayName:"(GMT-05:00) Eastern Time - Iqaluit"},{key:"America/Jamaica",displayName:"(GMT-05:00) Jamaica"},{key:"America/Lima",displayName:"(GMT-05:00) Lima"},{key:"America/Montreal",displayName:"(GMT-05:00) Eastern Time - Montreal"},{key:"America/Nassau",displayName:"(GMT-05:00) Nassau"},{key:"America/New_York",displayName:"(GMT-05:00) Eastern Time"},{key:"America/Panama",displayName:"(GMT-05:00) Panama"},{key:"America/Port-au-Prince",displayName:"(GMT-05:00) Port-au-Prince"},{key:"America/Rio_Branco",displayName:"(GMT-05:00) Rio Branco"},{key:"America/Toronto",displayName:"(GMT-05:00) Eastern Time - Toronto"},{key:"Pacific/Easter",displayName:"(GMT-05:00) Easter Island"},{key:"America/Caracas",displayName:"(GMT-04:30) Caracas"},{key:"America/Asuncion",displayName:"(GMT-04:00) Asuncion"},{key:"America/Barbados",displayName:"(GMT-04:00) Barbados"},{key:"America/Boa_Vista",displayName:"(GMT-04:00) Boa Vista"},{key:"America/Campo_Grande",displayName:"(GMT-04:00) Campo Grande"},{key:"America/Cuiaba",displayName:"(GMT-04:00) Cuiaba"},{key:"America/Curacao",displayName:"(GMT-04:00) Curacao"},{key:"America/Grand_Turk",displayName:"(GMT-04:00) Grand Turk"},{key:"America/Guyana",displayName:"(GMT-04:00) Guyana"},{key:"America/Halifax",displayName:"(GMT-04:00) Atlantic Time - Halifax"},{key:"America/La_Paz",displayName:"(GMT-04:00) La Paz"},{key:"America/Manaus",displayName:"(GMT-04:00) Manaus"},{key:"America/Martinique",displayName:"(GMT-04:00) Martinique"},{key:"America/Port_of_Spain",displayName:"(GMT-04:00) Port of Spain"},{key:"America/Porto_Velho",displayName:"(GMT-04:00) Porto Velho"},{key:"America/Puerto_Rico",displayName:"(GMT-04:00) Puerto Rico"},{key:"America/Santo_Domingo",displayName:"(GMT-04:00) Santo Domingo"},{key:"America/Thule",displayName:"(GMT-04:00) Thule"},{key:"Atlantic/Bermuda",displayName:"(GMT-04:00) Bermuda"},{key:"America/St_Johns",displayName:"(GMT-03:30) Newfoundland Time - St. Johns"},{key:"America/Araguaina",displayName:"(GMT-03:00) Araguaina"},{key:"America/Argentina/Buenos_Aires",displayName:"(GMT-03:00) Buenos Aires"},{key:"America/Bahia",displayName:"(GMT-03:00) Salvador"},{key:"America/Belem",displayName:"(GMT-03:00) Belem"},{key:"America/Cayenne",displayName:"(GMT-03:00) Cayenne"},{key:"America/Fortaleza",displayName:"(GMT-03:00) Fortaleza"},{key:"America/Godthab",displayName:"(GMT-03:00) Godthab"},{key:"America/Maceio",displayName:"(GMT-03:00) Maceio"},{key:"America/Miquelon",displayName:"(GMT-03:00) Miquelon"},{key:"America/Montevideo",displayName:"(GMT-03:00) Montevideo"},{key:"America/Paramaribo",displayName:"(GMT-03:00) Paramaribo"},{key:"America/Recife",displayName:"(GMT-03:00) Recife"},{key:"America/Santiago",displayName:"(GMT-03:00) Santiago"},{key:"America/Sao_Paulo",displayName:"(GMT-03:00) Sao Paulo"},{key:"Antarctica/Palmer",displayName:"(GMT-03:00) Palmer"},{key:"Antarctica/Rothera",displayName:"(GMT-03:00) Rothera"},{key:"Atlantic/Stanley",displayName:"(GMT-03:00) Stanley"},{key:"America/Noronha",displayName:"(GMT-02:00) Noronha"},{key:"Atlantic/South_Georgia",displayName:"(GMT-02:00) South Georgia"},{key:"America/Scoresbysund",displayName:"(GMT-01:00) Scoresbysund"},{key:"Atlantic/Azores",displayName:"(GMT-01:00) Azores"},{key:"Atlantic/Cape_Verde",displayName:"(GMT-01:00) Cape Verde"},{key:"Africa/Abidjan",displayName:"(GMT+00:00) Abidjan"},{key:"Africa/Accra",displayName:"(GMT+00:00) Accra"},{key:"Africa/Bissau",displayName:"(GMT+00:00) Bissau"},{key:"Africa/Casablanca",displayName:"(GMT+00:00) Casablanca"},{key:"Africa/El_Aaiun",displayName:"(GMT+00:00) El Aaiun"},{key:"Africa/Monrovia",displayName:"(GMT+00:00) Monrovia"},{key:"America/Danmarkshavn",displayName:"(GMT+00:00) Danmarkshavn"},{key:"Atlantic/Canary",displayName:"(GMT+00:00) Canary Islands"},{key:"Atlantic/Faroe",displayName:"(GMT+00:00) Faeroe"},{key:"Atlantic/Reykjavik",displayName:"(GMT+00:00) Reykjavik"},{key:"Etc/GMT",displayName:"(GMT+00:00) GMT (no daylight saving)"},{key:"Europe/Dublin",displayName:"(GMT+00:00) Dublin"},{key:"Europe/Lisbon",displayName:"(GMT+00:00) Lisbon"},{key:"Europe/London",displayName:"(GMT+00:00) London"},{key:"Africa/Algiers",displayName:"(GMT+01:00) Algiers"},{key:"Africa/Ceuta",displayName:"(GMT+01:00) Ceuta"},{key:"Africa/Lagos",displayName:"(GMT+01:00) Lagos"},{key:"Africa/Ndjamena",displayName:"(GMT+01:00) Ndjamena"},{key:"Africa/Tunis",displayName:"(GMT+01:00) Tunis"},{key:"Africa/Windhoek",displayName:"(GMT+01:00) Windhoek"},{key:"Europe/Amsterdam",displayName:"(GMT+01:00) Amsterdam"},{key:"Europe/Andorra",displayName:"(GMT+01:00) Andorra"},{key:"Europe/Belgrade",displayName:"(GMT+01:00) Central European Time - Belgrade"},{key:"Europe/Berlin",displayName:"(GMT+01:00) Berlin"},{key:"Europe/Brussels",displayName:"(GMT+01:00) Brussels"},{key:"Europe/Budapest",displayName:"(GMT+01:00) Budapest"},{key:"Europe/Copenhagen",displayName:"(GMT+01:00) Copenhagen"},{key:"Europe/Gibraltar",displayName:"(GMT+01:00) Gibraltar"},{key:"Europe/Luxembourg",displayName:"(GMT+01:00) Luxembourg"},{key:"Europe/Madrid",displayName:"(GMT+01:00) Madrid"},{key:"Europe/Malta",displayName:"(GMT+01:00) Malta"},{key:"Europe/Monaco",displayName:"(GMT+01:00) Monaco"},{key:"Europe/Oslo",displayName:"(GMT+01:00) Oslo"},{key:"Europe/Paris",displayName:"(GMT+01:00) Paris"},{key:"Europe/Prague",displayName:"(GMT+01:00) Central European Time - Prague"},{key:"Europe/Rome",displayName:"(GMT+01:00) Rome"},{key:"Europe/Stockholm",displayName:"(GMT+01:00) Stockholm"},{key:"Europe/Tirane",displayName:"(GMT+01:00) Tirane"},{key:"Europe/Vienna",displayName:"(GMT+01:00) Vienna"},{key:"Europe/Warsaw",displayName:"(GMT+01:00) Warsaw"},{key:"Europe/Zurich",displayName:"(GMT+01:00) Zurich"},{key:"Africa/Cairo",displayName:"(GMT+02:00) Cairo"},{key:"Africa/Johannesburg",displayName:"(GMT+02:00) Johannesburg"},{key:"Africa/Maputo",displayName:"(GMT+02:00) Maputo"},{key:"Africa/Tripoli",displayName:"(GMT+02:00) Tripoli"},{key:"Asia/Amman",displayName:"(GMT+02:00) Amman"},{key:"Asia/Beirut",displayName:"(GMT+02:00) Beirut"},{key:"Asia/Damascus",displayName:"(GMT+02:00) Damascus"},{key:"Asia/Gaza",displayName:"(GMT+02:00) Gaza"},{key:"Asia/Jerusalem",displayName:"(GMT+02:00) Jerusalem"},{key:"Asia/Nicosia",displayName:"(GMT+02:00) Nicosia"},{key:"Europe/Athens",displayName:"(GMT+02:00) Athens"},{key:"Europe/Bucharest",displayName:"(GMT+02:00) Bucharest"},{key:"Europe/Chisinau",displayName:"(GMT+02:00) Chisinau"},{key:"Europe/Helsinki",displayName:"(GMT+02:00) Helsinki"},{key:"Europe/Istanbul",displayName:"(GMT+02:00) Istanbul"},{key:"Europe/Kaliningrad",displayName:"(GMT+02:00) Moscow-01 - Kaliningrad"},{key:"Europe/Kiev",displayName:"(GMT+02:00) Kiev"},{key:"Europe/Riga",displayName:"(GMT+02:00) Riga"},{key:"Europe/Sofia",displayName:"(GMT+02:00) Sofia"},{key:"Europe/Tallinn",displayName:"(GMT+02:00) Tallinn"},{key:"Europe/Vilnius",displayName:"(GMT+02:00) Vilnius"},{key:"Africa/Khartoum",displayName:"(GMT+03:00) Khartoum"},{key:"Africa/Nairobi",displayName:"(GMT+03:00) Nairobi"},{key:"Antarctica/Syowa",displayName:"(GMT+03:00) Syowa"},{key:"Asia/Baghdad",displayName:"(GMT+03:00) Baghdad"},{key:"Asia/Qatar",displayName:"(GMT+03:00) Qatar"},{key:"Asia/Riyadh",displayName:"(GMT+03:00) Riyadh"},{key:"Europe/Minsk",displayName:"(GMT+03:00) Minsk"},{key:"Europe/Moscow",displayName:"(GMT+03:00) Moscow+00"},{key:"Asia/Baku",displayName:"(GMT+04:00) Baku"},{key:"Asia/Dubai",displayName:"(GMT+04:00) Dubai"},{key:"Asia/Tbilisi",displayName:"(GMT+04:00) Tbilisi"},{key:"Asia/Yerevan",displayName:"(GMT+04:00) Yerevan"},{key:"Europe/Samara",displayName:"(GMT+04:00) Moscow+00 - Samara"},{key:"Indian/Mahe",displayName:"(GMT+04:00) Mahe"},{key:"Indian/Mauritius",displayName:"(GMT+04:00) Mauritius"},{key:"Indian/Reunion",displayName:"(GMT+04:00) Reunion"},{key:"Asia/Kabul",displayName:"(GMT+04:30) Kabul"},{key:"Antarctica/Mawson",displayName:"(GMT+05:00) Mawson"},{key:"Asia/Aqtau",displayName:"(GMT+05:00) Aqtau"},{key:"Asia/Aqtobe",displayName:"(GMT+05:00) Aqtobe"},{key:"Asia/Ashgabat",displayName:"(GMT+05:00) Ashgabat"},{key:"Asia/Dushanbe",displayName:"(GMT+05:00) Dushanbe"},{key:"Asia/Karachi",displayName:"(GMT+05:00) Karachi"},{key:"Asia/Tashkent",displayName:"(GMT+05:00) Tashkent"},{key:"Asia/Yekaterinburg",displayName:"(GMT+05:00) Moscow+02 - Yekaterinburg"},{key:"Indian/Kerguelen",displayName:"(GMT+05:00) Kerguelen"},{key:"Indian/Maldives",displayName:"(GMT+05:00) Maldives"},{key:"Asia/Calcutta",displayName:"(GMT+05:30) India Standard Time"},{key:"Asia/Colombo",displayName:"(GMT+05:30) Colombo"},{key:"Asia/Katmandu",displayName:"(GMT+05:45) Katmandu"},{key:"Antarctica/Vostok",displayName:"(GMT+06:00) Vostok"},{key:"Asia/Almaty",displayName:"(GMT+06:00) Almaty"},{key:"Asia/Bishkek",displayName:"(GMT+06:00) Bishkek"},{key:"Asia/Dhaka",displayName:"(GMT+06:00) Dhaka"},{key:"Asia/Omsk",displayName:"(GMT+06:00) Moscow+03 - Omsk, Novosibirsk"},{key:"Asia/Thimphu",displayName:"(GMT+06:00) Thimphu"},{key:"Indian/Chagos",displayName:"(GMT+06:00) Chagos"},{key:"Asia/Rangoon",displayName:"(GMT+06:30) Rangoon"},{key:"Indian/Cocos",displayName:"(GMT+06:30) Cocos"},{key:"Antarctica/Davis",displayName:"(GMT+07:00) Davis"},{key:"Asia/Bangkok",displayName:"(GMT+07:00) Bangkok"},{key:"Asia/Hovd",displayName:"(GMT+07:00) Hovd"},{key:"Asia/Jakarta",displayName:"(GMT+07:00) Jakarta"},{key:"Asia/Krasnoyarsk",displayName:"(GMT+07:00) Moscow+04 - Krasnoyarsk"},{key:"Asia/Saigon",displayName:"(GMT+07:00) Hanoi"},{key:"Indian/Christmas",displayName:"(GMT+07:00) Christmas"},{key:"Antarctica/Casey",displayName:"(GMT+08:00) Casey"},{key:"Asia/Brunei",displayName:"(GMT+08:00) Brunei"},{key:"Asia/Choibalsan",displayName:"(GMT+08:00) Choibalsan"},{key:"Asia/Hong_Kong",displayName:"(GMT+08:00) Hong Kong"},{key:"Asia/Irkutsk",displayName:"(GMT+08:00) Moscow+05 - Irkutsk"},{key:"Asia/Kuala_Lumpur",displayName:"(GMT+08:00) Kuala Lumpur"},{key:"Asia/Macau",displayName:"(GMT+08:00) Macau"},{key:"Asia/Makassar",displayName:"(GMT+08:00) Makassar"},{key:"Asia/Manila",displayName:"(GMT+08:00) Manila"},{key:"Asia/Shanghai",displayName:"(GMT+08:00) China Time - Beijing"},{key:"Asia/Singapore",displayName:"(GMT+08:00) Singapore"},{key:"Asia/Taipei",displayName:"(GMT+08:00) Taipei"},{key:"Asia/Ulaanbaatar",displayName:"(GMT+08:00) Ulaanbaatar"},{key:"Australia/Perth",displayName:"(GMT+08:00) Western Time - Perth"},{key:"Asia/Dili",displayName:"(GMT+09:00) Dili"},{key:"Asia/Jayapura",displayName:"(GMT+09:00) Jayapura"},{key:"Asia/Pyongyang",displayName:"(GMT+09:00) Pyongyang"},{key:"Asia/Seoul",displayName:"(GMT+09:00) Seoul"},{key:"Asia/Tokyo",displayName:"(GMT+09:00) Tokyo"},{key:"Asia/Yakutsk",displayName:"(GMT+09:00) Moscow+06 - Yakutsk"},{key:"Pacific/Palau",displayName:"(GMT+09:00) Palau"},{key:"Australia/Adelaide",displayName:"(GMT+09:30) Central Time - Adelaide"},{key:"Australia/Darwin",displayName:"(GMT+09:30) Central Time - Darwin"},{key:"Antarctica/DumontDUrville",displayName:"(GMT+10:00) Dumont D'Urville"},{key:"Asia/Magadan",displayName:"(GMT+10:00) Moscow+08 - Magadan"},{key:"Asia/Vladivostok",displayName:"(GMT+10:00) Moscow+07 - Yuzhno-Sakhalinsk"},{key:"Australia/Brisbane",displayName:"(GMT+10:00) Eastern Time - Brisbane"},{key:"Australia/Hobart",displayName:"(GMT+10:00) Eastern Time - Hobart"},{key:"Australia/Sydney",displayName:"(GMT+10:00) Eastern Time - Melbourne, Sydney"},{key:"Pacific/Chuuk",displayName:"(GMT+10:00) Truk"},{key:"Pacific/Guam",displayName:"(GMT+10:00) Guam"},{key:"Pacific/Port_Moresby",displayName:"(GMT+10:00) Port Moresby"},{key:"Pacific/Efate",displayName:"(GMT+11:00) Efate"},{key:"Pacific/Guadalcanal",displayName:"(GMT+11:00) Guadalcanal"},{key:"Pacific/Kosrae",displayName:"(GMT+11:00) Kosrae"},{key:"Pacific/Noumea",displayName:"(GMT+11:00) Noumea"},{key:"Pacific/Pohnpei",displayName:"(GMT+11:00) Ponape"},{key:"Pacific/Norfolk",displayName:"(GMT+11:30) Norfolk"},{key:"Asia/Kamchatka",displayName:"(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy"},{key:"Pacific/Auckland",displayName:"(GMT+12:00) Auckland"},{key:"Pacific/Fiji",displayName:"(GMT+12:00) Fiji"},{key:"Pacific/Funafuti",displayName:"(GMT+12:00) Funafuti"},{key:"Pacific/Kwajalein",displayName:"(GMT+12:00) Kwajalein"},{key:"Pacific/Majuro",displayName:"(GMT+12:00) Majuro"},{key:"Pacific/Nauru",displayName:"(GMT+12:00) Nauru"},{key:"Pacific/Tarawa",displayName:"(GMT+12:00) Tarawa"},{key:"Pacific/Wake",displayName:"(GMT+12:00) Wake"},{key:"Pacific/Wallis",displayName:"(GMT+12:00) Wallis"},{key:"Pacific/Apia",displayName:"(GMT+13:00) Apia"},{key:"Pacific/Enderbury",displayName:"(GMT+13:00) Enderbury"},{key:"Pacific/Fakaofo",displayName:"(GMT+13:00) Fakaofo"},{key:"Pacific/Tongatapu",displayName:"(GMT+13:00) Tongatapu"},{key:"Pacific/Kiritimati",displayName:"(GMT+14:00) Kiritimati"}]}(i||(i={}));var n=function(){function e(){}return e.prototype.queryParams=function(){var e={},t=window.location.href.split("?").filter(function(e,t){return 0!==t});return _.flatten(_.map(t,function(e){return e.split("#")[0].split("&")})).forEach(function(t){var a=t.split("=");e[a[0]]=a[1]}),e},e.prototype.getQueryStringValueByKey=function(e){var t=this.queryParams();return t.hasOwnProperty(e)?t[e]:""},e}();angular.module("adiIntroCommon").service("urlParser",n),function(e){var t=function(){function t(a,i,n,r,o,s,l,c,d,u,h,p,f){this.$scope=a,this.logoManager=i,this.socialLinkManager=n,this.consumerBiLogger=r,this.userDetailsApi=o,this.introAdiIntegration=s,this.applicationParameters=l,this.validation=c,this.$translate=d,this.flags=u,this.osUtils=h,this.introManager=f,this.prepareData();var g={persistence:new e.IntroLogoPersistence(this.data.media,this.introAdiIntegration,p,u,this.introManager),onFieldChanged:this.onFieldChanged.bind(this),usePlaceholderOnDelete:!0,app:"intro"};this.logoManager.setContext(g),t.logoManagerInstance||(t.logoManagerInstance=this.logoManager),this.data.videoStructure&&!this.flags.MED&&(this.bannerUrl=this.getBannerFromDataOrLogo())}return t.$inject=["$scope","logoManager","socialLinkManager","consumerBiLogger","userDetailsApi","introAdiIntegration","applicationParameters","validation","$translate","flags","osUtils","clientTopology","introManager"],t.prototype.getBannerFromDataOrLogo=function(){var e=_.last(this.data.media.photos);return e&&e.url},t.prototype.$postLink=function(){this.data.name===this.$translate.instant("intro.business-name.default")&&(this.data.name="")},t.prototype.prepareData=function(){var e=this;this.view=this.$scope.view||"intro",this.data.contactDetails=this.data.contactDetails||{},this.data.socialLinks=this.data.socialLinks||[],this.data.media=this.data.media||{},this.normalizeAddress(),this.data.contactDetails.email||this.userDetailsApi.getUserDetails().then(function(t){return e.data.contactDetails.email=t.email})},t.prototype.normalizeAddress=function(){this.data.contactDetails.address=this.data.contactDetails.address||{};var e=this.data.contactDetails.address.fullAddress;this.data.contactDetails.address.fullAddress=_.isString(e)?e.trim():""},t.prototype.getOrigin=function(){return this.view},t.prototype.addEmptySocialLink=function(){var e={platform:"",url:""};this.data.socialLinks.push(e),this.osUtils.isIE||(this.focusedSocial=e)},t.prototype.deleteSocialLink=function(e){var t=this.data.socialLinks.indexOf(e);t>=0&&this.data.socialLinks.splice(t,1),this.onFieldChanged(e.platform,"social",e.url,"")},t.prototype.onSocialChanged=function(e){e.platform=this.socialLinkManager.getPlatformNameByUrl(e.url),e.icon=this.socialLinkManager.getPlatformIconClass(e.platform,!0)},t.prototype.enableAddSocialLink=function(){return(this.data.socialLinks||[]).length<this.applicationParameters.maxSocialLinks},t.prototype.isLinkInvalid=function(e){return!e.platform&&e.url},t.prototype.onFieldChanged=function(e,t,a,i,n){if(i!==a){var r=i?i.length:0,o="edit";o=i?o:"remove",o=a?o:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(e,t,r,o,this.view,n||null)}},t.prototype.blurEventTargetOnEnter=function(e){"Enter"!==e.key&&13!==e.which||e.target.blur()},t.prototype.$onDestroy=function(){t.logoManagerInstance.cleanUp(),t.logoManagerInstance.doneWithThisContext()},t.logoManagerInstance=null,t}();e.BusinessCardEditable=t,angular.module("adiIntroCommon").component("businessCardEditable",{controller:t,templateUrl:"views/intro/business-card-editable.html",bindings:{data:"=",view:"@?"}}).filter("socialIcon",["socialLinkManager",function(e){return function(t){return"social:"+(!!t&&t!==e.invalidPlatformName&&t!==AdiCoreSanta.SocialLinkManager.VALID_CUSTOM_LINK?t:"generic").toLowerCase()}}])}(A||(A={}));var r=function(){function e(e,t,a){this.$element=e,this.$scope=t,this.$timeout=a}return e.$inject=["$element","$scope","$timeout"],e.prototype.$postLink=function(){var e=this;this.$element.find("input").on("change",function(t){var a=t.target.files[0];a&&e.$timeout(function(){e.onSelect({$file:a}),t.target.value=null},0,!1)})},e}();angular.module("adiIntroCommon").component("fileUploadSelect",{bindings:{onSelect:"&"},templateUrl:"views/common/file-upload-select.html",controller:r});var o=function(){function e(e){this.$translate=e}return e.$inject=["$translate"],e.prototype.handleClick=function(){this.onClick&&this.onClick()},e.prototype.getLabel=function(){return this.labelKey?this.$translate.instant(this.labelKey):this.$translate.instant("intro.skip-button")},e}();angular.module("adiIntroCommon").component("introSkipButton",{bindings:{onClick:"&",labelKey:"@?"},templateUrl:"views/common/intro-skip-button.html",controller:o});var s=function(){function e(){}return e.prototype.handleClick=function(){this.onClick&&this.onClick()},e}();angular.module("adiIntroCommon").component("introBackButton",{bindings:{onClick:"&"},templateUrl:"views/common/intro-back-button.html",controller:s});var l=function(){function e(e){this.$translate=e}return e.$inject=["$translate"],e.prototype.handleClick=function(){this.onClick&&this.onClick()},e.prototype.getLabel=function(){return this.labelKey?this.$translate.instant(this.labelKey):this.$translate.instant("intro.next-button")},e}();angular.module("adiIntroCommon").component("introNextButton",{bindings:{onClick:"&",isDisabled:"<?",focusIf:"<?",labelKey:"@?"},templateUrl:"views/common/intro-next-button.html",controller:l});var c=function(){function e(t,a,i,n,r,o){var s=this;this.flags=a,this.$element=i,this.cmsApi=n,this.introManager=r,this.$translate=o,this.businessTypeInput=e.BUSINESS_TYPE_INPUT,this.lastSearchedCategories=[],this.relatedResultsTitle={isTitle:!0,term:""},this.showRelatedResultsTitle=!0,this.searchChanged=!1,this.isTitleHovered=!1,this.lastShowGenericPopUpState=!1,this.tempHighlightRegex={},this.isValidTerm=function(){return!s.lastSearchedTerm||"string"==typeof s.lastSearchedTerm&&s.cmsApi.sanitize(s.lastSearchedTerm).length>0},this.inSearch=function(){return!s.result&&s.lastSearchedTerm&&s.isValidTerm()},this.isEmptySearch=function(){return s.inSearch()&&0===s.lastSearchedCategories.length},this.shouldShowGenericPopover=function(){return s.inSearch()&&(0===s.lastSearchedCategories.length||s.lastSearchedCategories[0]===s.relatedResultsTitle)},this.isListLoaded=function(){return s.showResults};var l=this.$translate.instant("intro.category-search.related-results-label");this.relatedResultsTitle.term=l.toUpperCase(),this.flags.MED&&(this.showRelatedResultsTitle=!1,t.$watch("$ctrl.inputFocused()",function(e,t){e!==t&&angular.element(window).triggerHandler("resize")})),this.searchTerm||(this.searchTerm="")}return e.$inject=["$scope","flags","$element","cmsApi","introManager","$translate"],e.prototype.getPreSuggestionsByVertical=function(){if(!this.preSuggestionsByVertical)return[];var e=this.preSuggestionsByVertical[this.vertical]||this.preSuggestionsByVertical.unknown;return this.flags.MED&&this.flags.betterBusinessCategoryPage?e.slice(0,4):e},e.prototype.getExampleText=function(e){return this.introManager.getExampleText(e)},e.prototype._onExampleClick=function(e){var t=e.target.textContent.trim();this.searchTerm=t,angular.element("[name=businessTypeInput]").focus(),this.onExampleClick({term:t})},e.prototype._onSelectFromEmptyList=function(e,t){this.onSelectFromEmptyList({item:e,index:t}),this.result=e},e.prototype.getHighlightText=function(e){if(e.isTitle)return"";if(this.tempHighlightRegex.term!==this.searchTerm){this.tempHighlightRegex.term=this.searchTerm,this.tempHighlightRegex.termToHighlight=this.searchTerm.replace(/&/g,"&amp;");try{this.tempHighlightRegex.regex=RegExp("^"+this.searchTerm+"|\\s"+this.searchTerm,"i")}catch(e){}}return this.tempHighlightRegex.regex.test(e.term)?this.tempHighlightRegex.termToHighlight:e.term},e.prototype._onSearchChanged=function(e,t){var a=_.findIndex(t,function(e){return e.isTitle}),i=a>=0?t.slice(0,a):t,n=e.replace?e:"",r=n.replace(/[-+\/.;()'&]/gi,""),o=_.findIndex(i,function(e){return e.term&&(e.term.toLowerCase()===r.toLowerCase()||e.term.toLowerCase()===n.toLowerCase())});o>=0?(t[o].isExactMatch=!0,this.result=i[o]):this.result&&this.getDisplayText(this.result)!==e&&(this.result=null),this.searchChanged&&(this.validCategory=!!this.result),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=t,this.isResetTerm&&this.isResetTerm({term:e,matches:t})?(this.lastSearchedTerm="",this.result=null,this.searchTerm=""):this.lastSearchedTerm=e,""!==e?this.showResults=!0:this.validCategory=!1,this.onSearchChanged({term:e,matches:t,result:this.result})},e.prototype.itemClicked=function(e,t){t&&e.stopPropagation()},e.prototype._onSelectedFromList=function(e){var t,a=this;if(this.selected&&(t=this.lastSearchedCategories.indexOf(this.selected),this.onSelectedFromList({term:e,index:t}),this.selected.prefix?this.searchTerm=this.selected.prefix+" ":this.result=this.selected,this.validCategory=!!this.result),this.lastSearchedTerm.toLowerCase()!==e.toLowerCase())return this.search(e).then(function(t){return t.filter(function(t){return a.getDisplayText(t)!==e})});this.onSubmit()},e.prototype.transformData=function(e){var t=function(e,t,a){return _.includes(_.keys(e),t)&&(e[a]=_.cloneDeep(e[t]),delete e[t]),e};e&&e.results&&e.results.forEach(function(e){return t(e,"displayName","term")}),e&&e.relatedResults&&e.relatedResults.forEach(function(e){return t(e,"displayName","term")})},e.prototype.search=function(t,a,i){var n=this;return void 0===t&&(t=this.searchTerm||""),void 0===a&&(a=200),void 0===i&&(i=200),this.cmsApi.elasticSearch(t,a,i).then(function(t){n.transformData(t);var a=t.results.slice(0,e.RESULTS_LIMIT),i=e.RESULTS_THRESHOLD_NEW;if(a.length<i&&t.relatedResults.length>0){var r=t.relatedResults.map(function(e){return e.isRelated=!0,e});return a.concat(n.showRelatedResultsTitle?[n.relatedResultsTitle]:[],r)}return a})},e.prototype.getDisplayText=function(e){return e.prefix?e.prefix+"...":e.term},e.prototype.relatedResultsEnter=function(e){this.isTitleHovered=!!e},e.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},e.prototype.inputElm=function(){return this._inputElm&&0!==this._inputElm.length||(this._inputElm=this.$element.find("input")),this._inputElm},e.prototype.blurInput=function(){this.inputElm().blur()},e.prototype.inputEmptyAndUnfocused=function(){return this.inputEmpty()&&!this.inputFocused()},e.prototype.inputEmpty=function(){return""===this.inputElm().val()},e.prototype.submit=function(){this.onSubmit()},e.prototype.inputFocused=function(){var e=this.inputElm();return e&&e[0]===document.activeElement},e.RESULTS_THRESHOLD=7,e.RESULTS_THRESHOLD_NEW=8,e.RESULTS_LIMIT=200,e.BUSINESS_TYPE_INPUT="businessTypeInput",e}();angular.module("adiIntroCommon").component("categorySearch",{templateUrl:"views/common/category-search.html",controller:c,bindings:{preSuggestionsByVertical:"<?",defaultCategories:"<?",validCategory:"<",result:"<",lastSearchedTerm:"<",searchTerm:"<",vertical:"<?",isDropdownSuggestionsHidden:"<?",selected:"=",onSelectedFromList:"&",onSelectFromEmptyList:"&",onExampleClick:"&",onSearchChanged:"&",onSubmit:"&",isResetTerm:"&?",acOptionsContainerClass:"@?",hideNoCategoryMatches:"<?",hideGenericSuggestions:"<?",dontStoreMatches:"<?"}});var d=7,u=function(){function e(){this.userClickedOnShowMore=!1,this.maxTiles=this.maxTiles||d}return Object.defineProperty(e.prototype,"isShowAll",{get:function(){return this.userClickedOnShowMore||this.images&&this.images.length<=this.maxTiles},enumerable:!0,configurable:!0}),e.prototype.getImageStyle=function(e,t){return!e.isChecked&&t?{"background-image":'linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0%,rgba(0, 0, 0, 0.2) 100%), url("'+e.url+'")'}:{"background-image":'url("'+e.url+'")'}},Object.defineProperty(e.prototype,"getImages",{get:function(){return this.images&&this.isShowAll?this.images:this.images.slice(0,this.maxTiles)},enumerable:!0,configurable:!0}),e.prototype.onTileClicked=function(e){var t=!this.images[e].isChecked;this.images[e].isChecked=t,this.imageClicked&&this.imageClicked(this.images[e].url,t)},e.prototype.onEmptyTileClicked=function(){this.userClickedOnShowMore=!0},Object.defineProperty(e.prototype,"moreImagesNumber",{get:function(){return this.images.length-this.maxTiles},enumerable:!0,configurable:!0}),e}();angular.module("adiIntroCommon").component("imageSelector",{bindings:{imageClicked:"=",images:"=",maxTiles:"<"},templateUrl:"views/common/image-selector.html",controller:u});var h=function(){function e(e,t){var a=this;this.$translate=e,this.flags=t,this.deepGet=function(e,t){var i;"string"==typeof t?i=t.split("."):t instanceof Array&&(i=t);var n=[];return a.getByKeys(e,i,n),n},this.getByKeys=function(e,t,i){if("object"!=typeof e)return null;var n=e[t[0]];n&&(t.length>1?a.getByKeys(n,t.slice(1),i):i.push(n));var r=Object.keys(e);r.length&&r.forEach(function(n){a.getByKeys(e[n],t,i)})},this.getKeyByValue=function(e,t){return Object.keys(e).find(function(a){return e[a]===t||e[a].indexOf(t)>-1})}}return e.$inject=["$translate","flags"],e.prototype.translateIfPossible=function(e){var t=this.$translate.instant(e);return t===e?"":t},e.prototype.shuffleArray=function(e){Math.seedrandom(Date.now());for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[a],e[a]=i}return e},e.prototype.minBy=function(e,t){var a={};e.forEach(function(e){a[e[t]]=e});var i=_.min(e.map(function(e){var a;if(t instanceof Function?a=t(e):"string"==typeof t?a=e[t]:console.error("key should be a function or string"),"number"!=typeof a)throw new Error("_.min expectes array of numbers and value is not a number: "+a);return a}));return a[i]},e.prototype.JSONClone=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getRandomItem=function(e){return e[_.random(e.lemgth-1)]},e.prototype.softFilter=function(e,t){var a=e.filter(t);return a.length?a:e},e.prototype.keyBy=function(e,t){return e.reduce(function(e,a){return e[a[t]]=a,e},{})},e.prototype.isArraysOfObjectsEqualByOrderAndKeys=function(e,t,a){return!(!a||!a.length)&&e.every(function(e,i){return a.every(function(a){return e[a]===t[i][a]})})},e}();angular.module("adiIntroAppInternal").service("miscUtils",h).filter("externalImage",["clientTopology",function(e){return function(t){return""+e.staticsUrl+t}}]),function(e){e.preSuggestionsByVertical={business:["consulting-firm","non-profit-organization","coaching-professional","cleaning-service","marketing-agency"],Stores:["online-clothing-store","online-jewelry-store","online-home-goods-store","online-health-food-store","online-hair-extensions-store"],"portfolio-cv":["portfolio","artist","actor","resume","cv"],photography:["event-photographer","photography-portfolio","fashion-photography-studio","photographer","photography-studio"],music:["dj","recording-studio","musician","rock-band","hip-hop-artist"],"health-wellness":["make-up-artist","massage-therapist","salon","skin-care-clinic","nutritionist"],Blog:["fashion-blog","news-blog","blogger","health-blog","business-blog"],Blog2:["fashion-blog","news-blog","blogger","health-blog","business-blog"],other:["non-profit-organization","school","charity","author","blogger"],design:["graphic-designer","artist","portfolio","architecture-firm","design-studio"],events:["wedding","conference","birthday-party","meetup","marathon"]},e.hardcodedSuggestionsByVertical={business:["Consulting Firm","Non-Profit Organization","Coaching Professional","Cleaning Service","Marketing Agency"],Stores:["Online Clothing Store","Online Jewelry Store","Online Home Goods Store","Online Health Food Store","Online Hair Extensions Store"],"portfolio-cv":["Portfolio","Artist","Actor","Resume","CV"],photography:["Event Photographer","Photography Portfolio","Fashion Photography Studio","Photographer","Photography Studio"],music:["DJ","Recording Studio","Musician","Rock Band","Hip Hop Artist"],"health-wellness":["Make Up Artist","Massage Therapist","Salon","Skin Care Clinic","Nutritionist"],Blog:["Fashion Blog","News Blog","Blogger","Health Blog","Business Blog"],Blog2:["Fashion Blog","News Blog","Blogger","Health Blog","Business Blog"],other:["Non-Profit Organization","School","Charity","Author","Blogger"],design:["Graphic Designer","Artist","Portfolio","Architecture Firm","Design Studio"],events:["Wedding","Conference","Birthday Party","Meetup","Marathon"],unknown:["Travel Agency","Elementary School","Real Estate Agency","Online Sporting Goods Store","Make Up Artist"]},e.HARDCODED_DEFAULT_PRE_SUGGESTIONS=["Travel Agency","Elementary School","Real Estate Agency","Online Sporting Goods Store","Make Up Artist"],e.DEFAULT_PRE_SUGGESTIONS=["travel-agency","elementary-school","real-estate-agency","online-sporting-goods-store","make-up-artist"],e.newPreSuggestionsByVertical={business:["business-example-1","business-example-2","business-example-3","business-example-4","business-example-5"],Stores:["stores-example-1","stores-example-2","stores-example-3","stores-example-4","stores-example-5"],"portfolio-cv":["portfolio-cv-example-1","portfolio-cv-example-2","portfolio-cv-example-3","portfolio-cv-example-4","portfolio-cv-example-5"],photography:["photography-example-1","photography-example-2","photography-example-3","photography-example-4","photography-example-5"],music:["music-example-1","music-example-2","music-example-3","music-example-4","music-example-5"],"health-wellness":["health-wellness-example-1","health-wellness-example-2","health-wellness-example-3","health-wellness-example-4","health-wellness-example-5"],Blog:["blog-example-1","blog-example-2","blog-example-3","blog-example-4","blog-example-5"],Blog2:["blog2-example-1","blog2-example-2","blog2-example-3","blog2-example-4","blog2-example-5"],other:["other-example-1","other-example-2","other-example-3","other-example-4","other-example-5"],design:["design-example-1","design-example-2","design-example-3","design-example-4","design-example-5"],events:["events-example-1","events-example-2","events-example-3","events-example-4","events-example-5"],unknown:["unknown-example-1","unknown-example-2","unknown-example-3","unknown-example-4","unknown-example-5"],accommodation:["accommodation-example-1","accommodation-example-2","accommodation-example-3","accommodation-example-4","accommodation-example-5"],"restaurants-food":["restaurants-food-example-1","restaurants-food-example-2","restaurants-food-example-3","restaurants-food-example-4","restaurants-food-example-5"]},e.DEFAULT_CATEGORY={industryId:"9e0d43c23f82998a6ac269b5",structureId:"e51e11f3597e0c565deb792f",term:"Local Business",key:"local-business"},e.GENERAL_CATEGORIES={General:[e.DEFAULT_CATEGORY,{industryId:"087d714d5f85b09c65b51e28",structureId:"073bd83d054dcff87fa0ef50",term:"Online Store",key:"online-store"},{industryId:"e79e5765052b89b579c9a4c2",structureId:"40dc538a8a6c3e2dae342922",term:"Other",key:"other"}],Blog:[{term:"General Blog",key:"general-blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],Blog2:[{term:"General Blog",key:"general-blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],"portfolio-cv":[{term:"Portfolio & CV",key:"portfolio-and-cv",industryId:"c4e29ccec1b3103f4caa52f0",structureId:"3a6327d9c3946eefcfe6d513"}],design:[{term:"Design Business",key:"design-business",industryId:"a16519bdf44907db3cd5a989",structureId:"f19b3125657d6a267d2c47d8"}],music:[{term:"Music Business",key:"music-business",industryId:"88b56978690cff09a18247c1",structureId:"df2149e0b7ea38029c3b9640"}],photography:[{term:"Photographer",key:"photographer",industryId:"f540e5a65f637e7cd869f5b9",structureId:"be6f1d8dc988d56f886ed440"}],"health-wellness":[{term:"Beauty Business",key:"beauty-business",industryId:"2425027cb83cba8b1ce84a4f",structureId:"190a5ffad4f67ad6e22ad08d"}]},e.generalCategoriesByFlag={introNewOtherCategory:{General:[e.GENERAL_CATEGORIES.General[0],e.GENERAL_CATEGORIES.General[1],{industryId:"e79e5765052b89b579c9a4c2",structureId:"86639912f37c3faf0a75d740",term:"Other"}]}},angular.module("adiIntroInternal").constant("introAnimationData",function(){var t;return(t={})[e.INTRO_STATES.INTRO_CATEGORY_SEARCH]={contentHeight:325},t[e.INTRO_STATES.INTRO_BLOCKED_CATEGORY]={contentHeight:274},t[e.INTRO_STATES.INTRO_SERVICES_OFFER]={contentHeight:295},t[e.INTRO_STATES.INTRO_APPS_RECOMMENDATION]={contentHeight:295},t[e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT]={contentHeight:168},t[e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS]={contentHeight:168},t[e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL]={contentHeight:168},t[e.INTRO_STATES.INTRO_IMAGES_SELECTION]={contentHeight:168},t[e.INTRO_STATES.INTRO_BUSINESS_NAME]={contentHeight:90},t[e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL]={contentHeight:90},t[e.INTRO_STATES.INTRO_BUSINESS_LOCATION]={contentHeight:260},t[e.INTRO_STATES.INTRO_BUSINESS_DATES]={contentHeight:260},t[e.INTRO_STATES.INTRO_SEARCH_CONFIRM]={contentHeight:180},t[e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM]={contentHeight:180},t[e.INTRO_STATES.INTRO_RECAPTCHA]={contentHeight:180},t}()),function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.SundayLastDayOfWeek=7]="SundayLastDayOfWeek"}(e.WeekDay||(e.WeekDay={}))}(A||(A={})),function(){function e(e,t,a,i){var n,r={PLATFORM_SEARCH:"/_api/any2wix-server/platformsearch",GET_BUSINESS_INFO:"/_api/any2wix-server/analyzeplatforms"},o={FACTUAL:"factual",FACEBOOK:"facebook",GOOGLE_PLACES:"google_places",YELP:"yelp"},s=i;function l(e){var t=[{providerResultsKey:"unified_search",platform:"unified"},{providerResultsKey:"factual_search",platform:o.FACTUAL},{providerResultsKey:"googleplus_search",platform:o.GOOGLE_PLUS},{providerResultsKey:"googleplaces_search",platform:o.GOOGLE_PLACES},{providerResultsKey:"yelp_search",platform:o.YELP},{providerResultsKey:"youtube_search",platform:o.YOUTUBE},{providerResultsKey:"facebook_search",platform:o.FACEBOOK}];return e=e.data,_.reduce(t,function(t,a){var i=_.map(e[a.providerResultsKey],function(e){var t={platform:a.platform};return _.assign({},e,t)});return t.concat(i)},[])}function c(e){var t="platforms.0.general_info.site_title",a="platforms.0.general_info.short_description",i="platforms.0.contact_details.website",n="platforms.0.general_info.logo",r="platforms.0.general_info.cover_photo",o="platforms.0.photos_albums",s=[{fieldName:"Name",type:"text",value:_.get(e.data,t)},{fieldName:"Description",type:"text",value:_.get(e.data,a)},{fieldName:"Url",type:"link",value:_.get(e.data,i)},{fieldName:"Logo",type:"logo",value:_.get(e.data,n)},{fieldName:"Cover",type:"img",value:_.get(e.data,r)},{fieldName:"Photos",type:"images",value:_.get(e.data,o)}];return s=_.map(s,function(e){return _.includes(["logo","img"],e.type)?_.defaults(e,{value:"https://web.vmc3.com/projects/bufs/branch/coastguard/logos/NoLogo.jpg"}):_.defaults(e,{value:""})})}return{PLATFORMS:o,searchBusiness:function(t,a){var i={searchParams:t,platforms:a=a||_.values(o),esi:n};return e.post(r.PLATFORM_SEARCH,i).then(function(e){return e.data})},setSessionId:function(e){n=e},searchBusinessFlatten:function(t,a){_.isEmpty(a)&&(a=_.values(o));var i={searchParams:t,platforms:a};return e.post(r.PLATFORM_SEARCH,i).then(l)},analyzeBusinessByUrls:function(t){var a={urls:t,requestOrigin:"onboarding"};return e.post(r.GET_BUSINESS_INFO,a).then(c)},saveBusinessImagesToWixMedia:function(e){var i={tags:["_imported","_site_builder"],mediaType:"picture"},n=_.map(e,function(e){return _.assign({},i,{url:e})}),r=t.uploadPrivateImages(n);return a.all(r)},getExtendedBusinessData:function(t,a,i){var o={businessQuery:t,urls:a,requestOrigin:"onboarding",searchId:i,esi:n,onePlatformMode:s.platformsScreen||s.platformsScreenV2||s.platformsScreen3||s.platformsScreen4};return e.post(r.GET_BUSINESS_INFO,o).then(function(e){return _.find(e.data.platforms,function(e){return"unified_fields"===e.platform_name})})}}}e.$inject=["$http","wixMediaPlatform","$q","flags"],angular.module("adiIntroInternal").factory("wixWizIntegration",e)}(),function(e){var t=function(){function t(e,t){this.socialLinkManager=e,this.flags=t}return t.$inject=["socialLinkManager","flags"],t.prototype.parseExtendedData=function(e,t){return e?{name:_.get(e.general_info,"site_title.value"),generalInfo:this.parseGeneralInfo(e.general_info),contactDetails:this.parseContactDetails(e.contact_details),socialLinks:this.parseSocialLinks(e),reviews:this.parseReviews(e.reviews),media:{logos:this.parseLogos(_.get(e,"general_info.logos")),cover:{source:_.get(e,"general_info.cover_photo.source"),description:"",url:_.get(e,"general_info.cover_photo.value")},photos:this.parsePhotos(e,t)}}:{}},t.prototype.parseLogos=function(e){return e?e.map(function(e){return{source:e.source,description:"",url:e.value}}):[]},t.prototype.parseContactDetails=function(e){return e?{email:_.get(e,"email.value"),phone:_.get(e,"phone.value"),fax:_.get(e,"fax.value"),website:_.get(e,"website.value"),address:this.parseBusinessAddress(e.address),openingHours:this.parseOpeningHours(e.open_hours_new)}:{}},t.prototype.parseGeneralInfo=function(e){return{shortDescription:_.get(e,"short_description.value"),longDescription:_.get(e,"long_description.value"),missionStatement:_.get(e,"mission.value"),products:_.get(e,"products.value"),generalInfo:_.get(e,"general_info.value"),companyOverview:_.get(e,"company_overview.value"),bio:_.get(e,"bio.value"),publicTransport:_.get(e,"public_transport.value"),dateFounded:this.parseStartInfo(_.get(e,"start_info")),categories:this.parseCategories(_.get(e,"category"),_.get(e,"sub_category")),parking:this.parseParking(_.get(e,"parking"))}},t.prototype.parseStartInfo=function(e){if(!e||!e.value)return null;var t=e.value.date;return t?t.year&&t.month&&t.day?new Date(t.year,t.month-1,t.day):t.year&&t.month?new Date(t.year,t.month-1):t.year?new Date(t.year):null:null},t.prototype.filterCategories=function(e){var t=["community","local business","company","automotive","commercial & industrial","shopping/retail","point of interest","points of interest","food","establishment","social"];return _.uniq(_.filter(e,function(e){return!_.includes(t,e.toLowerCase())}))},t.prototype.extractCategories=function(e){return e&&e.value?e.source&&e.source.toLowerCase().startsWith("yelp")?[]:e.value.split(",").map(function(e){return e.trim()}):[]},t.prototype.parseParking=function(e){return e&&e.value?{lot:e.value.lot>0,street:e.value.street>0,valet:e.value.valet>0}:null},t.prototype.parseCategories=function(e,t){var a=this,i=this.extractCategories(e),n=t&&t.value?_.map(t.value,function(e){return _.get(e,"name")}):[];return i=_.map(i.concat(n),function(e){return a.normalizeCategory(e)}),_.take(this.filterCategories(i),3)},t.prototype.normalizeCategory=function(e){return _.upperFirst(e.replace(/_/g," "))},t.prototype.parseReviews=function(e){var t=Array.isArray(e)?e[0]:e;return t&&t.value?_.map(t.value,function(e){return{author:e.author_name,photoUrl:e.author_photo,message:e.text,datetime:new Date(e.time),rating:e.rating}}).filter(function(e){return e.rating>=4}):[]},t.prototype.parseBusinessAddress=function(e){return e?{fullAddress:_.get(e,"full_addr"),country:_.get(e,"country"),city:_.get(e,"city"),zipcode:_.get(e,"zipcode"),state:_.get(e,"state"),street:_.get(e,"street"),location:e.lat&&e.lng?{lat:e.lat,lng:e.lng}:null}:null},t.prototype.parseOpeningHours=function(e){var t=this;return e&&e.value&&e.value.days?_.map(e.value.days,function(e){return{day:t.parseWeekDay(e.day),from:t.parseHour(e.from_hour),to:t.parseHour(e.to_hour)}}):[]},t.prototype.parseHour=function(e){if(!e)return null;var t=e.trim().split(":"),a=t[0],i=t[1];return{hour:parseInt(a,10),minute:parseInt(i,10)}},t.prototype.parseWeekDay=function(t){if(!t)return null;switch((t=t.trim()).toLowerCase()){case"sun":return e.WeekDay.Sunday;case"mon":return e.WeekDay.Monday;case"tue":return e.WeekDay.Tuesday;case"wed":case"wen":return e.WeekDay.Wednesday;case"thu":return e.WeekDay.Thursday;case"fri":return e.WeekDay.Friday;case"sat":return e.WeekDay.Saturday}},t.prototype.parseSocialLinks=function(e){var t=e.social_links?_.cloneDeep(e.social_links):[],a=_.get(e,"official_website_data.social_links",[]);return t=t.concat(a),this.extractSocialLinks(t)},t.prototype.extractSocialLinks=function(e){var t=this,a=new Set;return _.reduce(e,function(e,i){if(i.url){var n=t.socialLinkManager.getPlatformNameByUrl(i.url);n&&!a.has(n)&&(e.push({platform:n,url:i.url}),a.add(n))}else t.flags.debug&&console.error("got social "+JSON.stringify(i)+" without a link field!");return e},[])},t.prototype.parsePhotos=function(e,t){var a,i;return void 0===t&&(t={parseWebsitePhotos:!0}),this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?(a=this.parseFacebookPhotos(e.photos_albums),i=t.parseWebsitePhotos?this.parseWebsitePhotos(_.get(e,"official_website_data.photos")):[]):(a=this.parseFacebookPhotos(e.photos_albums),i=this.parseWebsitePhotos(_.get(e,"official_website_data.photos"))),a.concat(i)},t.prototype.parseWebsitePhotos=function(e){return e&&0!==e.length?_.map(e,function(e){return{source:t.PhotoSourceWebsite,url:e.photo_url,description:e.description}}):[]},t.prototype.parseFacebookPhotos=function(e){if(!e||0===e.length)return[];var a=[];return _.forEach(e,function(e){_.forEach(e.value,function(e){a=a.concat(_.map(e.photos,function(e){return{source:t.PhotoSourceFacebook,url:e.photo_url,description:e.description}}))})}),a},t.PhotoSourceFacebook="facebook",t.PhotoSourceWebsite="website",t.PhotoSourceGoogle="Google",t}();e.WixWizDataParser=t,angular.module("adiIntroInternal").service("wixWizDataParser",t)}(A||(A={})),function(e){var t=function(){function e(e,t,a,i,n,r,o,s,l){this.wixWizIntegration=e,this.wixWizDataParser=t,this.mediaApi=a,this.introAdiIntegration=i,this.socialLinkManager=n,this.wixmpServices=r,this.$q=o,this.$timeout=s,this.wixMediaPlatform=l}return e.$inject=["wixWizIntegration","wixWizDataParser","mediaApi","introAdiIntegration","socialLinkManager","wixmpServices","$q","$timeout","wixMediaPlatform"],e.prototype.toSearchQuery=function(e){var t={name:e.name,email:e.contactDetails?e.contactDetails.email:"",phone:e.contactDetails?e.contactDetails.phone:"",category:e.category};return e.indifferentLocation?t.no_address=!0:e.ipBasedLocation||(t.address=e.userLocation),t},e.prototype.fromSearchResult=function(e){return{name:e.text,contactDetails:{phone:e.phone,email:e.email,fax:e.fax,address:{fullAddress:e.address?e.address.full_addr:""}},socialLinks:[{platform:this.socialLinkManager.PLATFORM_FACEBOOK,url:e.facebook},{platform:this.socialLinkManager.PLATFORM_GOOGLE_PLUS,url:e.googleplus},{platform:this.socialLinkManager.PLATFORM_TWITTER,url:e.twitter},{platform:this.socialLinkManager.PLATFORM_YELP,url:e.yelp}],media:{logos:[{description:"",url:e.image}]},urls:e.urls,nameSimilarityRank:+e.name_similarity_rank,distance:+e.distance}},e.prototype.search=function(e,t){var a=this;void 0===t&&(t=null);var i=this.toSearchQuery(e);return this.wixWizIntegration.searchBusiness(i,t).then(function(e){return{results:e.unified_search.map(function(e){return a.fromSearchResult(e)}),searchId:e.searchId}})},e.prototype.searchResult=function(e,t,a){var i=this;return this.wixWizIntegration.getExtendedBusinessData(e.name,e.urls,t).then(function(e){return i.wixWizDataParser.parseExtendedData(e,a)})},e.prototype.uploadMedia=function(e){var t=this;if(_.isEmpty(e))return this.$q.when({});var a=this.$q.defer(),i=this.saveBusinessImagesToWixMediaLoose(e),n=i.length,r=[];return i.map(function(e,i){return e.then(function(e){r[i]=t.introAdiIntegration.mediaGalleryAdapter.convertToMediaObject(e.data),--n||a.resolve(r)},function(e){return r[i]=null,--n||a.resolve(r),t.$q.when({})})}),a.promise},e.prototype.saveBusinessImagesToWixMediaLoose=function(e){var t={tags:["_imported","_site_builder"],mediaType:"picture"},a=_.map(e,function(e){return _.assign({},t,{url:e})});return this.wixMediaPlatform.uploadPrivateImages(a)},e.prototype.uploadMediaToFolder=function(e,t,a,i){if(_.isEmpty(t))return this.$q.when({});var n={name:(a||"My Business")+(i?" - "+i:""),urls:t};return this.mediaApi.upload(e,[n]).then(function(e){return!!e.folders&&!!e.folders[0]&&e.folders[0].id})},e.prototype.getMediasFromFolder=function(t,a,i){var n=this;void 0===i&&(i=0);var r=this.$q.defer();return this.wixmpServices.getImagesByFolderId(t).then(function(o){o.length===a.length||i>=e.MAX_DOWNLOAD_TRYS?r.resolve(o):n.$timeout(function(){n.getMediasFromFolder(t,a,++i).then(function(e){r.resolve(e)})},e.RETRY_DELAY_MS)}),r.promise},e.MAX_DOWNLOAD_TRYS=30,e.RETRY_DELAY_MS=500,e}();e.WixWizDataManager=t,angular.module("adiIntroInternal").service("wixWizDataManager",t)}(A||(A={}));var p=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};!function(e){var t=function(){function t(t,a,i,n,r,o,s,l,c,d,u,h,p,f){var g=this;this.$rootScope=t,this.applicationParameters=a,this.localStorageService=i,this.wixWizDataManager=n,this.flags=r,this.$q=o,this.validation=s,this.userService=l,this.userDetailsApi=c,this.$translate=d,this.introArguments=u,this.clientTopology=h,this.consumerBiLoggerHelpers=p,this.$timeout=f,this.isWixWizError=!1,this.fillIntroData=function(e){g.flags.emptyPage=e,g.data.category=g.data.category||{};var t=g.data.category.structureId=g.data.category.structureId||"40dc538a8a6c3e2dae342922",a=g.data.category.industryId=g.data.category.industryId||"e79e5765052b89b579c9a4c2";return g.data.name=g.data.name||"quickStory",g.$q.resolve({structureId:t,industryId:a,businessName:g.data.name})},this.getServiceOffersOrAppsRecommendationStep=function(){return!g.flags.appsRecommendation&&!g.flags.appsRecommendation2||g.flags.MED?e.INTRO_STATES.INTRO_SERVICES_OFFER:e.INTRO_STATES.INTRO_APPS_RECOMMENDATION},this.shouldTranslateVertical=function(){return g.flags.accommodationLocalization&&"accommodation"===g.getArgumentVertical()||g.flags.restaurantsLocalization&&"restaurants-food"===g.getArgumentVertical()},this.selectedOfferByType=function(e){return _.find(g.data.serviceOffer,{type:e})},this.getOldServiceOffersAvailable=function(){var e=function(e){return function(e){return e===AdiCoreSanta.TpaTypes.Chat}(e)};return _.filter(AdiCoreSanta.tpaConfigs,function(e){if(g.flags.oldBlog){if(e.type===AdiCoreSanta.TpaTypes.Blog2)return!1}else if(e.type===AdiCoreSanta.TpaTypes.Blog)return!1;return e.type!==AdiCoreSanta.TpaTypes.Members&&(e.type!==AdiCoreSanta.TpaTypes.PaidPlans&&(e.type!==AdiCoreSanta.TpaTypes.Forum&&AdiCoreSanta.isTpaOffered(e)))}).map(function(t){return{type:t.type,checked:e(t.type)}})},this.isServiceOfferChecked=function(e){var t=g.data.serviceOffer.find(function(t){return t.type===e});return t&&t.checked};var m=e.newPreSuggestionsByVertical;this.preSuggestionsByVertical=_.cloneDeep(m),this.hardcodedPreSuggestionsByVertical=_.cloneDeep(e.hardcodedSuggestionsByVertical),this.prepareGeneralCategories()}return t.$inject=["$rootScope","applicationParameters","localStorageService","wixWizDataManager","flags","$q","validation","userService","userDetailsApi","$translate","introArguments","clientTopology","consumerBiLoggerHelpers","$timeout"],t.prototype.prepareDataForBuilder=function(){this.data.name||(this.data.name=this.$translate.instant("intro.business-name.default")),this.data.contactDetails=this.data.contactDetails||{},this.validation.isWebsite(this.data.contactDetails.website)||(this.data.contactDetails.website=""),this.data.category||(this.data.category=_.clone(e.DEFAULT_CATEGORY)),this.data.socialLinks&&(this.data.socialLinks=this.data.socialLinks.filter(function(e){return!!e.url&&e.platform}))},t.prototype.hasCategorySearchArguments=function(){return this.flags.introRedirectToServiceOffer&&Boolean(this.introArguments.term&&this.introArguments.structureId&&this.introArguments.industryId)},t.prototype.useCategorySearchArguments=function(){this.data.category={term:this.introArguments.term,structureId:this.introArguments.structureId,industryId:this.introArguments.industryId,block:void 0,manualAliases:void 0}},t.prototype.getArgumentVertical=function(){return this.introArguments.vertical},t.prototype.translateGeneralCategories=function(){var t=this;for(var a in e.GENERAL_CATEGORIES)e.GENERAL_CATEGORIES.hasOwnProperty(a)&&e.GENERAL_CATEGORIES[a].forEach(function(e){e.key&&(e.term=t.$translate.instant("intro.general-categories.general."+e.key),delete e.key)})},t.prototype.getExampleText=function(e){return!this.flags.hardcodedIntroSuggestions||this.shouldTranslatePreSuggestions()?this.$translate.instant("intro.category-search.example-category."+e):e},t.prototype.resetSocialLinks=function(){this.data.socialLinks=[]},t.prototype.shouldTranslatePreSuggestions=function(){if(this.shouldTranslateVertical())return!0;switch(this.clientTopology.locale){case"nl":return this.flags.AdiDutchContentEnabled;case"it":return this.flags.AdiItalianContentEnabled;case"ko":return this.flags.AdiKoreanContentEnabled;case"pl":return this.flags.AdiPolishContentEnabled;case"sv":return this.flags.AdiSwedishContentEnabled;case"tr":return this.flags.AdiTurkishContentEnabled;case"cs":return this.flags.AdiCzechContentEnabled;case"da":return this.flags.AdiDanishContentEnabled;case"fi":return this.flags.AdiFinnishContentEnabled;case"hi":return this.flags.AdiHindiContentEnabled;case"no":return this.flags.AdiNorwegianContentEnabled;case"th":return this.flags.AdiThaiContentEnabled;case"uk":return this.flags.AdiUkranianContentEnabled;case"zh":return this.flags.AdiChineseTradContentEnabled;default:return!1}},t.prototype.prepareGeneralCategories=function(){var t=this;(!this.flags.hardcodedIntroSuggestions||this.flags.hardcodedIntroSuggestions&&this.shouldTranslatePreSuggestions())&&this.translateGeneralCategories(),this.generalCategories=_.cloneDeep(e.GENERAL_CATEGORIES),_.each(e.generalCategoriesByFlag,function(e,a){t.flags[a]&&_.assign(t.generalCategories,_.cloneDeep(e))})},t.prototype.hasIntroData=function(){return this.data&&this.data.category&&null!==this.data.category.industryId&&null!==this.data.category.structureId},t.prototype.setDefaultBIValues=function(){this.hasIntroData()&&(this.consumerBiLoggerHelpers.setDefaultValue("industryId",this.data.category.industryId),this.consumerBiLoggerHelpers.setDefaultValue("structureId",this.data.category.structureId))},t.prototype.fillMissingData=function(){this.flags.appsRecommendation2?this.data.category&&this.data.category.industryId&&this.data.category.structureId||(this.data.category=_.clone(e.DEFAULT_CATEGORY)):this.data.category||(this.data.category=_.clone(e.DEFAULT_CATEGORY))},t.prototype.init=function(e){var a,i=this;this.flags.oldBlog||e!==AdiCoreSanta.TpaTypes.Blog||(e=AdiCoreSanta.TpaTypes.Blog2),this.vertical=e,this.data=this.data||this.createBaseData(),a=this.localStorageService.get(t.INTRO_STORAGE_KEY),this.setDefaultBIValues(),a&&this.isStorageInvalid(a)?this.localStorageService.remove(t.INTRO_STORAGE_KEY):a&&(a.dates&&(a.dates=a.dates.map(function(e){return e?new Date(e):e})),angular.extend(this.data,a));var n=this.selectedOfferByType(this.vertical);n&&(n.checked=!0),this.introDataWatch||(this.introDataWatch=this.$rootScope.$watch(function(){return i.data},function(){return i.localStorageService.set(t.INTRO_STORAGE_KEY,i.data)},!0)),this.data.videoStructure=void 0},t.prototype.isStorageInvalid=function(e){var a=this.flags.oldBlog?AdiCoreSanta.TpaTypes.Blog2:AdiCoreSanta.TpaTypes.Blog;if(_.find(e.serviceOffer,function(e){return e.type===a}))return!0;var i=this.data.uuid&&e.uuid&&this.data.uuid!==e.uuid,n=this.data.createdOn&&e.createdOn?this.data.createdOn-e.createdOn:0;return i||n/1e3/60/60/24>=t.INTRO_STORAGE_EXPIRY_DAYS},t.prototype.reset=function(){this.data={},this.localStorageService.remove(t.INTRO_STORAGE_KEY),this.introDataWatch&&(this.introDataWatch(),this.introDataWatch=null)},t.prototype.getStoryId=function(){return this.data.storyId},t.prototype.setStoryId=function(e){this.data.storyId=e},Object.defineProperty(t.prototype,"siteProperties",{get:function(){var e=this.getLogo(),t=this.flags.postalAddress&&_.get(this.data,"contactDetails.address.location.lat"),a=this.flags.postalAddress&&_.get(this.data,"contactDetails.address.location.lng"),i={email:this.data.contactDetails&&this.data.contactDetails.email?this.data.contactDetails.email:"",fax:this.data.contactDetails&&this.data.contactDetails.fax?this.data.contactDetails.fax:"",phone:this.data.contactDetails&&this.data.contactDetails.phone?this.data.contactDetails.phone:"",logo:e&&e.data?e.data.relativeUri:"",name:this.data.name?this.data.name:"",address:{street:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.street?this.data.contactDetails.address.street:"",city:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.city?this.data.contactDetails.address.city:"",state:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.state?this.data.contactDetails.address.state:"",country:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.country?this.data.contactDetails.address.country:"",zip:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.zipcode?this.data.contactDetails.address.zipcode:"",geoCoordinates:t&&a?{lat:t,lng:a}:null}};return _.merge(i.address,this.getAddressForSiteProperties()),i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logoDimensions",{get:function(){var e=this.getLogo();return{width:_.get(e,"data.width",0),height:_.get(e,"data.height",0)}},enumerable:!0,configurable:!0}),t.prototype.resetMedia=function(){this.data.media={},this.initMedia()},t.prototype.initMedia=function(){if(this.data.media=this.data.media||{},!this.data.media.logos){this.data.media.logos=[{}]}(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&(this.data.media.photos||(this.data.media.photos=[]),this.data.media.cover||(this.data.media.cover={}))},t.prototype.hasMedia=function(){var e=this.data.media;return e&&(e.logos.length>0&&e.logos[0].url||e.photos&&e.photos.length>0||e.cover&&e.cover.url)},t.prototype.getAddressForSiteProperties=function(){var e=this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.fullAddress,t=this.hasAddress&&this.data.userLocation.formatted_address;return this.hasAddress&&this.getFullAddress(this.data.userLocation)===e?{googleFormattedAddress:t}:{fullAddress:e}},t.prototype.createBaseData=function(){return{name:"",uuid:this.userService.getUUID(),createdOn:(new Date).getTime(),socialLinks:[],serviceOffer:!this.flags.appsRecommendation&&!this.flags.appsRecommendation2||this.flags.MED?this.getOldServiceOffersAvailable():[],dates:[],lastSearchedTerm:"",validCategory:!1,shouldLoadAppsRecommendation:!0,isAppsLoading:!0}},t.prototype.addressShouldBecomeMultiline=function(e){if(e.formatted_address.length<=25)return!1;var t=Array.prototype.concat.apply([],e.address_components.map(function(e){return e.types}));return!(_.difference(["street_number","route","locality"],t).length>0)&&(e.address_components&&e.address_components.length>1)},t.prototype.formatMultiLineAddress=function(e){var t={num:"street_number",street:"route",city:"locality",state:"administrative_area_level_2",country:"country",zip:"postal_code"},a=["num"," ","street","\n","city",", ","state"," ","zip","\n","country"],i=_.map(a,function(a){if("\n, ".indexOf(a)>-1)return a;var i=_.find(e,function(e){return e.types.indexOf(t[a])>-1});return i?i["country"===a?"long_name":"short_name"]:" "});return"United States"===i[a.indexOf("country")]?i[a.indexOf("country")]="USA":i[a.indexOf("state")]="",i.join("")},t.prototype.cleanAddress=function(e){return e.split("\n").filter(function(e){return""!==e.replace(/,/g,"").trim()}).map(function(e){return e.trim().replace(/\s+/g," ")}).join("\n")},t.prototype.getFullAddress=function(e){var t;return t=this.addressShouldBecomeMultiline(e)?this.formatMultiLineAddress(e.address_components):e.formatted_address,this.cleanAddress(t)},t.prototype.setAddress=function(e){var t={};e&&e.geometry&&(t.location={lat:e.geometry.location.lat,lng:e.geometry.location.lng}),e&&e.formatted_address&&(t.fullAddress=this.getFullAddress(e)),this.data.contactDetails||(this.data.contactDetails={}),this.data.contactDetails.address=t},t.prototype.merge=function(e){_.assign(this.data,e)},t.prototype.mergeSearchResult=function(e){_.assign(this.data,this.data.searchResults[e])},t.prototype.searchUsers=function(){var e=this;this.startWixWizAction();var t=this.wixWizDataManager.search(this.data).then(function(t){e.data.searchResults=t.results,e.wixWizSearchId=t.searchId});return this.handleWixWizResponse(t,!0)},t.prototype.getExtendedUser=function(e,t){var a=this;this.startWixWizAction();var i=this.wixWizDataManager.searchResult(e,this.wixWizSearchId,t).then(function(t){if(a.flags.platformsScreen||a.flags.platformsScreenV2||a.flags.platformsScreen3||a.flags.platformsScreen4?(t.contactDetails&&a.data.contactDetails&&a.data.contactDetails.website&&(t.contactDetails.website=a.data.contactDetails.website),_.assign(a.data,t,{searchUrls:e.urls,name:a.data.name})):_.assign(a.data,t,{searchUrls:e.urls}),a.createSelectedBusinessCard(),!a.data.contactDetails.email)return a.userDetailsApi.getUserDetails().then(function(e){a.data.contactDetails.email=e.email})});return this.handleWixWizResponse(i)},t.prototype.createSelectedBusinessCard=function(){this.data.selectedBussinessCard={name:this.data.name,media:{logos:this.data.media.logos},contactDetails:p({},this.data.contactDetails),socialLinks:this.data.socialLinks}},Object.defineProperty(t.prototype,"hasAddress",{get:function(){return this.data.userLocation&&"object"==typeof this.data.userLocation},enumerable:!0,configurable:!0}),t.prototype.getCategoryNoError=function(){return this.data.category?this.data.category:_.clone(e.DEFAULT_CATEGORY)},t.prototype.getLod=function(){if(!this.hasAddress)return null;var e,t=this.data.userLocation;if(t&&t.address_components.length>0){var a=t.address_components[0].types[0];"locality"===a||"premise"===a?e="city":"street_number"===a?e="streetNum":a.indexOf("administrative_area_level")>=0?e="state":"country"===a?e="country":"route"===a&&(e="street")}return e},t.prototype.getBusinessCategoryResultByTerm=function(e){var t=_.findKey(i.BusinessCategoryIds,function(t){return t.indexOf(e)>-1});if(t){var a=t.split("|"),n=a[0],r=a[1];return{term:e,structureId:r,industryId:n}}},t.prototype.startWixWizAction=function(){this.isWixWizError=!1},t.prototype.handleWixWizResponse=function(e,t){var a=this;return void 0===t&&(t=!1),e.catch(function(){t&&(a.data.searchResults=[]),a.isWixWizError=!0})},t.prototype.getNumberOfSocialLinks=function(){return this.data.socialLinks.map(function(e){return!_.isEmpty(e.url)}).length},t.prototype.isSocialLinksExists=function(){var e=!1;return _.isArray(this.data.socialLinks)&&this.data.socialLinks.forEach(function(t){if(!_.isEmpty(t.url))return e=!0,!1}),e},t.prototype.isTaglineExist=function(){return _.get(this.data,"extra.tagline")},t.prototype.isLogoExists=function(){return!!_.get(this.getLogo(),"url")&&!!_.get(this.data,"media.displayLogo")},t.prototype.isBusinessTagLineExists=function(){return _.get(this.data,"generalInfo.categories.length")>0},t.prototype.isEmailExists=function(){return!!_.get(this.data,"contactDetails.email")},t.prototype.isPhoneExists=function(){return!!_.get(this.data,"contactDetails.phone")},t.prototype.isFaxExists=function(){return!!_.get(this.data,"contactDetails.fax")},t.prototype.isAddressExists=function(){return!!_.get(this.data,"contactDetails.address.fullAddress")},t.prototype.website=function(){return _.get(this.data,"contactDetails.website")},t.prototype.isWebSiteExists=function(){return!!_.get(this.data,"contactDetails.website")},t.prototype.getPlatforms=function(){var e=this.getMedia().filter(function(e){return!!e.legalSource}).reduce(function(e,t){var a;return p({},e,((a={})[t.legalSource]=null,a))},{});return Object.keys(e)},t.prototype.getPlatformUrl=function(e){if("website"===e)return this.getSiteName();var t=this.data.socialLinks&&this.data.socialLinks.find(function(t){return t.platform===e});return t?t.url:e},t.prototype.getMedia=function(){return this.data.media?this.data.media.photos.concat(this.data.media.logos,[this.data.media.cover]).filter(function(e){return!(!e||!e.url)}):[]},t.prototype.isPlatformChecked=function(e){return this.getAllMediaBySource(e,!0).length>0},t.prototype.getAllMediaBySource=function(e,t){return void 0===t&&(t=null),this.getMedia().filter(function(a){return a.legalSource===e&&(null===t||a.userVerified===t)})},t.prototype.buildPlatformToImagesDic=function(){var e=this.getMedia(),t=e.filter(function(e){return!!e.legalSource}).reduce(function(e,t){var a;return p({},e,((a={})[t.legalSource]=null,a))},{});return this.getPlatforms().forEach(function(a){t[a]=e.filter(function(e){return e.legalSource===a})}),t},t.prototype.updateMediaByDiffs=function(e){this.getMedia().forEach(function(t){"boolean"==typeof e[t.url]&&(t.userVerified=e[t.url])})},t.prototype.addLegalSources=function(){this.getMedia().forEach(function(e){e.source&&(e.legalSource=e.source.replace("_onboarding",""),"google_places"===e.source&&(e.legalSource="Google Places"))})},t.prototype.markAllMediaAsVerified=function(){this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.changeMediaVerificationStatus(!0):this.data&&this.data.media&&(this.data.media.photos&&this.data.media.photos.forEach(function(e){return e.userVerified=!0}),this.data.media.logos&&this.data.media.logos.forEach(function(e){return e.userVerified=!0}),this.data.media.cover&&(this.data.media.cover.userVerified=!0))},t.prototype.changeMediaVerificationStatus=function(e){this.data&&this.data.media&&(this.data.media.photos&&this.data.media.photos.forEach(function(t){return t.userVerified=e}),this.data.media.logos&&this.data.media.logos.forEach(function(t){return t.userVerified=e}),this.data.media.cover&&(this.data.media.cover.userVerified=e))},t.prototype.isNeedToImport=function(t){return t[e.BusinessPlatform.YoutubeChannel]||t[e.BusinessPlatform.ExistingWebsite]||t[e.BusinessPlatform.Facebook]||t[e.BusinessPlatform.Google]},t.prototype.isImportedUrls=function(e){return this.isNeedToImport(e)},t.prototype.getPlatformsData=function(){var t,a=this.data.platforms||{},i=((t={})[e.BusinessPlatform.Facebook]="",t[e.BusinessPlatform.ExistingWebsite]="",t[e.BusinessPlatform.YoutubeChannel]="",t[e.BusinessPlatform.Google]="",t);return Object.keys(a).forEach(function(t){var n=a[t].isChecked,r=a[t].isError,o=a[t].isDisplayed;n&&!r&&!1!==o&&(t===e.BusinessPlatform.ExistingWebsite||t===e.BusinessPlatform.YoutubeChannel||t===e.BusinessPlatform.Facebook?i[t]=a[t].value:t===e.BusinessPlatform.Google&&(i[t]=a[t].url))}),i},t.prototype.shouldImportWebsiteWhenImportFacebook=function(){var t=this.data.platforms[e.BusinessPlatform.Facebook];return t&&t.isChecked&&!t.isError},t.prototype.shouldImportPlatform=function(e){var t=this.data.platforms[e];return t&&t.isChecked&&!t.isError},t.prototype.handleIncomingMedia=function(){this.deleteDuplicateMedia(),this.addLegalSources(),this.markAllMediaAsVerified()},t.prototype.deleteDuplicateMedia=function(){var e=this.data.media;e.photos&&(e.photos=this.createDistinctArrayOfPhotos(e.photos)),e.logos&&(e.logos=this.createDistinctArrayOfPhotos(e.logos));var t=(e.logos||[]).concat([e.cover||{}]);e.photos=e.photos.filter(function(e){return!t.some(function(t){return t.url===e.url})})},t.prototype.createDistinctArrayOfPhotos=function(e){if(!Array.isArray(e))return e;var t={};return e.filter(function(e){var a=t[e.url];return t[e.url]=!0,!a})},t.prototype.getSiteName=function(){return this.data&&this.data.contactDetails&&this.data.contactDetails.website},t.prototype.getLogo=function(e){var t=e||this.data.media;return t&&t.logos&&t.logos.find(function(e){return e.userVerified})},t.prototype.changeAllMediaVerification=function(e,t){var a=(t?this.getAllMediaBySource(t):this.getMedia()).filter(function(t){return t.userVerified!==e}).reduce(function(t,a){var i;return p({},t,((i={})[a.url]=e,i))},{});this.updateMediaByDiffs(a)},t.prototype.buildSourcesString=function(e){var t="",a=e.some(function(e){return"website"===e.toLocaleLowerCase()}),i=e.some(function(e){return"facebook"===e.toLocaleLowerCase()}),n=e.some(function(e){return"google places"===e.toLocaleLowerCase()});return a&&(t+=this.$translate.instant("intro.import-site-legal.website")),i&&(a&&n&&(t+=", "),a&&!n&&(t+=" "+this.$translate.instant("intro.import-site-legal.and")+" "),t+=this.$translate.instant("intro.import-site-legal.facebook")),n&&((i||a)&&(t+=" "+this.$translate.instant("intro.import-site-legal.and")+" "),t+=this.$translate.instant("intro.import-site-legal.google")),t},t.INTRO_STORAGE_KEY="introData",t.INTRO_STORAGE_EXPIRY_DAYS=2,t}();e.IntroManager=t,angular.module("adiIntroInternal").service("introManager",t)}(A||(A={}));var f,g=function(){function e(e){var t=this;this.grecaptcha=e,e.then(function(e){t.captcha=e})}return e.$inject=["grecaptcha"],e.prototype.getResponse=function(){return!!this.captcha&&this.captcha.getResponse()},e.prototype.create=function(e,t,a){this.grecaptcha.then(function(i){i.render("recaptcha-widget",{sitekey:"6LdtOAwTAAAAACLjEoxRBtqtm0RccjIFsLRrq6Wg",theme:"light",callback:e,"expired-callback":t,"error-callback":a})})},e.prototype.reload=function(){this.grecaptcha.then(function(e){e.reset()})},e.prototype.recaptchaParams=function(){return{recaptcha_response_field:this.getResponse()}},e}();angular.module("adiIntroInternal").service("captcha",g).factory("grecaptcha",["$q","$window",function(e,t){var a=e.defer();return t.onLoadRecaptchaCallback=function(){a.resolve(t.grecaptcha)},t.grecaptcha&&t.grecaptcha.render&&a.resolve(t.grecaptcha),a.promise}]),function(e){var t=function(){function t(e,a,i,n,r,o,s,l,c,d,u,h,p){var f=this;this.$state=a,this.$q=i,this.$log=n,this.introAnimationData=r,this.IntroAnimationElement=o,this.FakeIntroAnimationElement=s,this.introWindow=l,this.introAnimationAdapter=c,this.introEventsEmitter=d,this.introManager=u,this.$window=h,this.flags=p,this.disposable={},this.isFirstTime=function(){return!f.lastAction},this.next=this.stateAction("next"),this.skip=this.stateAction("skip"),this.back=this.stateAction("back"),this.wait=function(){return f.hideContent().then(function(){return f.playAnimation("wait")})},this.showContent=function(){return f.contentElement?f.contentElement.show():f.$q.when()},this.onResize=_.debounce(function(){var e=f.$state.current.name;if(f.introAnimationData[e]){var t=f.introWindow.getAnimationBoxDimensions(f.currentContentHeight);f.$q.all([f.hideContent(),f.introAnimationAdapter.resize(t)]).then(function(){f.backdropBoxPosition=t,f.contentBoxPosition=f.introWindow.getContentPosition(f.backdropBoxPosition,f.currentContentHeight),f.showContent(),angular.element(f.$window).trigger("resize")})}},t.RESIZE_DEBOUNCE),this.previousState=a.current.name,this.beforeStateChangeWatcher=e.$on("$stateChangeStart",function(e,t,a,i){return f.beforeStateChanged(e,t.name,i.name)}),this.afterStateChangeWatcher=e.$on("$stateChangeSuccess",function(e,t,a,i){return f.afterStateChanged(t.name,i.name)})}return t.$inject=["$rootScope","$state","$q","$log","introAnimationData","IntroAnimationElement","FakeIntroAnimationElement","introWindow","introAnimationAdapter","introEventsEmitter","introManager","$window","flags"],t.prototype.init=function(e,t,a){var i=this,n=this.flags.MED?this.FakeIntroAnimationElement:this.IntroAnimationElement;this.contentElement=n(t),this.animationElement=n(e),this.loadingElement=n(a);var r=this.$state.current.name;return this.introAnimationData[r]&&(this.currentContentHeight=this.introAnimationData[r].contentHeight,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)),this.introAnimationAdapter.init(e,this.backdropBoxPosition).then(function(){return i.showContent()})},t.prototype.dispose=function(){this.beforeStateChangeWatcher&&this.beforeStateChangeWatcher(),this.afterStateChangeWatcher&&this.afterStateChangeWatcher(),this.disposable={},this.contentElement=null,this.animationElement=null,this.introAnimationAdapter.dispose()},t.prototype.stateAction=function(t){var a=this;return function(i){a.lastUserAction=t,i===e.INTRO_FINISHED?(a.lastAction="next",a.notifyStateChanged(a.$state.current.name,e.INTRO_FINISHED,"before")):a.$state.go(i)}},t.prototype.browserBack=function(){this.$window.history.back()},t.prototype.hideContent=function(e){if(!this.contentElement||this.contentElement.hidden)return this.$q.when();var t=[this.contentElement.hide()];return e&&t.push(this.animationElement.hide()),this.$q.all(t)},t.prototype.showBackdrop=function(){return this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.introAnimationAdapter.play("next",this.backdropBoxPosition)},t.prototype.scale=function(e){return this.currentContentHeight=e,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight),this.introAnimationAdapter.scale(this.backdropBoxPosition)},t.prototype.isIntroState=function(t){return t&&t.startsWith(e.INTRO_STATES.INTRO)},t.prototype.beforeStateChanged=function(e,t,a){this.isIntroState(a)&&this.isIntroState(t)&&(this.lastAction=this.lastUserAction||this.guessAnimation(t,a),this.notifyStateChanged(a,t,"before"),this.lastUserAction=null)},t.prototype.afterStateChanged=function(t,a){var i=this;if(this.previousState=a,this.isIntroState(a))if(this.isIntroState(t)){var n=void 0;this.introAnimationData[t]?(this.currentContentHeight=this.introAnimationData[t].contentHeight,n=this.playAnimation(this.guessAnimation(t,a),t)):(this.currentContentHeight=null,n=this.playAnimation("blank")),(n=n||this.$q.when()).then(function(){return i.showContent()}).then(function(){return i.notifyStateChanged(a,t,"after")})}else this.notifyStateChanged(a,e.INTRO_FINISHED,"after")},t.prototype.notifyStateChanged=function(t,a,i){var n,r=this.introManager.data,o=this.lastAction;switch(t){case e.INTRO_STATES.INTRO:break;case e.INTRO_STATES.INTRO_CATEGORY_SEARCH:n={name:t,category:r.category};break;case e.INTRO_STATES.INTRO_BLOCKED_CATEGORY:case e.INTRO_STATES.INTRO_SERVICES_OFFER:case e.INTRO_STATES.INTRO_APPS_RECOMMENDATION:case e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT:case e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS:break;case e.INTRO_STATES.INTRO_BUSINESS_NAME:n={name:t,businessName:r.name};break;case e.INTRO_STATES.INTRO_BUSINESS_LOCATION:n={name:t,hasAddress:this.introManager.hasAddress,userLocation:r.userLocation,ipBasedLocation:r.ipBasedLocation,indifferentLocation:r.indifferentLocation};break;case e.INTRO_STATES.INTRO_BUSINESS_DATES:n={name:t,dates:this.introManager.data.dates};break;case e.INTRO_STATES.INTRO_EVENT_DETAILS:case e.INTRO_STATES.INTRO_SEARCH_CONFIRM:case e.INTRO_STATES.INTRO_SELECT_USER:case e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM:case e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL:case e.INTRO_STATES.INTRO_IMAGES_SELECTION:case e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL:break;case e.INTRO_STATES.INTRO_EDIT_USER:n={name:t};break;case e.INTRO_STATES.INTRO_RECAPTCHA:break;default:this.$log.error('Intro: state changed from unknown state: "'+t+'"')}n&&this.introEventsEmitter.notifyStepChange(n,a,o,i)},t.prototype.guessAnimation=function(e,t){var a=Object.keys(this.introAnimationData);return!this.introAnimationData[t]||a.indexOf(e)<a.indexOf(t)?"back":"back"===this.lastAction?"next":this.lastAction?this.lastAction:"next"},t.prototype.guessLastNavigation=function(e,t){void 0===e&&(e=this.$state.current.name),void 0===t&&(t=this.previousState);var a=this.$state.get().map(function(e){return e.name}).filter(function(e){return e});return-1===a.indexOf(t)?"next":a.indexOf(e)<a.indexOf(t)?"back":a.indexOf(e)>a.indexOf(t)?"next":void 0},t.prototype.playAnimation=function(e,t){return t?(this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)):(this.backdropBoxPosition=null,this.contentBoxPosition=null),this.introAnimationAdapter.play(e,this.backdropBoxPosition)},t.RESIZE_DEBOUNCE=500,t}();e.IntroStep=t,angular.module("adiIntroInternal").service("introStep",t)}(A||(A={})),function(e){e.CategoryTypes={SingleEvent:"singleEvent",Photographer:"photographer",WixVideo:"wixVideo"};var t=function(){function t(t,a){var i,n,r=this;this.flags=t,this.miscUtils=a,this.PHOTOGRAPHER_STRUCTURE_IDS=["fa28a6f03dbe530a8a8c6fcc","c280f2565940817f4edc48fe","70d8036f281d1ce612272b6a","cba925039ed9d3d360590d31","f1b75b7b719f5ed5b5bdc41f","fc57b1629c4ff302fb03e79c","228113fd238f42db1cf7160a","c5c1f3c63915119ed5c7feff","4c41f36c745880e6e42c5838","b5ab898f0afbfec00845808e","54004a861a39c4a3eb57d114","6faf46a50ee4aa0fff4e1135","02b40f8270007a792c300561","481a36b3eeb98dbfc2f904a6","94d4b55ce16bd162b833e148","88337e3560e889b475d492a7","0f04c68cffed335f82caabfa","3278ba04c3340b40d058ed5f","f764b4a56aca6b9f42c3ec3a","0fdf8f7c1fd0fb710ecb8826","320bc14e388b60c6ab499242","9b888a944e35417b0916e075","be6f1d8dc988d56f886ed440","137221e480f86fbd3c80436a","afee35922f1083c84a62b114","87de0335f09ebc252139974c","7d9f2f2d93d10adfb06b97f8","0d9c96444715ddf86b7dae9c"],this.SINGLE_EVENT_STRUCTURE_IDS=["86614cf07e4b4b958c17799e","53ccd6d3ed28056652523bf8","4115b4b3648e14a3d30fc868","d0a23df9f1f222e74ee14792","8ad09c40cd032d6f157c3061","8f92fe0b3e5ac39b968ed30a","66ab3cd9ab82187cba6d438a","3118118a1e2e5ef4539a51f3","64019cca29a74c24d67ceb8e","2634908fb29b65cc063198ae","59922f2d4d214b6def6bdb1c","93762d8e11ff81ded43e0d01","a1b4f8164a1a626a7eab7242","2b2732a277096b81176a53e0","039e2da6322d72456c116493","2597ed3258e7803bf2df1d3a","befcaf30ac3c975eff7c8018","9f963f4ae9923320f3d0df74","d24103ac38dad574c915c6d4","6366bb29a125a48254d64d8f","c3315453c35066966a2a2b6e","3edc74db8e5c9df30f410797","ff34af892529b6245eee17ef","1ab0758e82c7e024d6bc00fb","82e7dd0419f621c370d802cd","2ccd9638ebbeffef7087609f","96752dbe194b85d9648d5b49","661faae4694aff347897a3c6","72e1e5106f07cecc6118594d","b22365fd4a66364e95602d70","54fb3d4c6778370d1f891ab8","7f46632f92b9f8f5c1afa658","5bc45e059dd89e0014102a50"],this.BUSINESS_NAME_TITLES=((i={DEFAULT:"input-label"})[e.CategoryTypes.SingleEvent]="label-singleEvent",i["0d5622380c498d071bbef24d"]="label-artist",i["082f23d3239e001fa382569e"]="label-artistOrBand",i.fc78cd8fe36ec98750f48598="label-artistOrBand",i["17117225096faf1aeb06cf43"]="label-artistOrBand",i["85ce4978795e86d267591938"]="label-artistOrBand",i.bd3e888b9611b0defe9346f5="label-band",i["25cee88a72dcbb6573f2d4b4"]="label-band",i.ab472419552a627ae17a6248="label-band",i.e5dda168311d4b74264a0c24="label-band2",i.b0a520919b99728bae200018="label-blogWebsite",i["78dd91ce2f03d612f7d21d67"]="label-business",i["56457787d0958454ae07ba9d"]="label-business",i.ef0e83f2dd3e5f2de57ed162="label-business",i["4dafcb6d45599002d5ca8c73"]="label-business",i["548727a6f23ccfaa7480dab6"]="label-business",i.e34f3d3221e0000ef9c482be="label-business",i.ddcf01985bb895180fddde3b="label-business",i.e7c71df1ba825a34be9150a7="label-business",i.f5feb80464366af988623685="label-business",i.a28c5e5ea1945e5fa4ca1728="label-business",i.ede0e37e9de8c82c420ad0b5="label-business",i["2722ab4c0feb9fa6fdcc1c6b"]="label-business",i["7bd6f744207891da991c722b"]="label-business",i.e5aec35bbc5fc88b438724cf="label-business",i.fa6f57e9df0b2c3dfa39cce9="label-business",i["0d9c96444715ddf86b7dae9c"]="label-business",i["6796cebe34d21cca1400d748"]="label-business",i["21c70c386045175cb342045a"]="label-business",i.e67d552f50a50029ed406a50="label-business",i["494592c679c0d50b9d48a03e"]="label-business",i.a8c41ae5ef3d8694abd189b1="label-business",i["02c27dfb52b10a2442c8b9db"]="label-choir",i["7de435a5405481f73e84a8cd"]="label-fullname",i.ca997711954ac38e4c80b6cb="label-stagename",i),this.STRUCTURE_TO_BUSINESS={singleEvent:[e.CategoryTypes.SingleEvent],app:["a3bc0d2c8be51ba4395663ce"],band:["bd3e888b9611b0defe9346f5","e5dda168311d4b74264a0c24","25cee88a72dcbb6573f2d4b4","ab472419552a627ae17a6248"],blog:["77cb9f8b7e6e46e77384199b","b0a520919b99728bae200018"],businessName:["50ce6fbf481e5e0cccc7ed89","d87632e3733a0aa8ead89d05","5bc6cb099dd89e0014103472"],camp:["c198cf0a69f990711dedbb72"],campaign:["8c849036505ad1a42415d2f3"],choir:["f10ec8dfac2ed66d6a59cdf7","02c27dfb52b10a2442c8b9db"],church:["922e5a46f75131f488c29ae7"],courseOrProgram:["7c8deffd2f91974fb022c750"],ebookOrGuide:["d54abdcb7a026264d6f1b7df"],hotelOrResort:["ac8eb72e03a52e533dd93cac"],pageLanding:["12aa19bcaf4a2cec85fb2e47","0d2fbf421f7673baae61d226","61291f908427a61d9cee17e2","bf61b613f48c3e7af17cfc6c"],forum:["8717f1daa024f434ed295673","8b962698a8dfa6f9faffc4ec","450b418794e55522ecef192f","76794a3aba43f3872dc8fffd","0855de4d0a97a5752af4e473","285464d6cfe58c1da79dc3dd","651a170e34c51ad39d3828d4","c968b17eec602fcaf3708626","a54aaf2db10cde454eaf9011","10dbef4c977a1c479800cc9b","f991f68c01e16d9ad399915a","a44476b0620ea8dbfd9de4d3"],onlineStore:["ff00aaba40bcd8404c7c15c2","503eb1485f6d9be61cd7440e","34ffe449f805db7d9bb44c51","920d6d4e861dfb385da1016c","f07829409b6a57fced0e0e13","2641c344379a9aaa8eaab7b2","bb605aa1b1a1e21608c1aa50","073bd83d054dcff87fa0ef50","55ac5d9bf289db056e9ca2df","a86dc9747f3eede342189f83","dddf5389b593c624fe904f35","3ca1657afcf3c6962bd3850c","74c54b103c2f81a197292f3e"],org:["71d5225057ea7e43de52d30e","f7c409d2f51080ca1c82c9bc","aca062867d6d1805936edae4","dc92558c4b6d316b91a1c493","b210b17710469fe4b058d148","05791086db1a3fa89a4e8f50","f400fd6ffe378e8bc3062279","3b0c5d7beaa4220e2a870058","5bfd92ea0261ae001af5b477"],publication:["9cb832ab093c3f328f6be318"],radioShowStation:["769eacfcf310ae96103cd210"],school:["5c04eacf713683001a74630f","1562632a80c046496ec2aa96","a6c3bb770913907cae153274","ae9e8b38d6271d38e4ff7314","99efa813813978f03b9becf1","e2fd2d9cc8af6d3d2c79deb5","d92c36de57e30d8ba567d7de","16f33903e614854d62828658"],site:["dfbbb078a5a20019a393bcf6"],store:["a82c47ec07116f80d61defc2","0bc120ad2fe7e18f6cf0c8f3","431720e6e1e65930d6bbbcc3","78ca987ffcc56b3700ad1c4f","363531a28861adcbe9be3cf5","08315294c271eec98e3b1f41","76746b93113b9a86b26edbd3","26797e2a402eceb6ed2dd055","e6a70a5eb742350b0e357819","ce60cecd67422e0eef44b7df","77579abf69b1c6bd6726be48","fdb83cb137cb4ce03bd8d6f6","e1a2f009d01ba711cb49a6cb","e6bd3dc3eea5928b0ea7fd47","fe2330231227b5623bae10bd","5344b9f2a0058d3be498d9d4","654f7124a6922f34e284a943","7fa9b9d0c589fb130a92a894","41d91b03c3189cf19af970e9","73047226bf3c3a5838618cdf","fba0772e6230b75df865dbdc","49d4118fe9dc7312ae1cc1fc"],studio:["fa28a6f03dbe530a8a8c6fcc","87de0335f09ebc252139974c","320bc14e388b60c6ab499242","6faf46a50ee4aa0fff4e1135","4c41f36c745880e6e42c5838","afee35922f1083c84a62b114","ecd6a21fcbc019a9494ee6e0","f764b4a56aca6b9f42c3ec3a","481a36b3eeb98dbfc2f904a6","7e9cb49af16330627a3c98fd"],synagogue:["cb2baf53ff2160c01b7fd228"],team:["1f99c4bfc193f67a2c4d74eb","9d7a187691adf3ea2fefbf80","5bfd52ae0261ae001af5ae3c"],venue:["e2ec72029e09222967a1659f","8a8d28d9672978b2cc97193a","06a674427f1cecccc05833a1","0f7c347c572d378953676a79","09e33ad16c590a079d737a41"],zooOrPark:["e91dcc2ca66d2f7209558e4e"],show:["55013828beab5141973a7cc9","80d00214ce990e12d9174584"],filmOrVideo:["17117225096faf1aeb06cf43"],project:["f1fde97406b2fa4d5c413226","c8bef80cfea853a15d6562a6"],fullOrStagename:["c566874f05f7c6003662035e","ca997711954ac38e4c80b6cb","0837f731efda8f1385b4ec89","0d5622380c498d071bbef24d","4dafcb6d45599002d5ca8c73","d3cad23d161c321b0c1c29a2","dba09f297899b9716e6a4e6c","56457787d0958454ae07ba9d","232b946259228fa129b7c7aa","ef0e83f2dd3e5f2de57ed162","78dd91ce2f03d612f7d21d67"],fullname:["2703cbfc864352670063ea62","779a362a0578306fdd80f1a5","53a307985ec6701f3b73c928","9656bc91f050d5df3e91db7c","358166d04b9f8b26933e6128","e7c71df1ba825a34be9150a7","548727a6f23ccfaa7480dab6","7de435a5405481f73e84a8cd","4560ebee29d9f23e1b4fb943","7b533747e186154a05a9b0a1","ff9d59c82e78e4910bf642d7","e39a711b27967f60aca297f2","5c1136ddf43625b1cf2ce8e2","3a6327d9c3946eefcfe6d513","1265240190ad56db08acdf09","a0c5c11493657902aeb49d84","0b9fbbe30973a70b76e01ef5","425d3a138058c88f9ff052de","2992ac823a91f1c19e801edb"],nameOrPractice:["fcd09bfdc003d44618676185","dc4a5619f17328bd06b38899"],nameOrBand:["082f23d3239e001fa382569e","1cebfe2a36eb319da1d74f08","fc78cd8fe36ec98750f48598","85ce4978795e86d267591938"],website:["23be93fd12d4e6aa6328eed6"],business:["f5feb80464366af988623685","19c8c17a917e17650c9b1af9","2722ab4c0feb9fa6fdcc1c6b","cba925039ed9d3d360590d31","2bca566fc4bdbe2a402e258c","b4d27d72f66ab52c276a9c92","85e863670516fb8906c99203","6796cebe34d21cca1400d748","28e95344ac1c3b2a8f8b4cdc","9562df22b947d92c05894cfe","fc57b1629c4ff302fb03e79c","19c94bf114b4d54a46a71121","8ccc686ed6279ed5b30503c4","e5aec35bbc5fc88b438724cf","9f2753f95b01bdb44b7c9b65","ca24aaa201bdb3998e5b0b15","6e3c94eb494ab624953e8e6f","4b0b238070eaa00a7ff897c0","fa6f57e9df0b2c3dfa39cce9","7d9f2f2d93d10adfb06b97f8","0fdf8f7c1fd0fb710ecb8826","02b40f8270007a792c300561","7bd6f744207891da991c722b","ede0e37e9de8c82c420ad0b5","5fb61ada96417edd325f09eb","b5ab898f0afbfec00845808e","70d8036f281d1ce612272b6a","be6f1d8dc988d56f886ed440","a4a33900f45ca67110f2dfc4","1e59ef5bda56d5fb23037d4a","2e0d3d3432112b324361895a","eb1243457ba9d8838db2d09f","882ad867cfb08a76289aed96","2eebd86995fb18a4588bf7f9","75688f274a950a2916f75b14","e67d552f50a50029ed406a50","af5b893bc1c9270bdf898624","8da01badf395e3300cbc1bc4","62e99522f3913d6ff89e29e8","494592c679c0d50b9d48a03e","a8c41ae5ef3d8694abd189b1","3adcda87e9f400e319e6351a","f28fbeb9e044f8e3cfa93f56","5018df1225db2457336b5e8f","228113fd238f42db1cf7160a","00e8a7e666e62eb91727352d","e34f3d3221e0000ef9c482be","2ca63a43de6b6b7e7024a355","3278ba04c3340b40d058ed5f","7fa37ccb854848c9ac8cf649","21c70c386045175cb342045a","1a807ebfa9792fc45bfe845e","49faa4fd9a05a2d493f09e65","94d4b55ce16bd162b833e148","0d9c96444715ddf86b7dae9c","c280f2565940817f4edc48fe","a28c5e5ea1945e5fa4ca1728","18025d42bfe2067427041843","1e93286d347b977133e30c28","963bfe1ba24ee03df24f807d","99391761bad4819abe6ae9fc","482d4178d8f6458f17da0add","b038a715c23868326f5beedb","ddcf01985bb895180fddde3b","c5c1f3c63915119ed5c7feff","1be1cd28dd126c4e7e3f6cc4","5e745b1b90bf5c79a42cb889","54004a861a39c4a3eb57d114","f1b75b7b719f5ed5b5bdc41f","9b888a944e35417b0916e075","3bb14e66865a11fd85762592","607d1b36a378f4c38206a56b","2005a71d36969ed011f7ab88","88337e3560e889b475d492a7","a4def3d162781f1e96ee1956","3d297a1c9d98dd4eb62f118c","2edc14cf7c0a5f8694a7bc35","693a95433a86eb32809922a0","137221e480f86fbd3c80436a","0f04c68cffed335f82caabfa","3fb3a4ba001dc048488331be","55d4e81833bc9eada9dffd0c"]},this.LOCATION_TITLES=((n={DEFAULT:"input-label"})[e.CategoryTypes.SingleEvent]="label-singleEvent",n),this.valueForCategory=function(e,t){return function(a){var i=r.categoryType(a);return t+(e[a.structureId]||e[i]||e.DEFAULT)}},this.newValueForCategory=function(e,t){return function(a){var i=r.categoryType(a),n=r.miscUtils.getKeyByValue(e,a.structureId),o=t;return n?o+="-"+n:e[i]&&(o+="-"+e[i]),o}},this.businessNameTitle=this.valueForCategory(this.BUSINESS_NAME_TITLES,"intro.business-name."),this.newBusinessNameTitle=this.newValueForCategory(this.STRUCTURE_TO_BUSINESS,"intro.business-name.label"),this.businessPlaceholder=this.newValueForCategory(this.STRUCTURE_TO_BUSINESS,"intro.business-name.input-placeholder"),this.locationTitle=this.valueForCategory(this.LOCATION_TITLES,"intro.business-location."),this.flags.wixEvents&&(this.BUSINESS_NAME_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+e.CategoryTypes.SingleEvent,this.LOCATION_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+e.CategoryTypes.SingleEvent)}return t.$inject=["flags","miscUtils"],t.prototype.categoryType=function(t){return t?this.flags.wixEvents&&this.SINGLE_EVENT_STRUCTURE_IDS.indexOf(t.structureId)>=0?e.CategoryTypes.SingleEvent:this.PHOTOGRAPHER_STRUCTURE_IDS.indexOf(t.structureId)>=0?e.CategoryTypes.Photographer:null:""},t}();e.IntroContentTpa=t,angular.module("adiIntroInternal").service("introContentTpa",t)}(A||(A={})),function(e){e[e.None=0]="None",e[e.Reference=1]="Reference",e[e.Visibility=2]="Visibility"}(f||(f={}));var m,y=function(){function e(e,t,a,i){this.modelTree=e,this.introManager=t,this.applicationParameters=a,this.flags=i}return e.$inject=["modelTree","introManager","applicationParameters","flags"],e.prototype.updateReferenceFieldsVisibility=function(e,t,a,i,n){i[e]=t,this.modelTree.updateReferenceFieldsVisibility(a,e,n)},e.prototype.updateFieldVisibility=function(e,t,a,i,n){a.argsMatchingPolicy[e]=t,i===f.Visibility&&this.modelTree.updateFieldsVisibility(a,null,e,t,n)},e.prototype.getMaskType=function(e){var t=e&&"GeneralDescription"===e.getContentElementType(),a=t&&"footer"!==e.containerPageId,i=t&&"footer"===e.containerPageId,n=e&&e.contentElementType;return a?n="Header":i&&(n="Footer"),n},e.prototype.update=function(e){var t=this,a=this.getMaskType(e),i=e.getReferenceFields();this.maskConfiguration[a].fields.forEach(function(a){a.typeUpdate===f.Reference?t.updateReferenceFieldsVisibility(a.key,a.condition(),e,i,a.forceDefaultValue):t.updateFieldVisibility(a.key,a.condition(),e,a.typeUpdate,a.forceDefaultValue)})},Object.defineProperty(e.prototype,"maskConfiguration",{get:function(){var e=this;return{Header:{fields:[{key:"MainEmail",condition:function(){return!1},typeUpdate:f.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return!1},typeUpdate:f.Reference,forceDefaultValue:!0},{key:"Logo",condition:function(){return e.introManager.isLogoExists()},typeUpdate:f.None},{key:"BusinessName",condition:function(){return!e.introManager.isLogoExists()},typeUpdate:f.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return e.flags.headlessApi&&e.introManager.isTaglineExist()},typeUpdate:f.None},{key:"Social.SocialButtons",condition:function(){return e.introManager.isSocialLinksExists()},typeUpdate:f.Reference,forceDefaultValue:!0}]},Footer:{fields:[{key:"Contact.fax",condition:function(){return!1},typeUpdate:f.Reference,forceDefaultValue:!1},{key:"MainEmail",condition:function(){return!1},typeUpdate:f.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return e.introManager.isPhoneExists()},typeUpdate:f.Reference,forceDefaultValue:!1},{key:"Logo",condition:function(){return!1},typeUpdate:f.None},{key:"BusinessName",condition:function(){return!1},typeUpdate:f.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:f.None},{key:"Social.SocialButtons",condition:function(){return!e.introManager.isSocialLinksExists()},typeUpdate:f.Reference,forceDefaultValue:!0},{key:"CopyrightMessage",condition:function(){return!0},typeUpdate:f.Visibility,forceDefaultValue:!0},{key:"Contact.address for display",condition:function(){return!1},typeUpdate:f.Reference,forceDefaultValue:!1},{key:"Subscribe",condition:function(){var t=e.introManager.data.serviceOffer&&e.introManager.data.serviceOffer.find(function(e){return e.type===AdiCoreSanta.TpaTypes.GetSubscribers});return!!t&&t.checked},typeUpdate:f.Visibility,forceDefaultValue:!1}]},Contact:{fields:[{key:"Social.SocialButtons",condition:function(){return!0},typeUpdate:f.Reference,forceDefaultValue:!0},{key:"address for display",condition:function(){return!0},typeUpdate:f.Visibility},{key:"address for google map",condition:function(){return!0},typeUpdate:f.Visibility}]}}},enumerable:!0,configurable:!0}),e}();angular.module("adiIntroInternal").service("fieldsMasks",y),function(e){var t=function(){return function(){}}();e.IntroAdiIntegration=t,angular.module("adiIntroInternal").service("introAdiIntegration",t)}(A||(A={})),function(e){var t=function(){function e(e){this.$q=e,this.hidden=!1}return e.$inject=["$q"],e.prototype.hide=function(){return this.$q.when()},e.prototype.show=function(){return this.$q.when()},e}();e.FakeIntroAnimationElement=t,angular.module("adiIntroInternal").factory("FakeIntroAnimationElement",["$q",function(e){return function(){return new t(e)}}])}(A||(A={})),function(e){var t=function(){function e(e,t,a){this.$q=e,this.flags=t,this.backdropAnimations=a,this.lastAnimating=e.when()}return e.$inject=["$q","flags","backdropAnimations"],e.prototype.init=function(e,t){return this.backdropAnimations.init(e[0],t)},e.prototype.play=function(e,t){return void 0===e&&(e="next"),this.lastAnimating=this.backdropAnimations.play(e,t),this.lastAnimating},e.prototype.wait=function(){return this.play("wait")},e.prototype.resize=function(e){var t=this;return this.lastAnimating.then(function(){return t.backdropAnimations.resize(e)})},e.prototype.scale=function(e){return this.backdropAnimations.scale(e)},e.prototype.dispose=function(){this.backdropAnimations.dispose()},e}();e.IntroAnimationAdapter=t,angular.module("adiIntroInternal").service("introAnimationAdapter",t)}(A||(A={})),function(e){var t=function(){function e(e,t,a){this.$q=e,this.$timeout=t,this.element=a,this.hidden=!1}return e.$inject=["$q","$timeout","element"],e.prototype.hide=function(){var e=this;this.element.css("opacity",0);var t=this.$q.defer();return this.$timeout(function(){e.hidden=!0,t.resolve()},500),t.promise},e.prototype.show=function(){return this.element.css("opacity",1),this.hidden=!1,this.$q.when()},e}();e.IntroAnimationElement=t,angular.module("adiIntroInternal").factory("IntroAnimationElement",["$q","$timeout",function(e,a){return function(i){return new t(e,a,i)}}])}(A||(A={})),function(e){e.INTRO_FINISHED="intro.finished";var t=function(){function e(){var e=this;this.stepChangeListeners=[],this.notifyStepChange=function(t,a,i,n){e.stepChangeListeners.map(function(e){return e(t,a,i,n)})}}return e.prototype.listenStepChange=function(e){var t=this,a=this.stepChangeListeners.push(e)-1;return function(){t.stepChangeListeners[a]=function(){}}},e}();e.IntroEventsEmitter=t,angular.module("adiIntroInternal").service("introEventsEmitter",t)}(A||(A={})),function(e){e[e.Next=0]="Next",e[e.Error=1]="Error",e[e.Skip=2]="Skip"}(m||(m={})),function(e){var t=function(){return function(e,t){this.isError=!0,this.type=e,this.message=t}}(),a=function(){function a(t,a,i,n,r,o,s,l,c,d,u,h,p,f){this.introStep=t,this.flags=a,this.consumerBiLogger=i,this.applicationParameters=n,this.validation=r,this.importSiteContent=o,this.cmsApi=s,this.$timeout=l,this.$q=c,this.wizWebsite=d,this.$translate=u,this.introContentTpa=h,this.wizUtils=p,this.introManager=f,this.BusinessInfoTimeoutResponse=1e4,this.isImportEnabled=!0,this.currentStep=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT,this.importDetails={WixSite:"wix site",NotWixSite:"non-wix site",ContentImported:"content-imported",SiteNotFound:"site-not-found",AddressNotExist:"address-does-not-exist",WixwizError:"wixwiz-error"},this.initData()}return a.$inject=["introStep","flags","consumerBiLogger","applicationParameters","validation","importSiteContent","cmsApi","$timeout","$q","wizWebsite","$translate","introContentTpa","wizUtils","introManager"],a.prototype.initData=function(){this.introManager.data&&(this.introManager.data.contactDetails=this.introManager.data&&this.introManager.data.contactDetails||{})},a.prototype.importSiteContentProcess=function(e){var t=this,a=this.getValidatedUrl(e);return this.getSiteInfo(a).then(function(){return t.getSiteValidation(a)}).then(function(){return t.getBusinessInfo(a)}).catch(function(e){return e})},a.prototype.addProtocolAndWWW=function(e,t){return void 0===t&&(t=!1),e?(t||0===e.indexOf("https")?"https":"http")+"://www."+e.replace(/(https?:\/\/)?(www.)?/i,""):e},a.prototype.encodeSpecificCharactersInUrl=function(e){return e.replace(/\?|&/gi,function(e){return encodeURIComponent(e)})},a.prototype.getValidatedUrl=function(e){return e?(e=this.addProtocolAndWWW(e),e=this.encodeSpecificCharactersInUrl(e)):e},a.prototype.buildKey=function(e,t){return e+"-"+t},a.prototype.getSiteInfo=function(e){var a=this;console.log("start: getSiteInfo for "+e);var n=new i.SiteConverterBIParams(this.buildKey(e,"site-info"),"site-info"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(n);return r.start(),this.importSiteContent.getSiteInfo(e).then(function(i){return console.log("end: getSiteInfo for "+e+"."),i?(console.log("wix site"),r.complete({overrideImportDetailsName:a.importDetails.WixSite}),a.$q.reject(new t(m.Skip))):(console.log("not wix site."),r.complete({overrideImportDetailsName:a.importDetails.NotWixSite}),a.$q.resolve())})},a.prototype.getSiteValidation=function(e){var a=this;console.log("start: getSiteValidation for "+e);var n=new i.SiteConverterBIParams(this.buildKey(e,"site-validation-wixwiz"),"site-validation-wixwiz"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(n);return r.start(),this.importSiteContent.getSiteValidation(e).then(function(i){if(console.log("end: getSiteValidation for "+e+". httpCode: "+i.httpErrorCode+', details: "'+i.statusLine+'"'),a.introManager.data.siteConverterSessionId=i.siteConverterSessionId,i.platform=i.platform&&i.platform.toLowerCase(),a.importSiteContent.isPlatformAllowed=!_.includes(a.wizUtils.disallowedPlatforms,i.platform),a.isImportEnabled=a.importSiteContent.isPlatformAllowed||a.flags.platformsScreen||a.flags.platformsScreenV2||a.flags.platformsScreen3||a.flags.platformsScreen4,a.wizWebsite.setPlatformAllowed(a.isImportEnabled),200!==i.httpErrorCode||i.isParked){console.log("ERROR: getSiteValidation"),r.complete({overrideImportDetailsName:a.buildBiDetails(a.importDetails.SiteNotFound,"")});var n=a.$translate.instant("intro.import-site-content.address-could-not-found");return a.consumerBiLogger.intro.siteConverterErrorIsShown("Site is not found",a.currentStep),a.$q.reject(new t(m.Error,n))}return r.complete({overrideImportDetailsName:a.buildBiDetails(a.importDetails.ContentImported,i.platform)}),a.$q.resolve()})},a.prototype.buildBiDetails=function(e,t){return"status="+e+";platform="+t+";"},a.prototype.getBusinessInfo=function(e){var t=this;console.log("start: getBusinessInfo for "+e);var a=new i.SiteConverterBIParams(this.buildKey(e,"site-business-info-import"),"site-business-info-import"),n=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(a);return n.start(),this.importSiteContent.importImagesFromUrl(e,this.introManager.data.name,this.introManager.data.siteConverterSessionId).then(function(a){console.log("End: getBusinessInfo for "+e,JSON.stringify(a)),n.complete({overrideImportDetailsName:t.importDetails.ContentImported}),a=a||[];var i=t.getMediaObj(a);return Promise.resolve({photos:t.convertToMediaObj(i.photos),logoUrl:i.logo})}).catch(function(){return console.log("ERROR: getBusinessInfo for "+e),n.complete({overrideImportDetailsName:t.importDetails.WixwizError}),Promise.resolve()})},a.prototype.getMediaObj=function(e){var t=null,a=[];return this.flags.platformsScreen3||this.flags.platformsScreen4?a=e:_.forEach(e,function(e,i){"logo"!==e.type||t?"image"===e.type&&a.push(i):t=i}),{photos:a,logo:t}},a.prototype.convertToMediaObj=function(e){return e.map(function(e){return{url:e}})},a.prototype.extractLogo=function(e){return e.generalInfo.logo&&!_.endsWith(e.generalInfo.logo.toLowerCase(),".svg")?e.generalInfo.logo:null},a}();e.ImportWebsite=a,angular.module("adiIntroInternal").service("importWebsite",a)}(A||(A={})),function(e){var t=function(){function e(e,t,a,i,n){this.mediaObj=e,this.introAdiIntegration=t,this.clientTopology=a,this.flags=i,this.introManager=n}return e.prototype.init=function(){this.mediaObj.displayLogo=!0,this.mediaObj.logos=this.mediaObj.logos||[]},e.prototype.getLogoURL=function(){var e=this.introManager.getLogo(this.mediaObj),t=e&&e.data,a=t&&t.relativeUri;if(a){var i=(window.devicePixelRatio||1)*(this.flags.MED?105:127);return this.clientTopology.mediaUrl+"/"+a+"/v1/fill/w_"+i+",h_"+i+",al_c,q_90/"+a}var n=this.introManager.getLogo(this.mediaObj);return n&&n.url},e.prototype.setLogo=function(e){var t;this.mediaObj.displayLogo=!0,t={source:"facebook",url:e.serverResponse.data.originalUrl,localFile:e.serverResponse,data:null,userVerified:!0,description:""};var a=this.mediaObj.logos;this.mediaObj.logos=[t].concat(a),t.data=this.introAdiIntegration.mediaGalleryAdapter.convertToMediaObject(t.localFile.data),t.data.mediaType="clipart"},e.prototype.hideLogo=function(){this.mediaObj.displayLogo=!1},e.prototype.isLogoVisible=function(){return this.mediaObj.displayLogo},e.prototype.cleanUp=function(){this.mediaObj.logos=this.mediaObj.logos.filter(function(e){return e&&e.url})},e}();e.IntroLogoPersistence=t}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r){this.mediaApi=e,this.introManager=t,this.flags=a,this.$q=i,this.wixWizDataManager=n,this.storyServices=r}return t.$inject=["mediaApi","introManager","flags","$q","wixWizDataManager","storyServices"],t.prototype.uploadMedia=function(){var e=this.getPhotosToUpload();return this.wixWizDataManager.uploadMedia(e)},t.prototype.upload=function(a,i){var n=this;if(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4){var r={name:i,urls:this.getPhotosToUpload()};return this.mediaApi.upload(a,[r]).then(function(e){n.storyServices.story.privateMediaFolderId=e&&e.folders&&e.folders.length>0?e.folders[0].id:""})}if(!this.introManager.data.media||!this.introManager.data.media.photos||0===this.introManager.data.media.photos.length)return this.$q.when();var o=[],s=[];_.forEach(this.introManager.data.media.photos,function(t){t.source===e.WixWizDataParser.PhotoSourceFacebook?t.userVerified&&o.push(t.url):t.source===e.WixWizDataParser.PhotoSourceWebsite&&t.userVerified&&s.push(t.url)});var l=t.MaxImagesToUpload/2,c=t.MaxImagesToUpload/2;o.length<s.length?(l=Math.min(o.length,l),c=t.MaxImagesToUpload-l):(c=Math.min(s.length,c),l=t.MaxImagesToUpload-c);var d=_.take(o,l).concat(_.take(s,c));if(0===d.length)return this.storyServices.story.privateMediaFolderId="",this.$q.resolve();r={name:i,urls:d};return this.mediaApi.upload(a,[r]).then(function(e){n.storyServices.story.privateMediaFolderId=e&&e.folders&&e.folders.length>0?e.folders[0].id:""})},t.prototype.getPhotosToUpload=function(){if(!this.introManager.data.media||!this.introManager.data.media.photos||0===this.introManager.data.media.photos.length)return[];var a=[],i=[];_.forEach(this.introManager.data.media.photos,function(t){t.source===e.WixWizDataParser.PhotoSourceFacebook?t.userVerified&&a.push(t.url):t.source===e.WixWizDataParser.PhotoSourceWebsite&&t.userVerified&&i.push(t.url)});var n=t.MaxImagesToUpload/2,r=t.MaxImagesToUpload/2;return a.length<i.length?(n=Math.min(a.length,n),r=t.MaxImagesToUpload-n):(r=Math.min(i.length,r),n=t.MaxImagesToUpload-r),_.take(a,n).concat(_.take(i,r))},t.MaxImagesToUpload=100,t}();e.IntroMediaUploader=t,angular.module("adiIntroInternal").service("introMediaUploader",t)}(A||(A={}));p=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};!function(e){var t=function(){function t(t,a,i,n,r){var o=this;this.introManager=t,this.$injector=a,this.$q=i,this.introContentTpa=n,this.flags=r,this.shouldLoad=function(){return o.introManager.data.shouldLoadAppsRecommendation},this.reset=function(){return o.introManager.data.shouldLoadAppsRecommendation=!0},this.loaded=function(){return o.introManager.data.shouldLoadAppsRecommendation=!1},this.getRecommendedApps=function(){return o.introManager.data.serviceOffer.filter(function(e){return e.recommended})},this.getRecommendedAppsForBi=function(){return o.getRecommendedApps().map(function(e){return e.type}).join(",")},this.shouldInstallApp=function(t){var a=o.getTpaType(t);return o.selectedCategoryType()!==e.CategoryTypes.Photographer||a!==AdiCoreSanta.TpaTypes.Stores},this.initiateCMS=function(){var e=o.$injector.get("newContentManager");if(o.flags.fixMultipleInitContent){var t=o.$injector.get("contentManager");return t.initializing?t.initializing:e.initContent(o.introManager.data.category.industryId,o.introManager.data.category.structureId,"")}return e?e.initContent(o.introManager.data.category.industryId,o.introManager.data.category.structureId,""):o.$q.when()}}return t.$inject=["introManager","$injector","$q","introContentTpa","flags"],t.prototype.loadAppsRecommendation=function(){var e=this;return this.introManager.data.category?this.initiateCMS().then(function(){var t=e.$injector.get("newContentManager"),a=t&&t.getAppsRecommendation().reduce(function(e,t){return e[t.type]=t,e},{});e.introManager.fillMissingData();var i=Object.keys(AdiCoreSanta.getTpaApps()).map(function(t){return{type:t,show:e.shouldShowApp(t)}}).map(function(t){var i=e.isAppChecked(t.type,t.show,a[t.type]&&a[t.type].preferred);return p({},t,{checked:i,preChecked:i,recommended:Boolean(a[t.type])||t.type===AdiCoreSanta.TpaTypes.Chat})}).reduce(function(e,t){return t.type===AdiCoreSanta.TpaTypes.Chat?e.chat.push(t):t.recommended&&t.show?t.checked?e.recommendedChecked.push(t):e.recommendedUnChecked.push(t):e.remain.push(t),e},{recommendedChecked:[],recommendedUnChecked:[],chat:[],remain:[]});i.recommendedChecked.length+i.recommendedUnChecked.length===0&&(i=e.setDefaultApps(i)),e.introManager.data.serviceOffer=e.buildAppsArray(i),e.loaded()}):this.$q.resolve()},t.prototype.setDefaultApps=function(e){var t=_.cloneDeep(e);return[AdiCoreSanta.TpaTypes.Stores,this.flags.oldBlog?AdiCoreSanta.TpaTypes.Blog:AdiCoreSanta.TpaTypes.Blog2,AdiCoreSanta.TpaTypes.Bookings].forEach(function(e){var a=t.remain.findIndex(function(t){return t.type===e});a&&t.remain[a].show&&(t.recommendedUnChecked.push(t.remain[a]),t.remain.splice(a,1))}),t},t.prototype.buildAppsArray=function(e){var t=this,a=[];return e.recommendedChecked.forEach(function(i){a.length<3?a.push(i):e.remain=[t.notRecommendedApp(i)].concat(e.remain)}),a.push(e.chat[0]),e.recommendedUnChecked.forEach(function(i){a.length<4?a.push(i):e.remain=[t.notRecommendedApp(i)].concat(e.remain)}),a.concat(e.remain)},t.prototype.notRecommendedApp=function(e){return p({},e,{recommended:!1,checked:!1})},t.prototype.prepareAppsBIInfo=function(){var e=this;return[AdiCoreSanta.TpaTypes.Stores,AdiCoreSanta.TpaTypes.Bookings,AdiCoreSanta.TpaTypes.GetSubscribers,this.flags.oldBlog?AdiCoreSanta.TpaTypes.Blog:AdiCoreSanta.TpaTypes.Blog2,AdiCoreSanta.TpaWidgetTypes.Instagram_Widget,AdiCoreSanta.TpaTypes.Forum,AdiCoreSanta.TpaTypes.Chat,AdiCoreSanta.TpaWidgetTypes.Music_Widget,AdiCoreSanta.TpaWidgetTypes.Video_Widget,AdiCoreSanta.TpaWidgetTypes.BandsInTown_Widget,AdiCoreSanta.TpaWidgetTypes.Events_Single,AdiCoreSanta.TpaWidgetTypes.Events_Multiple,AdiCoreSanta.TpaTypes.Members,AdiCoreSanta.TpaTypes.PaidPlans].map(function(t){var a=e.introManager.data.serviceOffer.find(function(e){return e.type===t});return a?a.show?a.preChecked?a.checked+" (prechecked)":a.recommended?a.checked+" (recommended)":a.checked+" (popular)":a.checked+" (default)":""})},t.prototype.unCheckAllApps=function(){this.introManager.data.serviceOffer.filter(function(e){return e.show}).forEach(function(e){return e.checked=!1})},t.prototype.shouldShowApp=function(e){if(e===AdiCoreSanta.TpaTypes.Members)return!1;if(e===AdiCoreSanta.TpaTypes.Forum&&!this.flags.forumFromIntro)return!1;var t=this.getTpaType(e);if(!this.shouldInstallApp(e))return!1;var a=this.introManager.data.category.structureId,i=AdiCoreSanta.tpaConfigs[t];return t!==this.introManager.vertical&&!_.includes(i.structureIds,a)},t.prototype.isAppChecked=function(e,t,a){return e!==AdiCoreSanta.TpaTypes.Members&&e!==AdiCoreSanta.TpaTypes.Forum&&(e===AdiCoreSanta.TpaTypes.Chat||!t||Boolean(a))},t.prototype.selectedCategoryType=function(){return!!this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)},t.prototype.getTpaType=function(e){return AdiCoreSanta.isTpaWidgetType(e)?AdiCoreSanta.WidgetToAppMapper[e]:e},t}();e.IntroAppsRecommendationManager=t,angular.module("adiIntroInternal").service("introAppsRecommendationManager",t)}(A||(A={})),function(e){!function(e){e.ExistingWebsite="ExistingWebsite",e.YoutubeChannel="YoutubeChannel",e.Facebook="Facebook",e.Google="Google"}(e.BusinessPlatform||(e.BusinessPlatform={}))}(A||(A={})),function(e){var t=function(){function t(e,t){var a=this;this.socialLinkManager=e,this.flags=t,this.createSocialButtons=function(e){return _.filter(e,function(e){return!!e.url}).map(function(e){var t=e.platform?e.platform:a.socialLinkManager.invalidPlatformName,i=a.socialLinkManager.getPlatformByName(t)||a.socialLinkManager.getPlatformByName(a.socialLinkManager.invalidPlatformName);return{platform:e.platform,Title:e.platform,mediaType:"icon",width:200,height:200,relativeUri:i.lightRelativeUri,Link:{targetUrl:a.makeValidURL(e.url)}}})}}return t.$inject=["socialLinkManager","flags"],t.prototype.makeValidURL=function(e){return e.startsWith("http")||(e="http://"+e),e},t.prototype.createMediaItem=function(e){return{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image"}},t.prototype.isValidContactDescription=function(e,t){if(!t)return!1;var a=t,i=a.parking&&(a.parking.lot||a.parking.street||a.parking.valet),n=!!a.publicTransport;return i||n},t.prototype.formatContactDescription=function(e){var t="";return e.parking&&(e.parking.lot||e.parking.street||e.parking.valet)&&(t+=this.formatParking(e.parking)),e.publicTransport&&(t+=this.formatPublicTransport(e.publicTransport)),t},t.prototype.formatPublicTransport=function(e){return"To reach us via public transit: "+e},t.prototype.formatParking=function(e){var t="Should you be arriving by car, we offer ",a=_.sumBy(_.values(e),function(e){return e?1:0}),i=0;return e.valet&&(t+=this.addSentencePart("valet parking",0===i,2===a),a--,i++),e.lot&&(t+=this.addSentencePart("a parking lot with parking for our customers",0===i,2===a),a--,i++),e.street&&(t+=this.addSentencePart("street parking",0===i,2===a)),t+"."},t.prototype.addSentencePart=function(e,t,a){return t?e:(a?", ":" and ")+e},t.prototype.formatCategories=function(e){return e?e.join(" \xb7 "):null},t.prototype.isValidOpeningHours=function(e,t){return!(!t||0===t.length)&&_.some(t,function(e){return e&&e.day&&e.from&&e.to})},t.prototype.formatOpeningHours=function(t){var a=this;if(!t)return null;t=t.map(function(t){return t.day===e.WeekDay.Sunday&&(t.day=e.WeekDay.SundayLastDayOfWeek),t});var i=_.groupBy(t,"day");return Object.keys(i).map(function(e){var t=i[e].map(function(e){return e&&e.from&&e.to?a.formatHour(e.from)+" - "+a.formatHour(e.to):null}).filter(function(e){return!!e}).join(", ");return a.formatDay(parseInt(e,10))+": "+t}).join("\n")},t.prototype.formatHour=function(e){var t=e.hour>12?(e.hour-12).toString():e.hour.toString();return(t+=":"+(0===e.minute?"00":e.minute))+(e.hour>12?"pm":"am")},t.prototype.formatDay=function(t){switch(t){case e.WeekDay.Monday:return"Mon";case e.WeekDay.Tuesday:return"Tue";case e.WeekDay.Wednesday:return"Wed";case e.WeekDay.Thursday:return"Thu";case e.WeekDay.Friday:return"Fri";case e.WeekDay.Saturday:return"Sat";case e.WeekDay.Sunday:case e.WeekDay.SundayLastDayOfWeek:return"Sun"}},t.prototype.formatYear=function(e){return e&&e.getFullYear?e.getFullYear().toString():""},t.prototype.formatReview=function(e){if(!e)return e;var a=_.words(e);return a.length>t.MaxReviewWords?a.splice(0,t.MaxReviewWords)+"...":e},t.prototype.formatSocialLinks=function(e){var t=[];return e&&(t=e.map(function(e){return{platform:e.platform,url:e.Link.targetUrl}})),t},t.MaxReviewWords=150,t}();e.IntroDataFormatter=t,angular.module("adiIntroInternal").service("introDataFormatter",t)}(A||(A={})),function(e){var t=function(){function e(e,t){var a=this;this.$window=e,this.clientTopology=t,this.on=function(e,t){return a.$window.addEventListener(e,t)},this.off=function(e,t){return a.$window.removeEventListener(e,t)},this.trigger=function(e){return angular.element(a.$window).trigger(e)},this.formattedDate=function(e){return Intl.DateTimeFormat(a.clientTopology.locale).format(e)},this.formattedTime=function(e){return Intl.DateTimeFormat(a.clientTopology.locale,{hour:"numeric",minute:"numeric"}).format(e)},this.userTimezone=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}}return e.$inject=["$window","clientTopology"],e.prototype.back=function(){this.$window.history.go(-1)},e.prototype.getWindowDimensions=function(){return{windowWidth:this.$window.innerWidth,windowHeight:this.$window.innerHeight}},e.prototype.getAnimationBoxDimensions=function(t){var a=this.getWindowDimensions(),i=a.windowWidth,n=a.windowHeight,r=Math.floor(.42*i);r=Math.max(r,714),r=Math.min(r,806);var o=e.CONTENT_WIDTH,s=Math.floor(.7*(r-o)+t);return{y:Math.floor((n-s)/2),x:Math.floor((i-r)/2),width:r,height:s}},e.prototype.getContentPosition=function(t,a){var i=this.getWindowDimensions(),n=i.windowWidth,r=i.windowHeight,o=e.CONTENT_WIDTH;return{x:Math.floor((n-o)/2),y:Math.floor((r-a)/2),spacing:(t.width-o)/2}},e.CONTENT_WIDTH=522,e}();e.IntroWindow=t,angular.module("adiIntroInternal").service("introWindow",t)}(A||(A={}));var b=function(){function e(e){this.siteConverterConf=e,this.CONVERT_URL_REGEX=/^(?:(?:https?:)?\/\/)?(.*?)\/?$/}return e.$inject=["siteConverterConf"],e.prototype.areMediasYoutubeOrVimeo=function(e,t){var a=this;return this.isListSection(e)?e.list.some(function(e){return a.isYoutubeOrVimeo(e,t)}):this.isYoutubeOrVimeo(e,t)},e.prototype.isYoutubeOrVimeo=function(e,t){return e.media&&e.media.some(function(e){return t.test(e.src)})},e.prototype.isSingleBlockSection=function(e){return"single"===e.type},e.prototype.isListSection=function(e){return"list"===e.type},e.prototype.isHeaderSection=function(e){return"header"===e.type},e.prototype.isPresetPreview=function(e){return!!e.solution},e.prototype.isGrid=function(e){return"grid"===e.list_type},e.prototype.isSlideshow=function(e){return e&&"slideshow"===e.list_type},e.prototype.isHorizontalList=function(e){return e&&"horizontal"===e.list_type},e.prototype.isVerticalList=function(e){return e&&"vertical"===e.list_type},e.prototype.hasNoText=function(e){return!e.title&&this.hasNoExtraText(e)},e.prototype.hasNoExtraText=function(e){return!e.subtitle&&!e.paragraph},e.prototype.hasMediaWithoutLink=function(e){return this.hasMedia(e)&&!e.media.link},e.prototype.hasMedia=function(e){return e.media&&e.media.length},e.prototype.isFixedPositioned=function(e){return"fixed"===_.get(e,"position.type")},e.prototype.isHorizontalListPreset=function(e){return e.preset.data.itemsInRow>1},e.prototype.isVerticalListPreset=function(e){return!e.preset.data.itemsInRow||1===e.preset.data.itemsInRow},e.prototype.isStripGalleryPreset=function(e){return!0},e.prototype.isGridGalleryPreset=function(e){return!0},e.prototype.getHorizontalListPresets=function(e){var t=this;return e.filter(function(e){return t.isHorizontalListPreset(e)})},e.prototype.getVerticalListPresets=function(e){var t=this;return e.filter(function(e){return t.isVerticalListPreset(e)})},e.prototype.getStripGalleryPresets=function(e){var t=this;return e.filter(function(e){return t.isStripGalleryPreset(e)})},e.prototype.getGridGalleryPresets=function(e){var t=this;return e.filter(function(e){return t.isGridGalleryPreset(e)})},e.prototype.isSideList=function(e,t){return e.position&&e.position.width<t.pages[0].dimension.width/2},e.prototype.isListOfImages=function(e){var t=this;return e.list.every(function(e){return t.isMainlyMedia(e)})},e.prototype.isMainlyMedia=function(e){return this.hasNoExtraText(e)&&!this.hasButton(e)&&this.hasMediaWithoutLink(e)},e.prototype.hasButton=function(e){return!!e.button},e.prototype.shouldTransformListToGallery=function(e){return this.isListSection(e)&&this.isListOfImages(e)&&!this.isSlideshow(e)&&!this.isHorizontalList(e)},Object.defineProperty(e.prototype,"disallowedPlatforms",{get:function(){return["wix","weebly","shopify","jimdo","squarespace","godaddy","webflow","wordpress","wordpress.com","1&1","web","bigcommerce","thegrid","sitebuilder"]},enumerable:!0,configurable:!0}),e.prototype.transformListToGallery=function(e){return{type:"single",media:_.flattenDeep(e.list.map(function(e){return e.media.filter(function(e){return!e.background}).map(function(t){return t.title=e.title,t})})),mediaDisplayType:"gallery",migratedListType:e.list_type}},e.prototype.cleanRichText=function(e){var t=$("<div />").html(e).children();return t.length>0?t.text():name},e.prototype.hasOnlySmallMedia=function(e){var t=this;return this.isListSection(e)?e.list&&e.list.every(function(e){return t.singleSectionHasSmallMedia(e)}):!!this.isSingleBlockSection(e)&&this.singleSectionHasSmallMedia(e)},e.prototype.isSectionEmpty=function(e){var t=this;return this.isListSection(e)?e.list&&e.list.every(function(e){return t.isSingleSectionEmpty(e)}):!this.isSingleBlockSection(e)||this.isSingleSectionEmpty(e)},e.prototype.isSingleSectionEmpty=function(e){return this.hasNoText(e)&&!this.hasMedia(e)&&!this.hasButton(e)},e.prototype.singleSectionHasSmallMedia=function(e){var t=this;return e.media&&e.media.every(function(e){return Math.min(e.realWidth,e.width)<=t.siteConverterConf.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY})},e.prototype.convertUrlToCanonicalForm=function(e){return e.match(this.CONVERT_URL_REGEX)[1]},e}();angular.module("adiIntroInternal").service("wizUtils",b);var S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},v=function(){function e(e,t,a,i,n,r,o,s,l,c,d,u,h,p,f,g,m,y){this.$q=e,this.introManager=t,this.wizWebsiteLoader=a,this.mediaOverride=i,this.contentElementGenerator=n,this.miscUtils=r,this.defaultSections=o,this.$injector=s,this.flags=l,this.wizUtils=c,this.wixWizDataManager=d,this.imageScore=u,this.consumerBiLogger=h,this.consumerBiLoggerHelpers=p,this.siteConverterLogs=f,this.siteConverterConf=g,this.fontCustomizationService=m,this.storyServices=y,this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=null,this.FullSiteDataTimeoutResponse=4e4,this.importSiteBlacklistDomains=[],this.siteConverterProgressSteps=["builder.progress-bar.step-message.sc-adding-header-and-footer","builder.progress-bar.step-message.sc-arranging-text-images","builder.progress-bar.step-message.sc-adding-site-colors","builder.progress-bar.step-message.sc-adding-site-fonts"],this.flags.wizSiteConverter&&(this.flags.textManager=!0),this.loggerId=Math.round(1e3*Math.random())}return e.$inject=["$q","introManager","wizWebsiteLoader","mediaOverride","contentElementGenerator","miscUtils","defaultSections","$injector","flags","wizUtils","wixWizDataManager","imageScore","consumerBiLogger","consumerBiLoggerHelpers","siteConverterLogs","siteConverterConf","fontCustomizationService","storyServices"],e.prototype.uploadMedia=function(e,t,a){return this.log("uploading media",this.storyName),this.wizContentManager.uploadMedia(e,a,this.storyName,t)},e.prototype.waitForMediaUpload=function(e){return this.log("waiting for media upload"),this.wizContentManager.prepareMedia(e)},e.prototype.uploadImportedData=function(e,t,a,i,n){var r=this,o=e.parsedData;this.isActivelyConvertingSite||this.startLoading();var s=o,l=_.cloneDeep(o);this.siteConverterLogs.groupStart("Wiz JSON Parsing"),this.wizContentManager=this.$injector.get("wizContentManager"),this.log("wixwiz data, before processing",s),this.flags.debugWizSiteConverter&&(window.siteConverter={before:s.pages[0].sections});var c=l.pages[0].images.length,d=l.pages[0].sections.length;return this.consumerBiLogger.intro.siteConverterSiteJsonParsingStart(),Promise.resolve().then(function(){return r.wizContentManager.setCurrentUrl(t)}).then(function(){return r.removeLowConfidenceSections(l)}).then(function(){return r.uploadMedia(t,a,l)}).then(function(){return r.waitForMediaUpload(t)}).then(function(e){r.log("uploaded media",{mediaToUpload:c,successfullyUploaded:e&&e.length}),r.mediaItems=e}).then(function(){return r.runPreTransforms(l)}).then(function(e){return r.runAsyncTransforms(e)}).then(function(e){if(!r.shouldContinueToConvertSite(e))throw r.log("not converting site, NOGO",e),"not converting site";return e}).then(function(e){return r.runPostTransforms(e,i)}).then(function(e){return r.takeTopSections(e)}).then(function(e){return r.setImportedSite(e)}).then(function(){return r.enablePrequisiteFlags()}).then(function(){r.consumerBiLogger.intro.siteConverterSiteJsonParsingSuccess(r.mediaItems&&r.mediaItems.length,c,l.pages[0].sections.length,d),r.doneLoading()}).catch(function(e){if(r.consumerBiLogger.intro.siteConverterSiteJsonParsingFailed(r.mediaItems&&r.mediaItems.length,c,l.pages[0].sections.length,d),r.errorInLoading(e),n)throw e})},e.prototype.preloadFullSiteData=function(e,t){this.consumerBiLoggerHelpers.resetLoadTime(),this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"requesting wixwiz fullsite data");var a=this.$injector.get("importSiteContent");this.preloadedFullSiteDataPromise={url:e,title:t,promise:a.analyzeFullSite(e,t,this.introManager.data.siteConverterSessionId,this.FullSiteDataTimeoutResponse).then(function(e){return e})}},e.prototype.enablePrequisiteFlags=function(){this.log("enabling prequisite flags",_.cloneDeep(this.flags),this.flags),this.flags.presetsSlideShow=!0,this.flags.coreNewVideoValidation=!0},e.prototype.isImportUrlAllowed=function(e){return!_.find(this.importSiteBlacklistDomains,function(t){return e.indexOf(t)>-1})},e.prototype.postloadFullSiteData=function(e,t){var a=this;this.preloadedFullSiteDataPromise&&this.isImportUrlAllowed(e)&&this.preloadedFullSiteDataPromise.promise.then(function(i){return a.uploadImportedData(i,e,t,!0,!1)}).catch(function(e){a.log("error in getFullSiteData",e),a.errorInLoading(e)})},e.prototype.startLoading=function(){this.isActivelyConvertingSite=!0,this.lastConvertionSuccess=null,this.loadPromise=this.$q.defer()},e.prototype.doneLoading=function(){this.siteConverterLogs.groupEnd(),this.loadPromise.resolve()},e.prototype.errorInLoading=function(e){this.siteConverterLogs.groupEnd(),this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=!1,this.loadPromise.reject(e)},e.prototype.waitForSiteConverter=function(e){return this.storyName=e,this.loadPromise.promise},e.prototype.setPlatformAllowed=function(e){this.platformAllowed=e},e.prototype.isPlatformAllowed=function(){return this.platformAllowed},e.prototype.setImportedSite=function(e){this.log("wixwiz data, after processing",e),this.lastLoadedSite=e,this.flags.debugWizSiteConverter&&window.siteConverter&&(window.siteConverter.after=e.pages[0].sections)},e.prototype.shouldContinueToConvertSite=function(e){return e.pages[0].sections.length>=this.siteConverterConf.MINIMUM_VIABLE_SECTIONS},e.prototype.runPreTransforms=function(e){this.siteConverterLogs.groupStart("preTransforms"),this.log("running preTransforms");var t=this.transform(e,[this.setRealMediaWidth,this.removeExcessSections,this.removeFixedPositionedSections,this.removeBadMedia,this.removeSingleSectionsWithButtonOnly,this.removeSingleSectionsWithShortParagraphOnly,this.changeSlideshowWithSmallMediaToHorizontalList,this.removeEmptySections]);return this.siteConverterLogs.groupEnd(),t},e.prototype.removeEmptySections=function(e){var t=this;return e.pages[0].sections=e.pages[0].sections.filter(function(e){return!t.wizUtils.isSectionEmpty(e)}),e},e.prototype.changeSlideshowWithSmallMediaToHorizontalList=function(e){var t=this;return this.log("checking slideshow image size"),e.pages[0].sections.filter(this.wizUtils.isSlideshow).forEach(function(e){t.wizUtils.hasOnlySmallMedia(e)?(e.list_type="horizontal",t.siteConverterLogs.trace(t.siteConverterLogs.defaultLoggerId,"small image slideshow, changing to horizontal",e)):t.siteConverterLogs.trace(t.siteConverterLogs.defaultLoggerId,"big image slideshow, not changing")}),e},e.prototype.runAsyncTransforms=function(e){return S(this,void 0,void 0,function(){var t=this;return T(this,function(a){switch(a.label){case 0:return this.siteConverterLogs.groupStart("asyncTransforms"),this.log("running asyncTransforms"),[4,AdiCoreSanta.sequencePromises([this.selectSectionMedia],function(a){return e=a.call(t,e)})];case 1:return a.sent(),this.siteConverterLogs.groupEnd(),[2,e]}})})},e.prototype.runPostTransforms=function(e,t){this.siteConverterLogs.groupStart("postTransforms"),this.log("running postTransforms");var a=this.transform(e,[this.handleTexts,this.transformListWithOnlyImagesToGallery,this.handleMediaInAllListSections,t?this.prepareFirstSectionAsWelcome:function(e){return e},this.ensureFirstSectionHasMedia,this.removeEmptySections]);return this.siteConverterLogs.groupEnd(),a},e.prototype.transform=function(e,t){var a=this;try{t.forEach(function(t){e=t.call(a,e)})}catch(e){this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"SiteConverter: error",e)}return e},e.prototype.populateSectionWithCMSMedia=function(e){var t=this.generateWelcomeCE();e.media=t.getFieldValueByType("media","image",!0)},e.prototype.generateWelcomeCE=function(){return this.contentElementGenerator.generate(this.defaultSections.getSectionOfceType("Welcome"),0)},e.prototype.generateWelcomeWizSection=function(){var e=this.generateWelcomeCE();return{type:"single",title:"",subtitle:e.getFieldValueByType("text","subTitle",!0),paragraph:e.getFieldValueByType("text","longText",!0),media:e.getFieldValueByType("media","image",!0)}},e.prototype.hasOnlyButton=function(e){return!e.media&&!e.paragraph&&!e.title&&!e.subtitle&&e.button},e.prototype.hasOnlyShortParagraph=function(t){return!t.button&&!t.media&&!t.title&&!t.subtitle&&t.paragraph&&t.paragraph.length<e.MINIMUM_PARAGRAPH_LENGTH},e.prototype.getSite=function(){return this.lastLoadedSite},e.prototype.isConvertingSite=function(){return this.flags.wizSiteConverter&&this.isActivelyConvertingSite},e.prototype.wasLastConvertionSuccessfull=function(){return this.lastConvertionSuccess},e.prototype.setFinishedConvertingSite=function(){this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=!0},e.prototype.siteFinishingTouches=function(){this.log("running finishing touches"),this.reduceFontSize(),this.setWelcomeSectionTitle()},e.prototype.setPrivateFolderMediaId=function(){this.storyServices.story.privateMediaFolderId=this.wizContentManager.getCurrentMediaFolderId()},e.prototype.setWelcomeSectionTitle=function(){var e=this,t=_.first(this.getSite().pages[0].sections.filter(function(t){return e.wizUtils.isSingleBlockSection(t)||e.wizUtils.isListSection(t)}));this.wizUtils.hasNoText(t)&&(this.log("no text, populating title"),t.rawTitle="",t.title=this.introManager.data.name?"Welcome to "+this.introManager.data.name:"Welcome!")},e.prototype.reduceFontSize=function(){this.log("reducing font size",this.siteConverterConf.DEFAULT_FONT_SIZE),this.fontCustomizationService.setFontSizeAllSite(this.siteConverterConf.DEFAULT_FONT_SIZE)},e.prototype.removeSingleSectionsWithShortParagraphOnly=function(e){var t=this,a=e.pages[0].sections.length;e.pages.forEach(function(e){return e.sections=e.sections.filter(function(e){return!(t.wizUtils.isSingleBlockSection(e)&&t.hasOnlyShortParagraph(e))})});var i=e.pages[0].sections.length;return this.log("removed single sections with short paragraph only",{before:a,after:i}),e},e.prototype.handleListSectionByMedia=function(e){var t=e.list.filter(function(e){return e.media&&!!e.media.length}),a=t.length;a&&a<e.list.length&&(this.halfOrMoreHasMedia(a,e.list.length)&&a>=2?e.list=t:(this.log("less than half of the list items have a media, reseting media for all",e),e.list=e.list.map(function(e){return e.media=[],e})))},e.prototype.handleMediaInAllListSections=function(e){var t=this;return this.log("handling list section media"),e.pages.forEach(function(e){e.sections.filter(function(e){return t.wizUtils.isListSection(e)}).forEach(function(e){t.handleListSectionByMedia(e)})}),e},e.prototype.removeSingleSectionsWithButtonOnly=function(e){var t=this,a=e.pages[0].sections.length;e.pages.forEach(function(e){return e.sections=e.sections.filter(function(e){return!(t.wizUtils.isSingleBlockSection(e)&&t.hasOnlyButton(e))})});var i=e.pages[0].sections.length;return this.log("removed single sections with button only",{before:a,after:i}),e},e.prototype.prepareFirstSectionAsWelcome=function(e){var t=this;this.log("preparing first section as welcome");var a=_.first(e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)}));return this.wizUtils.isListSection(a)&&!this.wizUtils.isSlideshow(a)&&(this.log("adding a welcome section from the CMS"),e.pages[0].sections.unshift(this.generateWelcomeWizSection())),e},e.prototype.ensureFirstSectionHasMedia=function(e){var t=this;this.log("ensure first section has media");var a=_.first(e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)}));return this.wizUtils.hasMedia(a)||(this.log("no media, populating from CMS"),this.populateSectionWithCMSMedia(a)),e},e.prototype.transformListWithOnlyImagesToGallery=function(e){var t=this;this.log("checking if we should transform a list with only images to gallery");var a=this.miscUtils.JSONClone(e);return a.pages.forEach(function(e){e.sections=e.sections.map(function(e){return t.wizUtils.shouldTransformListToGallery(e)?(t.log("transforming list to gallery",e),t.wizUtils.transformListToGallery(e)):e})}),a},e.prototype.removeFixedPositionedSections=function(e){var t=this,a=e.pages[0].sections.length;e.pages.forEach(function(e){e.sections=e.sections.filter(function(e){return!t.wizUtils.isFixedPositioned(e)})});var i=e.pages[0].sections.length;return this.log("removed fixed position elements",{before:a,after:i}),e},e.prototype.composeNodeTitle=function(e,t,a){if(e&&e.contentElement&&e.contentElement.values){var i=this.getCEValueBySubType(e,"title");if(i&&i.value&&e.argsMatchingPolicy[i.name])return this.wizUtils.cleanRichText(i.value)}return a+" "+(t+1)},e.prototype.getCEValueBySubType=function(e,t){return _.find(e.contentElement.values,["subType",t])},e.prototype.createContactPage=function(){return this.$injector.get("wizContentManager").contactPage},e.prototype.setRealMediaWidth=function(e){var t=this;return e.pages[0].sections.forEach(function(e){t.wizUtils.isListSection(e)?e.list.forEach(function(e){t.setRealMediaWidthForSingle(e)}):t.wizUtils.isSingleBlockSection(e)&&t.setRealMediaWidthForSingle(e)}),this.log("set real media width"),e},e.prototype.setRealMediaWidthForSingle=function(e){var t=this;e.media&&e.media.forEach(function(e){var a=t.getUploadedImage(e.src);e.realHeight=a?a.height:e.height,e.realWidth=a?a.width:e.width})},e.prototype.removeExcessSections=function(e){var t=this,a=e.pages[0].sections.length;e.pages[0].sections=e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)});var i=e.pages[0].sections.length;return this.log("removed excess sections",{before:a,after:i}),e},e.prototype.removeBadMedia=function(e){return this.log("removing bad media"),e},e.prototype.handleTexts=function(e){var t=this;return e.pages[0].sections.forEach(function(e){t.wizUtils.isListSection(e)?e.list.forEach(function(e){return t.handleSingleSectionTexts(e)}):t.wizUtils.isSingleBlockSection(e)&&t.handleSingleSectionTexts(e)}),e},e.prototype.handleSingleSectionTexts=function(e){if(e.title){var t=e.title.split(" "),a=t.slice(0,this.siteConverterConf.TITLE_MAX_WORDS).join(" "),i=t.slice(this.siteConverterConf.TITLE_MAX_WORDS).join(" ");e.title=a,e.paragraph=i+" "+(e.paragraph||""),e.rawParagraph=i+" "+(e.rawParagraph||""),e.rawTitle=""}e.rawTitle&&(e.rawParagraph=e.rawTitle+" "+(e.rawParagraph||""))},e.prototype.selectSectionMedia=function(e){return S(this,void 0,void 0,function(){var t,a=this;return T(this,function(i){switch(i.label){case 0:return this.log("selecting section media by score"),t=_.flatten(e.pages[0].sections.map(function(e){return a.wizUtils.isListSection(e)?a.selectListSectionMedia(e):a.wizUtils.isSingleBlockSection(e)?a.selectSingleSectionMedia(e):Promise.resolve()})),[4,Promise.all(t)];case 1:return i.sent(),[2,e]}})})},e.prototype.selectListSectionMedia=function(e){var t=this,a=this.wizUtils.hasOnlySmallMedia(e);return e.list.map(function(e){return t.selectSingleSectionMedia(e,a)})},e.prototype.selectSingleSectionMedia=function(e,t){return void 0===t&&(t=!1),S(this,void 0,void 0,function(){var a,i,n=this;return T(this,function(r){switch(r.label){case 0:return(a=e.media)?[4,Promise.all(this.scoreMediaItems(a,e,t)).then(function(e){n.log("scoredMediaItems",{scoredMediaItems:e});var t=(e=_.filter(e)).filter(function(e){return e.score>0});if(n.log("valid media items",{validMediaItems:t}),!t.length)return[];if(1===t.length)return n.log("only one valid media item, returning it"),[t[0].mediaItem];var a=n.getLargestMediaOfSameSize(t);return n.log("largest medias",{largestMediaOfSameSize:a}),a})]:(this.log("no media found",{section:e}),[2]);case 1:return i=r.sent(),e.media=i,[2]}})})},e.prototype.getUploadedImage=function(e){return this.mediaItems.filter(function(t){return t.sourceUrl===e})[0]},e.prototype.scoreMediaItems=function(e,t,a){var i=this;this.log("scoring media",{mediaItems:e,wizSection:t});var n=e.filter(function(e){return"image"===e.type}).map(function(e){return S(i,void 0,void 0,function(){var t,i;return T(this,function(n){switch(n.label){case 0:return t=this.getUploadedImage(e.src),this.log("uploaded media item",{uploadedMediaItem:t}),t?(this.log("scoring image",{uploadedMediaItem:t,mediaItem:e}),i={mediaItem:e},[4,this.imageScore.imageScoreFromImageUrl("https://static.wixstatic.com/"+t.fileUrl,a)]):[2];case 1:return[2,(i.score=n.sent(),i.size=t.width*t.height,i)]}})})}),r=e.filter(function(e){return"video"===e.type}).map(function(e){return{mediaItem:e,score:1,size:e.width*e.height}});return n.concat(r)},e.prototype.removeLowConfidenceSections=function(e){var t=this,a=e.pages[0].sections.length;e.pages[0].sections=e.pages[0].sections.filter(function(e){return t.wizUtils.isListSection(e)?(e.list=e.list.filter(function(e){return void 0===e.confidence||e.confidence>=t.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD}),e.list.length>0):!!t.wizUtils.isSingleBlockSection(e)&&(void 0===e.confidence||e.confidence>=t.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD)});var i=e.pages[0].sections.length;return this.log("removed low confidenceSections",{before:a,after:i}),e},e.prototype.getLargestMediaOfSameSize=function(e){return this.log("getting largest media items"),_.takeWhile(e.sort(function(e,t){return t.size-e.size}),function(e,t,a){return 0===t||e.size===a[t-1].size}).map(function(e){return e.mediaItem})},e.prototype.takeTopSections=function(t){return t.pages[0].sections=t.pages[0].sections.slice(0,e.MAX_SECTIONS),this.log("taking top sections",t.pages[0].sections),t},e.prototype.halfOrMoreHasMedia=function(e,t){return e>=t/2},e.prototype.log=function(e){for(var t,a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];(t=this.siteConverterLogs).trace.apply(t,[this.loggerId,e].concat(a))},e.MINIMUM_PARAGRAPH_LENGTH=50,e.MAX_SECTIONS=10,e}();angular.module("adiIntroInternal").service("wizWebsite",v);var I=function(){function e(e,t,a){this.$http=e,this.$log=t,this.$q=a}return e.$inject=["$http","$log","$q"],e.prototype.load=function(e){var t=this,a=this.$q.defer();return this.$http.get("http://www.wixstaging.com/_api/wixwiz-algo-server/analyzesite?adi=true&ashtml=false&isExternal=true&url="+e).then(function(e){e.data.error?(t.$log.error("SiteConverter Error: Toffee returned error object"),a.reject(e.data.error)):a.resolve(e.data)},function(e){a.reject(e)}),a.promise},e}();angular.module("adiIntroInternal").service("wizWebsiteLoader",I);var k;S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function e(e,t){this.cmsApi=e,this.introManager=t}return e.$inject=["cmsApi","introManager"],e.prototype.isStructureContainsVideo=function(e){return S(this,void 0,void 0,function(){var t;return T(this,function(a){switch(a.label){case 0:return[4,this.cmsApi.getStructureInfo(e)];case 1:return t=a.sent(),[2,_.some(t.pages[0].sections,function(e){return e.ceType===AdiCoreSanta.TpaWidgetTypes.Video_Widget})]}})})},e.prototype.fetchChannel=function(e){return S(this,void 0,void 0,function(){return T(this,function(t){return[2,new YoutubeFeedChannelService(e).getYoutubeChannelData()]})})},e.prototype.getChannelUrl=function(){return this.introManager.data.socialLinks&&this.introManager.data.socialLinks.length&&this.introManager.data.socialLinks[0].platform===e.PhotoSourceYoutube?this.introManager.data.socialLinks[0].url:""},e.prototype.introHasYoutubeChannel=function(){return this.getChannelUrl()&&this.isValidUrl(this.introManager.data.socialLinks[0].url)},e.prototype.isValidUrl=function(e){return new YoutubeFeedChannelService(e).isValidYtChannelId},e.prototype.createChannel=function(e){var t=new YoutubeFeedChannelService(e);return t.createVODChannel().then(function(e){return{channelId:e,serviceInstanse:t}}).catch(function(){return Promise.reject({serviceInstanse:t})})},e.PhotoSourceYoutube="youtube",e}();e.YoutubeChannelManager=t,angular.module("adiIntroInternal").service("youtubeChannelManager",t)}(A||(A={})),function(e){var t=function(){function e(e,t){var a=this;this.flags=e,this.$log=t,this.styles={},this.ifLog=function(e){return a.flags.debugWizSiteConverter?e:_.noop},this.ifLogExtraDebug=function(e){return a.flags.debugWizSiteConverterExtra?e:_.noop},this.defaultLoggerId=1e3,this.trace=this.ifLog(this.log),this.debug=this.ifLogExtraDebug(this.log),this.groupStart=function(e){return console.groupCollapsed("SC: "+e)},this.groupEnd=function(){return console.groupEnd()}}return e.$inject=["flags","$log"],e.prototype.log=function(e,t){for(var a,i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=this.style(e);(a=this.$log).info.apply(a,["%cSC>> "+t,r].concat(i))},e.prototype.style=function(e){return this.styles[e]||(this.styles[e]="color: #"+((1<<24)*Math.random()|0).toString(16)),this.styles[e]},e}();e.SiteConverterLogs=t,angular.module("adiIntroInternal").service("siteConverterLogs",t)}(k||(k={})),function(e){var t=function(){function e(e){this.urlParser=e}return e.$inject=["urlParser"],Object.defineProperty(e.prototype,"term",{get:function(){return decodeURIComponent(this.urlParser.getQueryStringValueByKey(e.termArgKey))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"structureId",{get:function(){return this.urlParser.getQueryStringValueByKey(e.structureIdArgKey)||"e51e11f3597e0c565deb792f"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"industryId",{get:function(){return this.urlParser.getQueryStringValueByKey(e.industryIdArgKey)||"9e0d43c23f82998a6ac269b5"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){var t=this.urlParser.getQueryStringValueByKey(e.verticalArgKey);if(t)return e.verticalQueryMap[t]||t},enumerable:!0,configurable:!0}),e.termArgKey="categoryName",e.structureIdArgKey="structureId",e.industryIdArgKey="industryId",e.verticalArgKey="vertical",e.verticalQueryMap={"online-store":"Stores",blog:"Blog",booking:"Bookings"},e}();e.IntroArguments=t,angular.module("adiIntroInternal").service("introArguments",t)}(A||(A={})),angular.module("adiIntroCommon").directive("focusIf",["$timeout",function(e){return{restrict:"A",link:function(e,t,a){var i=function(e){e&&t[0].focus()};a.focusIf?e.$watch(a.focusIf,i):i(!0)}}}]),angular.module("adiIntroCommon").directive("adiAutomation",function(){return{restrict:"A",scope:!1,link:function(e,t,a){a.$observe("adiAutomation",function(e){e&&angular.element(t).attr("adi-automation-label",e.toLowerCase().replace(/\s+/g,"-"))})}}});var M=function(){function e(){this.require="ngModel",this.scope={fieldTrack:"&"}}return e.prototype.link=function(e,t,a,i){var n=this;["input","textarea"].forEach(function(a){var r=t[0].tagName.toLowerCase()===a?t:t.find(a);r.on("focus",function(){return n.onFocus(i)}),r.on("blur",function(){return n.onBlur(i,e.fieldTrack)})})},e.prototype.onFocus=function(e){this.lastKnownValue=e.$viewValue},e.prototype.onBlur=function(e,t){var a=e.$viewValue;a!==this.lastKnownValue&&t({$old:this.lastKnownValue,$value:a}),this.lastKnownValue=a},e}();angular.module("adiIntroCommon").directive("fieldTrack",function(){return new M}),function(e){var t=function(){function e(){}return e.prototype.isMatchSelectable=function(e){return e&&!e.isTitle},e.prototype.onMatchesChange=function(e,t,a){e.$watch(function(){return t.matches},function(e,t){e!==t&&a(e)})},e.prototype.onKeyDown=function(e,t){var a=e.keydown;e.keydown=function(i){a.apply(e,[i]),t(i)}},e}();e.IntroMdBase=t}(A||(A={}));var C=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();!function(e){var t=function(e){function t(t){var a=e.call(this)||this;return a.$timeout=t,a.restrict="A",a.require="mdAutocomplete",a}return C(t,e),t.$inject=["$timeout"],t.prototype.link=function(e,t,a,i){var n=this;this.$timeout(function(){return n.initPlaceholder(i,t,a)}),this.onMatchesChange(e,i,function(t){n.updatePlaceholder(e,i,t[0]||null)}),this.onKeyDown(i,function(t){n.onPlaceholderKeydown(e,i,t.keyCode)})},t.prototype.initPlaceholder=function(e,a,i){var n=this,r=angular.element('<input class="'+t.MD_PLACEHOLDER_CLASS+" "+i.introMdPlaceholder+'" tabindex="-1" />')[0];r.style.opacity="0";var o=a[0].querySelector("input");o.parentNode.insertBefore(r,o.nextSibling),o.addEventListener("keyup",function(){r.value.indexOf(o.value)<0&&(r.value="")});var s=e.select;e.select=function(t){s.apply(e,[t]),r.value=""},this.updatePlaceholder=function(e,t,a){var s;if(n.isMatchSelectable(a)){var l=o.value,c=i.mdItemText?e.$eval(i.mdItemText,((s={})[t.itemName]=a,s)):a;r.value=n.getPlaceholderText(l,c),r.style.opacity="1"}else r.value=""}},t.prototype.getPlaceholderText=function(e,t){var a=t.toLowerCase().indexOf(e.replace(/^\s+/,"").toLowerCase()),i=a+e.replace(/^\s+/,"").length;return e+(a>=0?t.substr(i):"")},t.prototype.onPlaceholderKeydown=function(e,t,a){if(9===a){var i=t.scope.searchText,n=t.matches[0];i&&this.isMatchSelectable(n)&&t.select(0)}},t.MD_PLACEHOLDER_CLASS="intro-md-placeholder",t}(e.IntroMdBase);angular.module("adiIntroAppInternal").directive("introMdPlaceholder",["$timeout",function(e){return new t(e)}])}(A||(A={})),function(e){var t=function(){function e(){this.restrict="A"}return e.prototype.handleMouseEvents=function(e){return!1},e.prototype.unhandleMouseEvents=function(e){e.off("mouseenter.intro"),e.off("mouseleave.intro")},e.prototype.link=function(t,a,i){var n=this,r=!1;i.$observe(e.MD_ITEM_DISABLED,function(t){if(t||r){for(var i=a[0];i&&"li"!==i.tagName.toLowerCase();)i=i.parentElement;var o=angular.element(i);t?(o.addClass(e.MD_ITEM_DISABLED_CLASS),n.handleMouseEvents(o),r=!0):(o.removeClass(e.MD_ITEM_DISABLED_CLASS),n.unhandleMouseEvents(o),r=!1)}})},e.MD_ITEM_DISABLED="introMdItemDisabled",e.MD_ITEM_DISABLED_CLASS="intro-md-item-disabled",e}();angular.module("adiIntroAppInternal").directive("introMdItemDisabled",function(){return new t})}(A||(A={}));C=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();!function(e){var t=function(t){function a(a,i,n,r,o){var s=t.call(this)||this;return s.flags=a,s.introWindow=i,s.introStep=n,s.$timeout=r,s.$mdUtil=o,s.restrict="A",s.require="mdAutocomplete",s.isLoaded=!0,s.onResize=_.debounce(function(){return s.toggleVisibility(!1)},e.IntroStep.RESIZE_DEBOUNCE),s}return C(a,t),a.$inject=["flags","introWindow","introStep","$timeout","$mdUtil"],a.prototype.removeDropMask=function(){this._disableScrollAround=this.$mdUtil.disableScrollAround,this.$mdUtil.disableScrollAround=angular.noop},a.prototype.onDestroy=function(){this.$mdUtil.disableScrollAround=this._disableScrollAround,this.introWindow.off("resize",this.onResize)},a.prototype.toggleVisibility=function(e){var t=this,i=angular.element(a.CLASS_SUGGESTIONS);i[0]&&(e&&this.isLoaded?this.$timeout(function(){i[0].style.opacity="1",t.introWindow.trigger("resize")},0,!1):i[0].style.opacity="0")},a.prototype.updateAutoCompleteHiddenState=function(e,t,a,i){e.$eval(a.mdListHiddenChanged,{$hidden:t}),a.hiddenOverride&&(i.hidden=0===i.matches.length||e.$eval(a.hiddenOverride))},a.prototype.link=function(e,t,i,n){var r=this;this.removeDropMask(),i.introMdDisableOnResize||this.introWindow.on("resize",this.onResize),i.introMdDisableSuggestListMouseUp&&(n.mouseUp=angular.noop),e.$watch(function(){return r.introStep.contentBoxPosition},function(){return r.toggleVisibility(!0)}),e.$on("$destroy",function(){return r.onDestroy()}),e.$watch(function(){return n.hidden},function(t){r.updateAutoCompleteHiddenState(e,t,i,n)}),e.$watch(function(){return e.$ctrl.isTitleHovered},function(e,t){$(a.CLASS_SUGGESTIONS_UL).toggleClass("onRelatedResult",e)});var o=angular.element(a.CLASS_SUGGESTIONS);o.addClass(a.CLASS_SCROLLER),this.$timeout(function(){e.$eval(i.dontStoreMatches)||(n.matches=r.introStep.disposable.categoriesMatches||[]),r.updateAutoCompleteHiddenState(e,0===n.matches.length,i,n)},500),o.perfectScrollbar({minScrollbarLength:43,suppressScrollX:!0}),i.introMdOnSelect&&e.$watch(function(){return n.scope.selectedItem},function(t,a){null!==t&&a!==t&&r.handleMdOnSelect(n,t,e,i)}),i.introMdLoaded&&(this.isLoaded=!1,this.$timeout(function(){return e.$watch(i.introMdLoaded,function(e){r.isLoaded=e,r.toggleVisibility(e)})})),this.onMatchesChange(e,n,function(t){var a=n.scope.searchText;e.$eval(i.mdSearchChanged,{$term:a,$matches:t}),r.introStep.disposable.categoriesMatches=t,r.$timeout(function(){n.index=-1,o.scrollTop(0),o.perfectScrollbar("update")})}),this.onKeyDown(n,function(e){switch(e.keyCode){case 13:r.onEnterKeyDown(e,n);break;case 38:case 40:r.onArrowKeyDown(n,e,o)}}),e.$watch(function(){return e.$eval(i.hiddenOverride)},function(e){n.hidden=_.isUndefined(e)?0===n.matches.length:e})},a.prototype.handleMdOnSelect=function(e,t,a,i){var n,r=a.$eval(i.mdItemText,((n={})[e.itemName]=t,n));this.$timeout(function(){var t=a.$eval(i.introMdOnSelect,{$term:r});t&&t.then(function(t){return e.matches=t})})},a.prototype.onArrowKeyDown=function(e,t,a){var i=e.index;i>=0&&(this.isMatchSelectable(e.matches[i])||(e.index=i+(38===t.keyCode?-1:1)),_.each(e.matches,function(e){e.isExactMatch=!1}),this.fixTheScroll(a,e.index))},a.prototype.onEnterKeyDown=function(e,t){var a=t.index;a<0||(e.preventDefault(),this.isMatchSelectable(t.matches[a])?t.scope.selectedItem&&t.select(a):t.select(0))},a.prototype.fixTheScroll=function(e,t){},a.CLASS_SUGGESTIONS_UL=".md-autocomplete-suggestions",a.CLASS_SUGGESTIONS=".md-virtual-repeat-scroller",a.CLASS_SCROLLER="intro-md-aucotomplete-scroller",a}(e.IntroMdBase);angular.module("adiIntroInternal").directive("introMdAutocomplete",["flags","introWindow","introStep","$timeout","$mdUtil",function(e,a,i,n,r){return new t(e,a,i,n,r)}])}(A||(A={})),function(e){var t=function(){function e(){this.restrict="A"}return e.prototype.link=function(e,t,a){angular.element("._md-select-menu-container md-content").perfectScrollbar({minScrollbarLength:43})},e}();angular.module("adiIntroInternal").directive("introMdSelect",function(){return new t})}(A||(A={})),angular.module("adiIntroInternal").directive("introGPlacesAutocomplete",["$parse",function(e){return{restrict:"A",require:"^ngModel",link:function(t,a,i,n){var r=e(i.introGPlacesAutocomplete)(t);n.$formatters.push(function(e){var t=e;return Array.isArray(r.displayKeys)&&_.isObject(n.$modelValue)&&(t=r.displayKeys.map(function(e){return n.$modelValue[e]}).join(", ")),t})}}}]),function(e){var t=function(){function e(){this.require="ngModel"}return e.prototype.link=function(e,t,a,i){"textarea"===t[0].tagName.toLowerCase()&&t.on("keydown paste",function(e){})},e}();e.IntroAddressFormatter=t,angular.module("adiIntroInternal").directive("introAddressFormatter",function(){return new t})}(A||(A={})),function(e){var t=function(){function t(t,a,i,n,r,o,s,l,c,d,u){var h=this;if(this.$rootScope=t,this.$element=a,this.$state=i,this.$window=n,this.introStep=r,this.urlParser=o,this.flags=c,this.introManager=d,this.$injector=u,this.verticalQueryMap={"online-store":AdiCoreSanta.TpaTypes.Stores,blog:AdiCoreSanta.TpaTypes.Blog,booking:AdiCoreSanta.TpaTypes.Bookings},this.introManager.init(this.getVertical()),i.current.name===e.INTRO_STATES.INTRO)if(this.introManager.hasCategorySearchArguments())this.introManager.useCategorySearchArguments(),this.introManager.shouldSkipCategoriesSearch=!0,i.go(this.introManager.getServiceOffersOrAppsRecommendationStep());else{var p=e.INTRO_STATES.INTRO_CATEGORY_SEARCH;i.go(p)}l({label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(e){return s.intro.fullStoryStarted(e)}}),this.registerKeyDown(),this.updateLastNavigation(),this.beforeStateChangeWatcher=t.$on("$stateChangeStart",function(e,t,a,i){return h.updateLastNavigation()}),this.afterStateChangeWatcher=t.$on("$stateChangeSuccess",function(e,t,a,i){return h.updateLastNavigation()})}return t.$inject=["$rootScope","$element","$state","$window","introStep","urlParser","consumerBiLogger","fullStoryLoader","flags","introManager","$injector"],t.prototype.getVertical=function(){if(this.flags.introRedirectToServiceOffer)return this.introManager.getArgumentVertical();var e=void 0,t=this.urlParser.queryParams();return t.vertical&&(e=this.verticalQueryMap[t.vertical]||t.vertical),e},t.prototype.registerKeyDown=function(){var e=this;this.keyDownHandler=_.debounce(function(t){if((t.metaKey||t.ctrlKey)&&t.shiftKey&&t.altKey){var a=String.fromCharCode(t.keyCode);"M"!==a&&"J"!==a||(e.flags.emptyPage=e.flags.emptyPage||"J"===a,t.preventDefault(),function(){e.introManager.data.category=e.introManager.data.category||{};var t=e.introManager.data.category.structureId=e.introManager.data.category.structureId||"40dc538a8a6c3e2dae342922",a=e.introManager.data.category.industryId=e.introManager.data.category.industryId||"e79e5765052b89b579c9a4c2";e.introManager.data.name=e.introManager.data.name||"quickStory",e.$injector.get("applicationState").goToBuilderDeepLink(t,a,"quickStory")}())}},500),angular.element(this.$window).keydown(this.keyDownHandler)},t.prototype.updateLastNavigation=function(){this.lastNavigation="back"===this.introStep.guessLastNavigation()?"is-back":"is-next"},t.prototype.$onDestroy=function(){angular.element(this.$window).unbind("keydown",this.keyDownHandler),this.introStep.dispose()},t}();e.Intro=t,angular.module("adiIntroInternal").component("intro",{controller:t,templateUrl:"views/intro/intro.html"})}(A||(A={}));p=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function t(e,t,a,i,n,r,o,s,l,c,d,u,h,p,f){var g=this;this.introStep=e,this.flags=t,this.$translate=a,this.$element=i,this.$scope=n,this.introWindow=r,this.applicationParameters=o,this.consumerBiLogger=s,this.introManager=l,this.introContentTpa=c,this.cmsApi=d,this.validation=u,this.clientTopology=h,this.youtubeChannelManager=p,this.introAppsRecommendationManager=f,this.lastSearchedCategories=[],this.relatedResultsTitle={isTitle:!0,term:""},this.showRelatedResultsTitle=!0,this.tempHighlightRegex={},this.searchTerm="",this.searchChanged=!1,this.lastShowGenericPopUpState=!1,this.isValidTerm=function(){return!g.lastSearchedTerm||"string"==typeof g.lastSearchedTerm&&g.cmsApi.sanitize(g.lastSearchedTerm).length>0},this.inSearch=function(){return!g.result&&g.lastSearchedTerm&&g.isValidTerm()},this.shouldShowGenericPopover=function(){return g.inSearch()&&g.noMatchingResults()},this.noMatchingResults=function(){return 0===g.lastSearchedCategories.length||g.lastSearchedCategories[0]===g.relatedResultsTitle},this.isListLoaded=function(){return g.showResults},this.thinResult=function(e){return _.pick(e,"industryId","structureId","term","block","redirectUrl","experiment")},this.isTitleHovered=!1,this.isEmptySearch=function(){return g.inSearch()&&0===g.lastSearchedCategories.length},this.vertical=this.introManager.vertical,this.flags.hardcodedIntroSuggestions?this.preSuggestionsByVertical=this.introManager.shouldTranslatePreSuggestions()?this.introManager.preSuggestionsByVertical:this.introManager.hardcodedPreSuggestionsByVertical:this.preSuggestionsByVertical=this.introManager.preSuggestionsByVertical,this.defaultCategories=this.introManager.generalCategories.General,this.CURRENT_LOCALE_BLOCKS=!this.flags.unblockNonEnglishLanguages&&["pt","de","fr","es","ru","ja"].indexOf(this.clientTopology.locale)>-1,this.introManager.vertical&&this.introManager.generalCategories[this.introManager.vertical]&&(this.defaultCategories=[].concat(this.introManager.generalCategories[this.introManager.vertical],this.defaultCategories)),this.validCategory=this.introManager.data.validCategory,this.result&&(this.selected=this.result,this.searchTerm=this.result.term,this.lastSearchedTerm=this.result.term),this.flags.MED&&(this.showRelatedResultsTitle=!1,n.$watch("$ctrl.inputFocused()",function(e,t){e!==t&&angular.element(window).triggerHandler("resize")}))}return t.$inject=["introStep","flags","$translate","$element","$scope","introWindow","applicationParameters","consumerBiLogger","introManager","introContentTpa","cmsApi","validation","clientTopology","youtubeChannelManager","introAppsRecommendationManager"],t.prototype.$onInit=function(){this.introAppsRecommendationManager.reset(),this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_CATEGORY_SEARCH,null,!1)},t.prototype.isSameCategory=function(e,t){return e.industryId===t.industryId&&e.structureId===t.structureId},t.prototype.isValidCategory=function(){return this.result&&(!this.isSameCategory(this.result,e.DEFAULT_CATEGORY)||this.result.term===e.DEFAULT_CATEGORY.term)},Object.defineProperty(t.prototype,"result",{get:function(){return this.introManager.data.category},set:function(e){this.introManager.data.category=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"genericPopoverPosition",{get:function(){return this.introStep.backdropBoxPosition?{bottom:this.introWindow.getWindowDimensions().windowHeight-(this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height)+12,left:this.introStep.contentBoxPosition.x+e.IntroWindow.CONTENT_WIDTH+58}:null},enumerable:!0,configurable:!0}),t.prototype.getVerticalTranslation=function(e){var t=this.introManager.vertical;if(!t)return this.$translate.instant(e);var a=e+"-"+t,i=this.$translate.instant(a);return i&&i!==a?i:this.$translate.instant(e)},t.prototype.next=function(){return S(this,void 0,void 0,function(){var e,t;return T(this,function(a){switch(a.label){case 0:return!this.result||this.searchTerm!==this.result.term&&!this.noMatchingResults()?[2]:(e=this.nextStep(),this.updateIntroLastSearchedTerm(),this.introManager.data.validCategory=!0,this.introManager.setDefaultBIValues(),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(e,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"next",this.result.structureId,this.result.industryId,!1),this.prepareToProceed(),this.showResults=!1,this.isDropdownSuggestionsHidden=!0,this.introStep.next(e),this.flags.MED||!this.result.structureId?[3,2]:[4,this.youtubeChannelManager.isStructureContainsVideo(this.result.structureId)]);case 1:t=a.sent(),this.introManager.data.videoStructure=t,a.label=2;case 2:return[2]}})})},t.prototype.updateIntroLastSearchedTerm=function(){this.introManager.data.lastSearchedTerm=this.searchTerm||this.result&&this.result.term||""},t.prototype.nextStep=function(){if(this.flags.MED&&this.isBlocked(this.result)&&!this.CURRENT_LOCALE_BLOCKS){var t=this.introManager.getBusinessCategoryResultByTerm(this.result.term);this.result=t?p({},this.result,t,{block:!1}):_.clone(e.DEFAULT_CATEGORY)}return this.flags.MED&&!this.CURRENT_LOCALE_BLOCKS||!this.isBlocked(this.result)?this.isSingleEvent(this.result)?(this.introManager.data.isSingleEvent=!0,e.INTRO_STATES.INTRO_BUSINESS_NAME):this.introManager.getServiceOffersOrAppsRecommendationStep():e.INTRO_STATES.INTRO_BLOCKED_CATEGORY},t.prototype.isBlocked=function(e){return e.block||(!this.flags.wixEvents||this.flags.MED)&&this.isSingleEvent(e)||this.experimentBlock(e)},t.prototype.experimentBlock=function(e){return!!e.experiment&&!this.flags[e.experiment]},t.prototype.isSingleEvent=function(t){return this.introContentTpa.categoryType(t)===e.CategoryTypes.SingleEvent},t.prototype.skip=function(){var t=this.introManager.getServiceOffersOrAppsRecommendationStep(),a=_.clone(e.DEFAULT_CATEGORY);this.introManager.data.validCategory=!this.searchTerm||this.isValidCategory(),this.result=a,this.updateIntroLastSearchedTerm(),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(t,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"skip",this.result.structureId,this.result.industryId,!1),this.prepareToProceed(),this.introStep.skip(t)},t.prototype.sanitizePersonallyIdentifiableInfo=function(e){if(this.validation.isEmail(e)){var t=e.indexOf("@");if(t>0)return e.substring(0,t)}return e},t.prototype.transformData=function(e){var t=function(e,t,a){return _.includes(_.keys(e),t)&&(e[a]=_.cloneDeep(e[t]),delete e[t]),e};e&&e.results&&e.results.forEach(function(e){return t(e,"displayName","term")}),e&&e.relatedResults&&e.relatedResults.forEach(function(e){return t(e,"displayName","term")})},t.prototype.inputElm=function(){return this._inputElm&&0!==this._inputElm.length||(this._inputElm=this.$element.find("input")),this._inputElm},t.prototype.prepareToProceed=function(){this.result=this.result?this.thinResult(this.result):_.clone(e.DEFAULT_CATEGORY),this.updateServiceOffers(this.result)},t.prototype.updateServiceOffers=function(e){var t=_.find(AdiCoreSanta.tpaConfigs,function(t){return _.includes(t.structureIds,e.structureId)});if(t){var a=this.introManager.selectedOfferByType(t.type);a&&(a.checked=!1)}},t.prototype._onSelectFromEmptyList=function(e,t){this.result=e,this.introManager.data.selectionSource="no matches list",this.consumerBiLogger.intro.businessTypeWasSelected("category",e.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),t,this.introManager.data.selectionSource),this.next()},t.prototype._onExampleClick=function(e){this.introManager.data.selectionSource="example list",this.lastSelectedFromListValue=e,this.consumerBiLogger.intro.businessTypeWasSelected("category",e,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),0,this.introManager.data.selectionSource)},t.prototype.addRelatedLabel=function(e){return this.selected?e+" - "+(this.selected.isRelated?"related":"unRelated"):e},t.prototype._onSelectedFromList=function(e,t){this.introManager.data.selectionSource=this.addRelatedLabel("category list"),this.lastSelectedFromListValue=e,this.selected.prefix?this.consumerBiLogger.intro.businessTypeWasSelected("group",e,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),t,this.introManager.data.selectionSource):this.consumerBiLogger.intro.businessTypeWasSelected("category",e,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),t,this.introManager.data.selectionSource)},t.prototype._onSearchChanged=function(e,t,a){this.result=a;var i=this.lastSelectedFromListValue===e;e&&this.lastSearchedTerm!==e&&!i&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(this.sanitizePersonallyIdentifiableInfo(e),t.length),this.searchChanged&&(this.introManager.data.validCategory=!!a,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,i||(this.lastSearchedTerm=e),t&&0!==t.length&&t[0]!==this.relatedResultsTitle||this.consumerBiLogger.intro.genericCategoryDialogIsShown(e),this.updateIntroLastSearchedTerm()},t.prototype.getPreSuggestionsByVertical=function(){var e=this.preSuggestionsByVertical[this.introManager.vertical]||(this.flags.hardcodedIntroSuggestions&&!this.introManager.shouldTranslatePreSuggestions()?t.HARDCODED_DEFAULT_PRE_SUGGESTIONS:t.DEFAULT_PRE_SUGGESTIONS);return this.flags.MED&&this.flags.betterBusinessCategoryPage?e.slice(0,4):e},t.prototype.onExampleClick=function(e){var t=e.target.textContent.trim();this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",t,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),0,this.introManager.data.selectionSource),this.searchTerm=t,angular.element("[name=businessTypeInput]").focus()},t.prototype.getHighlightText=function(e){return e.isTitle?"":(this.maybeUpdateHighlightRegex(this.searchTerm),this.tempHighlightRegex.regex.test(e.term)?this.tempHighlightRegex.termToHighlight:e.term)},t.prototype.maybeUpdateHighlightRegex=function(e){if(this.tempHighlightRegex.term!==e){this.tempHighlightRegex.term=e,this.tempHighlightRegex.termToHighlight=e.replace(/&/g,"&amp;");try{this.tempHighlightRegex.regex=RegExp("^"+e+"|\\s"+e,"i")}catch(e){}}},t.prototype.onSearchChanged=function(e,t){this.lastSearchedTerm!==e&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(this.sanitizePersonallyIdentifiableInfo(e),t.length);var a=_.findIndex(t,function(e){return e.isTitle}),i=a>=0?t.slice(0,a):t,n=e.replace?e:"",r=n.replace(/[-+\/.;()'&]/gi,""),o=_.findIndex(i,function(e){return e.term&&(e.term.toLowerCase()===r.toLowerCase()||e.term.toLowerCase()===n.toLowerCase())});o>=0?(t[o].isExactMatch=!0,this.introManager.data.selectionSource="match_text",this.result=i[o]):this.result&&this.getDisplayText(this.result)!==e&&(this.result=null),this.searchChanged&&(this.introManager.data.validCategory=!!this.result,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=t,this.lastSearchedTerm=e,!!this.shouldShowGenericPopover()&&!this.lastShowGenericPopUpState&&this.consumerBiLogger.intro.genericCategoryDialogIsShown(e),""!==e?this.showResults=!0:this.validCategory=!1,this.updateIntroLastSearchedTerm()},t.prototype.itemClicked=function(e,t){t&&e.stopPropagation()},t.prototype.onSelectedFromList=function(e){var t=this;if(this.introManager.data.selectionSource=this.addRelatedLabel("category list"),this.selected){var a=this.lastSearchedCategories.indexOf(this.selected);this.selected.prefix?(this.searchTerm=this.selected.prefix+" ",this.consumerBiLogger.intro.businessTypeWasSelected("group",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),a,this.introManager.data.selectionSource)):(this.result=this.selected,this.consumerBiLogger.intro.businessTypeWasSelected("category",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),a,this.introManager.data.selectionSource)),this.validCategory=!!this.result}if(this.updateIntroLastSearchedTerm(),this.lastSearchedTerm.toLowerCase()!==e.toLowerCase())return this.search(e).then(function(a){return a.filter(function(a){return t.getDisplayText(a)!==e})});this.next()},t.prototype.search=function(e,a,i){var n=this;return void 0===e&&(e=this.searchTerm),void 0===a&&(a=200),void 0===i&&(i=200),this.cmsApi.elasticSearch(e,a,i).then(function(e){n.transformData(e);var a=e.results.slice(0,t.RESULTS_LIMIT),i=t.RESULTS_THRESHOLD_NEW;if(a.length<i&&e.relatedResults.length>0){var r=e.relatedResults.map(function(e){return e.isRelated=!0,e});return a.concat(n.showRelatedResultsTitle?[n.relatedResultsTitle]:[],r)}return a})},t.prototype.getDisplayText=function(e){return e.prefix?e.prefix+"...":e.term},t.prototype.relatedResultsEnter=function(e){this.isTitleHovered=!!e},t.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},t.prototype.blurInput=function(){this.inputElm().blur()},t.prototype.inputEmptyAndUnfocused=function(){return this.inputEmpty()&&!this.inputFocused()},t.prototype.inputEmpty=function(){return""===this.inputElm().val()},t.prototype.inputFocused=function(){var e=this.inputElm();return e&&e[0]===document.activeElement},t.DEFAULT_PRE_SUGGESTIONS=e.DEFAULT_PRE_SUGGESTIONS,t.HARDCODED_DEFAULT_PRE_SUGGESTIONS=e.HARDCODED_DEFAULT_PRE_SUGGESTIONS,t.RESULTS_THRESHOLD=7,t.RESULTS_THRESHOLD_NEW=8,t.RESULTS_LIMIT=200,t}();e.IntroCategorySearch=t,angular.module("adiIntroInternal").component("introCategorySearch",{controller:t,templateUrl:"views/intro/intro-category-search.html"})}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r,o,s,l,c,d,u,h,p){this.introStep=e,this.flags=t,this.$http=a,this.$timeout=i,this.introManager=n,this.consumerBiLogger=r,this.ccFlags=o,this.$translate=s,this.introContentTpa=l,this.captcha=c,this.$scope=d,this.clientTopology=u,this.experimentManager=h,this.experimentParser=p,(this.flags.MED||!this.flags.AnonymousFlowEnabled||this.clientTopology.hasSession)&&this.introStep.next(this.getNextPage())}return t.$inject=["introStep","flags","$http","$timeout","introManager","consumerBiLogger","ccFlags","$translate","introContentTpa","captcha","$scope","clientTopology","experimentManager","experimentParser"],t.prototype.$onInit=function(){var t=this;this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_RECAPTCHA,null,!1),this.userIsValid=!1,this.$timeout(function(){return t.captcha.create(function(e){return t.$scope.$apply(function(){t.userValid(e),t.sendBIOnReCaptchaResult("success")})},function(){return t.$scope.$apply(function(){t.userNotValid(),t.sendBIOnReCaptchaResult("expired")})},function(){return t.$scope.$apply(function(){t.userNotValid(),t.sendBIOnReCaptchaResult("error")})})})},t.prototype.sendBIOnReCaptchaResult=function(e){this.consumerBiLogger.intro.recaptchaIMNotARobotResult(e)},t.prototype.isSingleEvent=function(t){return this.introContentTpa.categoryType(t)===e.CategoryTypes.SingleEvent},t.prototype.getNextPage=function(){return this.isSingleEvent(this.introManager.data.lastSearchedTerm)?e.INTRO_STATES.INTRO_BUSINESS_NAME:this.introManager.getServiceOffersOrAppsRecommendationStep()},t.prototype.addExperiments=function(){var e=this;this.experimentManager.$$queryPetri({scope:t.EXPERIMENTS_SCOPE}).then(function(t){_.each(t,function(t,a){var i=e.experimentParser.getFlagData(a,t);e.flags[i.name]=i.value,e.ccFlags[i.name]=i.value})})},t.prototype.next=function(){var e=this;this.consumerBiLogger.intro.recaptchaPageNavigationClick("next"),this.$http.get("/_api/wix-html-login-webapp/issue/session?reCaptcha="+this.key).then(function(t){if(200===t.status){e.clientTopology.hasSession=!0,e.clientTopology.isAnonymous=!0,e.addExperiments();var a=e.getNextPage();return e.introStep.next(a),a}})},t.prototype.back=function(){this.consumerBiLogger.intro.recaptchaPageNavigationClick("back"),this.introStep.back(e.INTRO_STATES.INTRO_CATEGORY_SEARCH)},t.prototype.getTitle=function(){return this.$translate.instant("intro.recaptcha.title")},t.prototype.getTerms=function(){return this.$translate.instant("intro.recaptcha.terms")},t.prototype.userValid=function(e){this.userIsValid=!0,this.key=e},t.prototype.userNotValid=function(){this.userIsValid=!1,this.key=""},t.EXPERIMENTS_SCOPE="onboarding-server",t}();e.IntroReCaptcha=t,angular.module("adiIntroInternal").component("introRecaptcha",{controller:t,templateUrl:"views/intro/intro-recaptcha.html"})}(A||(A={})),function(e){var t=function(){function e(e,t,a){this.$q=e,this.$timeout=t,this.scaling=!1,this.showButtons=!0,this.showResults=!a}return e.prototype.startScale=function(){var e=this.$q.defer();return this.showResults=!1,this.showButtons=!1,this.scaling=!0,this.$timeout(function(){return e.resolve()}),e.promise},e.prototype.endScale=function(){this.showResults=!0,this.showButtons=!0,this.scaling=!1},e}();e.IntroVisualIndications=t}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n){this.introStep=e,this.flags=t,this.introContentTpa=a,this.introManager=i,this.consumerBiLogger=n,this.selected=i.data.category}return t.$inject=["introStep","flags","introContentTpa","introManager","consumerBiLogger"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BLOCKED_CATEGORY,null,!1)},Object.defineProperty(t.prototype,"blockedRedirectUrl",{get:function(){return this.flags.wixEvents&&this.introContentTpa.categoryType(this.selected)===e.CategoryTypes.SingleEvent?"https://www.wix.com/website/templates/html/events":this.selected.redirectUrl?this.selected.redirectUrl:"https://www.wix.com/website/templates/html"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),t.prototype.onNext=function(){this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick("pro editor",this.selected.term,this.selected.term,this.introManager.data.selectionSource,"escape",this.selected.structureId,this.selected.industryId,!1)},t.prototype.handleMEDNext=function(){this.introManager.data.category=_.clone(e.DEFAULT_CATEGORY);var t=e.INTRO_STATES.INTRO_SERVICES_OFFER;this.introStep.next(t)},t.prototype.back=function(){this.introStep.back(e.INTRO_STATES.INTRO_CATEGORY_SEARCH)},t}();e.IntroBlockedCategory=t,angular.module("adiIntroInternal").component("introBlockedCategory",{controller:t,templateUrl:"views/intro/intro-blocked-category.html"})}(A||(A={}));S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function t(t,a,i,n,r,o,s,l){var c=this;(this.introStep=t,this.flags=a,this.introContentTpa=i,this.consumerBiLogger=n,this.applicationParameters=r,this.introManager=o,this.clientTopology=s,this.youtubeChannelManager=l,this.filteredServiceOffers=[],this.storesSelectedState=function(){return c.serviceSelectedState(AdiCoreSanta.TpaTypes.Stores)},this.bookingsSelectedState=function(){return c.serviceSelectedState(AdiCoreSanta.TpaTypes.Bookings)},this.getSubscribersSelectedState=function(){return c.serviceSelectedState(AdiCoreSanta.TpaTypes.GetSubscribers)},this.blogSelectedState=function(){return c.serviceSelectedState(c.flags.oldBlog?AdiCoreSanta.TpaTypes.Blog:AdiCoreSanta.TpaTypes.Blog2)},this.introManager.data.category||(this.introManager.data.category=_.clone(e.DEFAULT_CATEGORY)),this.selectedCategoryType()===e.CategoryTypes.Photographer)&&(this.offers.find(function(e){return e.type===AdiCoreSanta.TpaTypes.Stores}).checked=!1)}return t.$inject=["introStep","flags","introContentTpa","consumerBiLogger","applicationParameters","introManager","clientTopology","youtubeChannelManager"],t.prototype.$onInit=function(){var t=this;this.introManager.data.serviceOffer&&(0===this.introManager.data.serviceOffer.length||this.introManager.data.serviceOffer.length>6&&!this.flags.appsRecommendation&&!this.flags.appsRecommendation2)&&(this.introManager.data.serviceOffer=this.introManager.getOldServiceOffersAvailable()),this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SERVICES_OFFER,null,!1),this.introManager.hasCategorySearchArguments()&&(this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_CATEGORY_SEARCH,null,!0),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(e.INTRO_STATES.INTRO_SERVICES_OFFER,this.introManager.data.category.term,"","","next",this.introManager.data.category.structureId,this.introManager.data.category.industryId,!0)),this.flags.serviceOffersNewUI&&(this.staticsUrl=this.clientTopology.staticsUrl,this.filteredServiceOffers=this.offers.filter(function(e){return t.shouldShowOffer(e.type)}))},t.prototype.onOfferChanged=function(){this.consumerBiLogger.intro.servicesSelected(this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState())},t.prototype.anyOfferCheckd=function(){return this.offers.some(function(e){return e.type!==AdiCoreSanta.TpaTypes.Chat&&e.checked})},t.prototype.selectedCategoryType=function(){return!!this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)},t.prototype.shouldShowOffer=function(t){if(this.selectedCategoryType()===e.CategoryTypes.Photographer&&t===AdiCoreSanta.TpaTypes.Stores)return!1;if(t===AdiCoreSanta.TpaTypes.Chat)return!1;var a=this.introManager.data.category.structureId,i=AdiCoreSanta.tpaConfigs[t];return t!==this.introManager.vertical&&!_.includes(i.structureIds,a)},Object.defineProperty(t.prototype,"offers",{get:function(){return this.introManager.data.serviceOffer},enumerable:!0,configurable:!0}),t.prototype.getSkipLabel=function(){return this.flags.renameSkipInServiceOffers?"intro.maybe-later":""},t.prototype.next=function(){return S(this,void 0,void 0,function(){var t,a;return T(this,function(i){switch(i.label){case 0:return t=this.introManager.data.category.structureId,this.introManager.hasCategorySearchArguments()?this.flags.MED||!t?[3,2]:[4,this.youtubeChannelManager.isStructureContainsVideo(t)]:[3,2];case 1:a=i.sent(),this.introManager.data.videoStructure=a,i.label=2;case 2:return this.consumerBiLogger.intro.selectServicesPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_NAME,"next",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_NAME),[2]}})})},t.prototype.uncheckOffers=function(){var e=this;this.introManager.data.serviceOffer.forEach(function(t){e.shouldShowOffer(t.type)&&(t.checked=!1)})},t.prototype.skip=function(){this.uncheckOffers(),this.consumerBiLogger.intro.selectServicesPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_NAME,"skip",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.skip(e.INTRO_STATES.INTRO_BUSINESS_NAME)},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_CATEGORY_SEARCH;this.consumerBiLogger.intro.selectServicesPageNavigationClick(t,"back",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introManager.shouldSkipCategoriesSearch?this.introStep.browserBack():this.introStep.back(t)},t.prototype.serviceSelectedState=function(e){var t=_.find(this.offers,function(t){return t.type===e});return this.shouldShowOffer(e)?t&&t.checked.toString():"true (default)"},t}();e.IntroServiceOffer=t,angular.module("adiIntroInternal").component("introServiceOffer",{controller:t,templateUrl:"views/intro/intro-service-offer.html"})}(A||(A={}));var E;S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function t(e,t,a,i,n,r,o,s,l,c,d){var u=this;this.introStep=e,this.flags=t,this.introManager=a,this.clientTopology=i,this.consumerBiLogger=n,this.youtubeChannelManager=r,this.introContentTpa=o,this.introAppsRecommendationManager=s,this.$scope=l,this.$translate=c,this.$timeout=d,this.concatApps=function(e){var t=u.$translate.instant("intro.apps-recommendation.installed-apps.and-operator");return e.slice(0,-1).join(", ")+(e.length>1?" "+t+" ":"")+e.slice(-1)},this.getHiddenInstalledApps=function(){return u.introManager.data.serviceOffer.filter(function(e){return e.checked&&!e.show&&u.introAppsRecommendationManager.shouldInstallApp(e.type)})},this.convertAppsTypesToNames=function(e){var t,a=((t={})[AdiCoreSanta.TpaTypes.Stores]={text:u.$translate.instant("intro.apps-recommendations.online-store.feature-name")},t[AdiCoreSanta.TpaTypes.Blog]={text:u.$translate.instant("intro.apps-recommendations.blog.feature-name")},t[AdiCoreSanta.TpaTypes.Blog2]={text:u.$translate.instant("intro.apps-recommendations.blog.feature-name")},t[AdiCoreSanta.TpaTypes.Bookings]={text:u.$translate.instant("intro.apps-recommendations.bookings.feature-name")},t);return e.map(function(e){return a[e.type]?""+a[e.type].text:null}).filter(function(e){return e})},this.isHiddenAppInstalled=function(){return u.flags.appsRecommendation2&&0!==u.getHiddenInstalledApps().length},this.getDescriptionMessage=function(){if(u.flags.appsRecommendation2){var e=u.getHiddenInstalledApps();if(0===e.length)return u.$translate.instant("intro.apps-recommendation.description");var t=u.convertAppsTypesToNames(e);return u.$translate.instant("intro.apps-recommendation.installed-apps.description",{installedAppsStr:u.concatApps(t)})}return u.$translate.instant("intro.apps-recommendation.description")},this.flagValidation(),this.introManager.fillMissingData(),this.staticsUrl=this.clientTopology.staticsUrl}return t.$inject=["introStep","flags","introManager","clientTopology","consumerBiLogger","youtubeChannelManager","introContentTpa","introAppsRecommendationManager","$scope","$translate","$timeout"],t.prototype.$onInit=function(){this.loadData(),this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_APPS_RECOMMENDATION,null,!1),this.introManager.hasCategorySearchArguments()&&(this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_APPS_RECOMMENDATION,null,!0),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(e.INTRO_STATES.INTRO_APPS_RECOMMENDATION,this.introManager.data.category.term,"","","next",this.introManager.data.category.structureId,this.introManager.data.category.industryId,!0))},t.prototype.focusOnAdditionalApps=function(){var e=document.getElementById("apps-content");e.scrollTop=e.scrollHeight;var t=this.introAppsRecommendationManager.getRecommendedAppsForBi();this.consumerBiLogger.intro.moreServicesDropdownOpened(t)},t.prototype.onClick=function(e){var t=this.introManager.data.serviceOffer.find(function(t){return t.type===e.type});t.checked=!t.checked},Object.defineProperty(t.prototype,"appsRecommendation",{get:function(){return this.introManager.data.serviceOffer},enumerable:!0,configurable:!0}),t.prototype.onLoadingStart=function(){this.isAppsLoading=!0},t.prototype.onLoadingEnd=function(){this.isAppsLoading=!1},t.prototype.loadData=function(){var e=this;this.introAppsRecommendationManager.shouldLoad()&&(this.onLoadingStart(),this.introAppsRecommendationManager.loadAppsRecommendation().then(function(){e.onLoadingEnd(),e.flags.fixMultipleInitContent||e.$scope.$digest()}))},t.prototype.flagValidation=function(){(!this.flags.appsRecommendation&&!this.flags.appsRecommendation2||this.flags.MED)&&this.introStep.next(e.INTRO_STATES.INTRO_SERVICES_OFFER)},t.prototype.getSkipLabel=function(){return this.flags.renameSkipInServiceOffers?"intro.maybe-later":""},t.prototype.uncheckUnwantedApps=function(){var e=this;this.introManager.data.serviceOffer.forEach(function(t){var a=e.introAppsRecommendationManager.shouldInstallApp(t.type);a||(t.checked=a)})},t.prototype.next=function(){return S(this,void 0,void 0,function(){var t,a,i;return T(this,function(n){switch(n.label){case 0:return a=this.introManager.data.category.structureId,this.flags.MED||!a?[3,2]:[4,this.youtubeChannelManager.isStructureContainsVideo(a)];case 1:i=n.sent(),this.introManager.data.videoStructure=i&&this.introManager.isServiceOfferChecked(AdiCoreSanta.TpaWidgetTypes.Video_Widget),n.label=2;case 2:return(this.flags.appsRecommendation||this.flags.appsRecommendation2)&&this.uncheckUnwantedApps(),(t=this.consumerBiLogger.intro).selectServicesPageNavigationClick.apply(t,[e.INTRO_STATES.INTRO_BUSINESS_NAME,"next"].concat(this.introAppsRecommendationManager.prepareAppsBIInfo())),this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_NAME),[2]}})})},t.prototype.skip=function(){var t;this.introAppsRecommendationManager.unCheckAllApps(),(t=this.consumerBiLogger.intro).selectServicesPageNavigationClick.apply(t,[e.INTRO_STATES.INTRO_BUSINESS_NAME,"skip"].concat(this.introAppsRecommendationManager.prepareAppsBIInfo())),this.introStep.skip(e.INTRO_STATES.INTRO_BUSINESS_NAME)},t.prototype.back=function(){var t,a=e.INTRO_STATES.INTRO_CATEGORY_SEARCH;(t=this.consumerBiLogger.intro).selectServicesPageNavigationClick.apply(t,[a,"back"].concat(this.introAppsRecommendationManager.prepareAppsBIInfo())),this.introManager.shouldSkipCategoriesSearch?this.introStep.browserBack():this.introStep.back(a)},t}();e.IntroAppsRecommendation=t,angular.module("adiIntroInternal").component("introAppsRecommendation",{controller:t,templateUrl:"views/intro/intro-apps-recommendation.html"})}(A||(A={})),function(e){e[e.Next=0]="Next",e[e.Error=1]="Error",e[e.Skip=2]="Skip"}(E||(E={})),function(e){var t=function(){return function(e,t){this.type=e,this.message=t}}(),a=function(){function a(t,a,i,n,r,o,s,l,c,d,u,h,p,f){this.introStep=t,this.flags=a,this.consumerBiLogger=i,this.applicationParameters=n,this.validation=r,this.importSiteContent=o,this.cmsApi=s,this.$timeout=l,this.$q=c,this.wizWebsite=d,this.$translate=u,this.introContentTpa=h,this.wizUtils=p,this.introManager=f,this.address="",this.isNextDisabled=!0,this.isInProcess=!1,this.isHideTooltip=!0,this.nextButtonTooltipTitle="web-address-is-not-valid",this.nextButtonTooltipPosition="top",this.BusinessInfoTimeoutResponse=1e4,this.isImportEnabled=!0,this.currentStep=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT,this.importDetails={WixSite:"wix site",NotWixSite:"non-wix site",ContentImported:"content-imported",SiteNotFound:"site-not-found",AddressNotExist:"address-does-not-exist",WixwizError:"wixwiz-error"},this.initData(),this.handleProblemsInWebsiteAddress(),this.introManager.data.referrer=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT}return a.$inject=["introStep","flags","consumerBiLogger","applicationParameters","validation","importSiteContent","cmsApi","$timeout","$q","wizWebsite","$translate","introContentTpa","wizUtils","introManager"],a.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),this.currentStep,null,!1)},a.prototype.initData=function(){this.introManager.data.contactDetails=this.introManager.data.contactDetails||{},this.address=this.introManager.data.contactDetails.website||this.address},a.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1,this.isHideTooltip=!1,this.consumerBiLogger.intro.siteConverterErrorIsShown(this.importDetails.AddressNotExist,this.currentStep),this.tipMessage="intro.import-site-content.address-does-not-exist"},a.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0,this.isHideTooltip=!0,this.isError=!1,this.tipMessage=""},a.prototype.handleProblemsInWebsiteAddress=function(){this.validation.isWebsite(this.address)?this.hideWebsiteAddressError():this.showWebsiteAddressError(),this.isNextDisabled=!this.isWebsiteAddressValid},a.prototype.next=function(){var e=this;if(this.isInProcess=!0,this.isError=!1,this.address)return this.introManager.data.contactDetails.website=this.address,console.log("Start importing..."),this.importSiteContentProcess().then(function(){return e.nextStep()}).catch(function(t){return e.handleReject(t)});this.nextStep()},a.prototype.importSiteContentProcess=function(){var e=this,t=this.getValidatedUrl(this.address);return this.getSiteInfo(t).then(function(){return e.getSiteValidation(t)}).then(function(){return e.getBusinessInfo(t)})},a.prototype.getValidatedUrl=function(e){return 0===e.indexOf("http")?e:"http://"+e},a.prototype.buildKey=function(e,t){return e+"-"+t},a.prototype.getSiteInfo=function(e){var a=this;console.log("start: getSiteInfo for "+e);var n=new i.SiteConverterBIParams(this.buildKey(e,"site-info"),"site-info"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(n);return r.start(),this.importSiteContent.getSiteInfo(e).then(function(i){return console.log("end: getSiteInfo for "+e+"."),i?(console.log("wix site"),r.complete({overrideImportDetailsName:a.importDetails.WixSite}),a.$q.reject(new t(E.Skip))):(console.log("not wix site."),r.complete({overrideImportDetailsName:a.importDetails.NotWixSite}),a.$q.resolve())})},a.prototype.getSiteValidation=function(e){var a=this;console.log("start: getSiteValidation for "+e);var n=new i.SiteConverterBIParams(this.buildKey(e,"site-validation-wixwiz"),"site-validation-wixwiz"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(n);return r.start(),this.importSiteContent.getSiteValidation(e).then(function(i){if(console.log("end: getSiteValidation for "+e+". httpCode: "+i.httpErrorCode+', details: "'+i.statusLine+'"'),a.introManager.data.siteConverterSessionId=i.siteConverterSessionId,i.platform=i.platform&&i.platform.toLowerCase(),a.importSiteContent.isPlatformAllowed=!_.includes(a.wizUtils.disallowedPlatforms,i.platform),a.isImportEnabled=a.importSiteContent.isPlatformAllowed||a.flags.textManager,a.flags.debugWizSiteConverter&&!a.isImportEnabled&&(a.isImportEnabled=!0,console.log("forcing platform allowed",i.platform)),a.wizWebsite.setPlatformAllowed(a.isImportEnabled),200!==i.httpErrorCode||i.isParked){console.log("ERROR: getSiteValidation"),r.complete({overrideImportDetailsName:a.buildBiDetails(a.importDetails.SiteNotFound,"")});var n=a.$translate.instant("intro.import-site-content.address-could-not-found");return a.consumerBiLogger.intro.siteConverterErrorIsShown("Site is not found",a.currentStep),a.$q.reject(new t(E.Error,n))}return r.complete({overrideImportDetailsName:a.buildBiDetails(a.importDetails.ContentImported,i.platform)}),a.$q.resolve()})},a.prototype.buildBiDetails=function(e,t){return"status="+e+";platform="+t+";"},a.prototype.getBusinessInfo=function(e){var t=this;console.log("start: getBusinessInfo for "+e);var a=new i.SiteConverterBIParams(this.buildKey(e,"site-business-info-import"),"site-business-info-import"),n=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(a);return n.start(),this.importSiteContent.getBusinessInfo(e,this.introManager.data.name,this.introManager.data.siteConverterSessionId,this.BusinessInfoTimeoutResponse).then(function(a){return console.log("End: getBusinessInfo for "+e,a),n.complete({overrideImportDetailsName:t.importDetails.ContentImported}),t.updateIntroData(e,a),t.$q.resolve()}).catch(function(){return console.log("ERROR: getBusinessInfo for "+e),n.complete({overrideImportDetailsName:t.importDetails.WixwizError}),t.$q.resolve()})},a.prototype.updateIntroData=function(e,t){this.introManager.data.socialLinks=[],_.merge(this.introManager.data,new i.BusinessInfoResponse,t),this.introManager.data.contactDetails.website=e,t.generalInfo.logo&&!_.endsWith(t.generalInfo.logo.toLowerCase(),".svg")&&(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.initMedia():this.initMedia(),this.addLogo(t.generalInfo.logo))},a.prototype.addLogo=function(e){var t=this,a=new Image;a.onload=function(){console.log("logo url is valid: "+e),t.introManager.data.media.displayLogo=!0,t.introManager.data.media.logos.unshift({description:"logo",url:e})},a.onerror=function(){console.log("ERROR: logo url is not valid: "+e)},a.src=e},a.prototype.initMedia=function(){this.introManager.data.media=this.introManager.data.media||{};this.introManager.data.media.logos=[{}]},a.prototype.handleReject=function(e){void 0===e&&(e=new t(E.Next,"")),e.type===E.Error?(this.isInProcess=!1,this.isNextDisabled=!0,this.isError=!0,this.tipMessage=e.message):e.type===E.Next?this.nextStep():e.type===E.Skip&&this.skip()},a.prototype.nextStep=function(){var t=e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM;this.address&&this.isImportEnabled||(t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",t,this.currentStep),this.introStep.next(t)},a.prototype.skip=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("skip",t,this.currentStep),this.introManager.data.contactDetails.website="",this.introStep.skip(t)},a.prototype.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_NAME;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",t,this.currentStep),this.introStep.back(t)},Object.defineProperty(a.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),a}();e.IntroImportSiteContent=a,angular.module("adiIntroInternal").component("introImportSiteContent",{controller:a,templateUrl:"views/intro/intro-import-site-content.html"})}(A||(A={}));p=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};!function(e){var t=function(){function t(e,t,a,i,n,r,o,s){var l=this;this.introStep=e,this.consumerBiLogger=t,this.introContentTpa=a,this.flags=i,this.socialLinkManager=n,this.importWebsite=r,this.youtubeChannelManager=o,this.introManager=s,this.minAllowedImageDimension=4,this.mediaFilterSettings=function(e){return e.width&&e.width>=l.minAllowedImageDimension&&e.height&&e.height>=l.minAllowedImageDimension},this.promiseAllObjectValues=function(e){return Promise.all(Object.keys(e).map(function(t){return Promise.resolve(e[t]).then(function(e){return{key:t,val:e}})})).then(function(e){var t={};return e.forEach(function(e){return t[e.key]=e.val}),t})},this.getPlatformSocialLinks=function(e){return l.introManager.data&&l.introManager.data.socialLinks&&l.introManager.data.socialLinks.find(function(t){return t.platform===e})}}return t.$inject=["introStep","consumerBiLogger","introContentTpa","flags","socialLinkManager","importWebsite","youtubeChannelManager","introManager"],t.prototype.searchPlatformsIfNeeded=function(e){return void 0===e&&(e=this.introManager.getPlatformsData()),this.getSearchPromise(e)},t.prototype.getSearchPromise=function(e){var t,a=this,i=_.isEqual(this.searchedPlatformsData,e);return!i&&(this.searchedPlatformsData=_.cloneDeep(e)),this.shouldSearchPlatforms(e)?i&&this.searchPlatformsPromise?this.searchPlatformsPromise:this.searchPlatformsPromise=Promise.resolve().then(function(){return t=setTimeout(function(){return a.searchPlatformsPromise=void 0},25e3),a.searchPlatforms(e).then(function(e){return a.previousData=_.cloneDeep(e),a.searchPlatformsPromise=void 0,clearTimeout(t),e}).catch(function(e){return a.searchPlatformsPromise=void 0,clearTimeout(t),Promise.reject(e)})}):Promise.resolve()},t.prototype.filterImages=function(e,t){var a=this,i=e.map(function(e){return a.isImageValid(e,t)});return Promise.all(i)},t.prototype.isImageValid=function(e,t){return new Promise(function(a,i){var n=new Image;n.onload=function(i){t(n)?a(e):a(null)},n.onerror=function(e){a(null)},n.src=e.url})},t.prototype.shouldSearchPlatforms=function(e){return!(!this.introManager.data.shouldImportPlatforms||this.introManager.hasMedia()||!this.introManager.isNeedToImport(e))},t.prototype.searchPlatforms=function(e){var t=this,a=this.importUrls(e);return this.promiseAllObjectValues(this.mergeObjectsArrayintoOne(a)).then(function(a){return t.addMedia(a),t.flags.platformsScreen3||t.flags.platformsScreen4?t.filterImages(t.introManager.data.media.photos,t.mediaFilterSettings).then(function(i){return t.introManager.data.media.photos=i.filter(function(e){return e}),t.handleYoutubeData(e),t.introManager.handleIncomingMedia(),a}):(t.handleYoutubeData(e),t.introManager.handleIncomingMedia(),a)})},t.prototype.ensureHttps=function(e){return-1===e.indexOf("https://")?"https://"+e.split("http://").pop():e},t.prototype.searchUrls=function(e){var t=this;this.introManager.data.urls=e.map(function(e){return t.ensureHttps(e)});var a={parseWebsitePhotos:!this.flags.platformsScreen3&&!this.flags.platformsScreen4&&this.introManager.shouldImportWebsiteWhenImportFacebook()};return this.introManager.getExtendedUser(this.introManager.data,a)},t.prototype.importingSite=function(e){var t=this;return this.importWebsite.importSiteContentProcess(e).then(function(e){return e&&!e.isError?(e.logoUrl&&(e.logo=t.media(e.logoUrl,"website")),(t.flags.platformsScreen3||t.flags.platformsScreen4)&&(e.photos=e.photos||[]),e.photos.forEach(function(e){e.source="website"}),e):null})},t.prototype.searchingUrls=function(e){var t=this;return this.searchUrls(e).then(function(e){return _.get(t.introManager.data,"contactDetails.address.fullAddress")||t.introManager.setAddress(t.introManager.data.userLocation),e})},t.prototype.media=function(e,t){if(e)return[{source:t,url:e,description:"",data:{},userVerified:!0}]},t.prototype.fetchYoutube=function(t){var a=this;return this.youtubeChannelManager.fetchChannel(t).then(function(i){return a.introManager.data.socialLinks=[{platform:a.socialLinkManager.PLATFORM_YOUTUBE,url:t}],{logos:a.media(_.get(i,"snippet.thumbnails.medium.url"),e.YoutubeChannelManager.PhotoSourceYoutube),photos:a.media(_.get(i,"brandingSettings.image.bannerImageUrl"),e.YoutubeChannelManager.PhotoSourceYoutube)}})},t.prototype.importUrls=function(t){var a,i,n,r,o=[],s=new Promise(function(e){return e(null)});t[e.BusinessPlatform.YoutubeChannel]?o.push(((a={})[e.BusinessPlatform.YoutubeChannel]=this.fetchYoutube(t[e.BusinessPlatform.YoutubeChannel]),a)):o.push(((i={})[e.BusinessPlatform.YoutubeChannel]=s,i));var l=t[e.BusinessPlatform.Facebook];if(l||t[e.BusinessPlatform.Google]){var c=[this.importWebsite.addProtocolAndWWW(l,!0),t[e.BusinessPlatform.Google]].filter(function(e){return e});o.push({urls:this.searchingUrls(c)})}else this.introManager.data.urls=[],o.push({urls:s});return t[e.BusinessPlatform.ExistingWebsite]?o.push(((n={})[e.BusinessPlatform.ExistingWebsite]=this.importingSite(t[e.BusinessPlatform.ExistingWebsite]),n)):o.push(((r={})[e.BusinessPlatform.ExistingWebsite]=s,r)),o},t.prototype.addMedia=function(t){var a=t[e.BusinessPlatform.YoutubeChannel];a&&(a.logos&&(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.data.media.logos=a.logos.concat(this.introManager.data.media.logos):this.introManager.data.media.logos=this.introManager.data.media.logos.concat(a.logos)),a.photos&&(this.introManager.data.media.photos=this.introManager.data.media.photos.concat(a.photos)));var i=t[e.BusinessPlatform.ExistingWebsite];i&&(i.logo&&(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.data.media.logos=i.logo.concat(this.introManager.data.media.logos):this.introManager.data.media.logos=this.introManager.data.media.logos.concat(i.logo)),i.photos&&(this.introManager.data.media.photos=this.introManager.data.media.photos.concat(i.photos)))},t.prototype.mergeObjectsArrayintoOne=function(e){return e.reduce(function(e,t){return p({},e,t)},{})},t.prototype.handleYoutubeData=function(t){var a=this,i=t[e.BusinessPlatform.YoutubeChannel];if(i){this.introManager.data.socialLinks=this.introManager.data.socialLinks||[];var n=this.getPlatformSocialLinks(this.socialLinkManager.PLATFORM_YOUTUBE);n?n.url=i:this.introManager.data.socialLinks.push({platform:this.socialLinkManager.PLATFORM_YOUTUBE,url:i})}else this.introManager.data.socialLinks=this.introManager.data.socialLinks.filter(function(e){return e.platform!==a.socialLinkManager.PLATFORM_YOUTUBE})},t}();e.IntroUrlsImportHelper=t,angular.module("adiIntroInternal").service("introUrlsImportHelper",t)}(A||(A={}));p=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function t(t,a,i,n,r,o,s,l,c){var d=this;this.consumerBiLogger=t,this.flags=a,this.importWebsite=i,this.introContentTpa=n,this.introManager=r,this.introUrlsImportHelper=o,this.introStep=s,this.socialLinkManager=l,this.youtubeChannelManager=c,this.isNextDisabled=!this.flags.platformsScreen3&&!this.flags.platformsScreen4&&!!this.flags.platformsScreenV2,this.nextButtonTooltipPosition="top",this.shouldShowLoader=!1,this.currentStep=e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS,this.promiseAllObjectValues=function(e){return Promise.all(Object.keys(e).map(function(t){return Promise.resolve(e[t]).then(function(e){return{key:t,val:e}})})).then(function(e){var t={};return e.forEach(function(e){return t[e.key]=e.val}),t})},this.getPlatformSocialLinks=function(e){return d.introManager.data&&d.introManager.data.socialLinks&&d.introManager.data.socialLinks.find(function(t){return t.platform===e})},this.isAnyPlatformValid=function(){var e=d.introManager.getPlatformsData();return!!d.introManager.isNeedToImport(e)},this.initData(),this.introManager.data.referrer=e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS}return t.$inject=["consumerBiLogger","flags","importWebsite","introContentTpa","introManager","introUrlsImportHelper","introStep","socialLinkManager","youtubeChannelManager"],t.prototype.$onInit=function(){var e=this,t=this.introManager.data.category&&this.introManager.data.category.structureId;if(this.flags.appsRecommendation||this.flags.appsRecommendation2){var a=this.introManager.isServiceOfferChecked(AdiCoreSanta.TpaWidgetTypes.Video_Widget)?"youtube":this.introContentTpa.categoryType(this.introManager.data.category);this.consumerBiLogger.intro.pageView(a,this.currentStep,null,!1)}else this.youtubeChannelManager.isStructureContainsVideo(t).then(function(t){var a=t?"youtube":e.introContentTpa.categoryType(e.introManager.data.category);e.consumerBiLogger.intro.pageView(a,e.currentStep,null,!1)})},t.prototype.getSkipLabel=function(){return this.flags.platformsScreen3||this.flags.platformsScreen4?"intro.skip-this-step":null},t.prototype.updateNextButtonState=function(){this.flags.platformsScreen3||this.flags.platformsScreen4?this.isNextDisabled=!1:this.isNextDisabled=!this.isAnyPlatformValid()},t.prototype.initData=function(){this.introManager.data&&(this.introManager.data.contactDetails=this.introManager.data.contactDetails||{}),this.introManager.initMedia()},t.prototype.next=function(){this.nextStep()},t.prototype.ensureHttps=function(e){return-1===e.indexOf("https://")?"https://"+e.split("http://").pop():e},t.prototype.searchUrls=function(e){var t=this;this.introManager.data.urls=e.map(function(e){return t.ensureHttps(e)});var a={parseWebsitePhotos:!this.flags.platformsScreen3&&!this.flags.platformsScreen4&&this.introManager.shouldImportWebsiteWhenImportFacebook()};return this.introManager.getExtendedUser(this.introManager.data,a)},t.prototype.importingSite=function(e){var t=this;return this.importWebsite.importSiteContentProcess(e).then(function(e){return e&&!e.isError?(e.logoUrl&&(e.logo=t.media(e.logoUrl,"website")),e.photos.forEach(function(e){e.source="website"}),e):null})},t.prototype.searchingUrls=function(e){var t=this;return this.searchUrls(e).then(function(e){return _.get(t.introManager.data,"contactDetails.address.fullAddress")||t.introManager.setAddress(t.introManager.data.userLocation),e})},t.prototype.media=function(e,t){if(e)return[{source:t,url:e,description:"",data:{},userVerified:!0}]},t.prototype.fetchYoutube=function(t){var a=this;return this.youtubeChannelManager.fetchChannel(t).then(function(i){return a.introManager.data.socialLinks=[{platform:a.socialLinkManager.PLATFORM_YOUTUBE,url:t}],{logos:a.media(_.get(i,"snippet.thumbnails.medium.url"),e.YoutubeChannelManager.PhotoSourceYoutube),photos:a.media(_.get(i,"brandingSettings.image.bannerImageUrl"),e.YoutubeChannelManager.PhotoSourceYoutube)}})},t.prototype.importUrls=function(t){var a,i,n,r,o=[],s=new Promise(function(e){return e(null)});if(t[e.BusinessPlatform.YoutubeChannel]?o.push(((a={})[e.BusinessPlatform.YoutubeChannel]=this.fetchYoutube(t[e.BusinessPlatform.YoutubeChannel]),a)):o.push(((i={})[e.BusinessPlatform.YoutubeChannel]=s,i)),t[e.BusinessPlatform.Facebook]||t[e.BusinessPlatform.Google]){var l=[t[e.BusinessPlatform.Facebook],t[e.BusinessPlatform.Google]].filter(function(e){return e});o.push({urls:this.searchingUrls(l)})}else this.introManager.data.urls=[],o.push({urls:s});return t[e.BusinessPlatform.ExistingWebsite]?o.push(((n={})[e.BusinessPlatform.ExistingWebsite]=this.importingSite(t[e.BusinessPlatform.ExistingWebsite]),n)):o.push(((r={})[e.BusinessPlatform.ExistingWebsite]=s,r)),o},t.prototype.addMedia=function(t){var a=t[e.BusinessPlatform.YoutubeChannel];a&&(a.logos&&(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.data.media.logos=a.logos.concat(this.introManager.data.media.logos):this.introManager.data.media.logos=this.introManager.data.media.logos.concat(a.logos)),a.photos&&(this.introManager.data.media.photos=this.introManager.data.media.photos.concat(a.photos)));var i=t[e.BusinessPlatform.ExistingWebsite];i&&(i.logo&&(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.data.media.logos=i.logo.concat(this.introManager.data.media.logos):this.introManager.data.media.logos=this.introManager.data.media.logos.concat(i.logo)),i.photos&&(this.introManager.data.media.photos=this.introManager.data.media.photos.concat(i.photos)))},t.prototype.mergeObjectsArrayintoOne=function(e){return e.reduce(function(e,t){return p({},e,t)},{})},t.prototype.searchPlatforms=function(e){var t=this.importUrls(e);return this.promiseAllObjectValues(this.mergeObjectsArrayintoOne(t))},t.prototype.handleYoutubeData=function(t){var a=this,i=t[e.BusinessPlatform.YoutubeChannel];if(i){this.introManager.data.socialLinks=this.introManager.data.socialLinks||[];var n=this.getPlatformSocialLinks(this.socialLinkManager.PLATFORM_YOUTUBE);n?n.url=i:this.introManager.data.socialLinks.push({platform:this.socialLinkManager.PLATFORM_YOUTUBE,url:i})}else this.introManager.data.socialLinks=this.introManager.data.socialLinks.filter(function(e){return e.platform!==a.socialLinkManager.PLATFORM_YOUTUBE})},t.prototype.setWebsiteName=function(e){this.introManager.data&&this.introManager.data.contactDetails&&(this.introManager.data.contactDetails.website=e)},t.prototype.nextStep=function(){return S(this,void 0,void 0,function(){var t,a,i,n=this;return T(this,function(r){return this.introManager.data.shouldImportPlatforms=!0,this.introManager.searchingPlatforms=null,this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.resetMedia():(this.introManager.data.media={},this.introManager.initMedia()),t=this.introManager.getPlatformsData(),this.consumerBiLogger.intro.contentImportPageNavigationClick("next","",!!t[e.BusinessPlatform.Google],!!t[e.BusinessPlatform.ExistingWebsite],!!t[e.BusinessPlatform.YoutubeChannel],!!t[e.BusinessPlatform.Facebook],!!this.introManager.data.shouldVisitReviewImages),this.setWebsiteName(t[e.BusinessPlatform.ExistingWebsite]),this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?(a=void 0,a=this.introManager.isNeedToImport(t)&&this.introManager.data.shouldVisitReviewImages?e.INTRO_STATES.INTRO_IMAGES_SELECTION:e.INTRO_STATES.INTRO_EDIT_USER,this.introManager.searchingPlatforms=this.introUrlsImportHelper.searchPlatformsIfNeeded(t),this.introStep.next(a)):this.introManager.isNeedToImport(t)?(this.shouldShowLoader=!0,i=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL,this.searchPlatforms(t).then(function(e){n.shouldShowLoader=!1,n.addMedia(e),n.introManager.hasMedia()?(n.handleYoutubeData(t),n.introManager.handleIncomingMedia(),n.introStep.next(i)):n.skip(!1)})):this.skip(!1),[2]})})},t.prototype.skip=function(t){void 0===t&&(t=!0),this.introManager.data.shouldImportPlatforms=!1;var a=e.INTRO_STATES.INTRO_EDIT_USER,i=this.introManager.getPlatformsData();this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?(this.introManager.resetSocialLinks(),this.introManager.resetMedia()):this.introManager.hasMedia()?(a=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL,this.handleYoutubeData(i)):this.introManager.resetSocialLinks(),t&&this.consumerBiLogger.intro.contentImportPageNavigationClick("skip",a,!!i[e.BusinessPlatform.Google],!!i[e.BusinessPlatform.ExistingWebsite],!!i[e.BusinessPlatform.YoutubeChannel],!!i[e.BusinessPlatform.Facebook],!!this.introManager.data.shouldVisitReviewImages),this.introManager.data.contactDetails.website="",this.introStep.skip(a)},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_NAME,a=this.introManager.getPlatformsData();this.consumerBiLogger.intro.contentImportPageNavigationClick("back",t,!!a[e.BusinessPlatform.Google],!!a[e.BusinessPlatform.ExistingWebsite],!!a[e.BusinessPlatform.YoutubeChannel],!!a[e.BusinessPlatform.Facebook],!!this.introManager.data.shouldVisitReviewImages),this.introStep.back(t)},Object.defineProperty(t.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),t}();e.IntroImportPlatformsUrls=t,angular.module("adiIntroInternal").component("introImportPlatformsUrls",{controller:t,templateUrl:"views/intro/intro-import-platforms-urls.html"})}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r,o){this.introStep=e,this.flags=t,this.consumerBiLogger=a,this.introContentTpa=i,this.introImportSiteLegalHelpers=n,this.$translate=r,this.introManager=o,this.platforms=[],this.subTitle=""}return t.$inject=["introStep","flags","consumerBiLogger","introContentTpa","introImportSiteLegalHelpers","$translate","introManager"],t.prototype.$onInit=function(){var t=this;this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL,null,!1),this.introManager.data.referrer=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL;var a=this.introManager.getPlatforms();a.forEach(function(e){var a=t.introImportSiteLegalHelpers.getPlatformUrl(e);t.platforms.push({source:e,url:a,checked:!0,editedByUser:!0})}),this.buildSubTitle(a)},t.prototype.buildSubTitle=function(e){var t=this.introManager.buildSourcesString(e);this.subTitle=this.$translate.instant("intro.import-site-legal.sub-title2",{sources:t})},t.prototype.getSiteName=function(){return this.introManager.getSiteName()},t.prototype.isPlatformChecked=function(e){return this.introManager.isPlatformChecked(e.source)},t.prototype.onPlatformChanged=function(e,t){var a=e.target.checked;this.introManager.changeAllMediaVerification(a,t.source)},t.prototype.reviewImages=function(){var t=e.INTRO_STATES.INTRO_IMAGES_SELECTION,a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI().selectedImages;this.consumerBiLogger.intro.imageImportConfirmLegalPageNavigationClick("review images","","",JSON.stringify(a)),this.introStep.next(t)},t.prototype.next=function(){var t=e.INTRO_STATES.INTRO_EDIT_USER,a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.imageImportConfirmLegalPageNavigationClick("next",a.selectedImages,a.suggestedImages,a.usedPlatforms),this.introStep.next(t)},t.prototype.getPlatformUses=function(e){return this.introImportSiteLegalHelpers.getPlatformUses(e)},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_SELECT_USER;(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&(t=e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS);var a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.imageImportConfirmLegalPageNavigationClick("back","",a.suggestedImages,a.usedPlatforms),this.introStep.back(t)},t.prototype.skip=function(){var t=e.INTRO_STATES.INTRO_EDIT_USER,a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.imageImportConfirmLegalPageNavigationClick("skip","",a.suggestedImages,a.selectedImages),this.introManager.changeAllMediaVerification(!1),this.introStep.skip(t)},t.prototype.getNextLabel=function(){var e=this.introImportSiteLegalHelpers.getAllPlatformsUses();for(var t in e)if(e[t].numOfSelectedImages>0)return"intro.import-site-legal.next-button";return"intro.next-button"},t}();e.IntroImportSiteLegal=t,angular.module("adiIntroInternal").component("introImportSiteLegal",{controller:t,templateUrl:"views/intro/intro-import-site-legal.html"})}(A||(A={})),function(e){var t=function(){function e(e){this.introManager=e}return e.$inject=["introManager"],e.prototype.getAllPlatformsUses=function(){for(var e={},t=this.introManager.buildPlatformToImagesDic(),a=0,i=Object.keys(t);a<i.length;a++){var n=i[a],r=t[n].length,o=t[n].filter(function(e){return e.userVerified}).length;e[n]={numOfSelectedImages:o,numOfSuggestedImages:r}}return e},e.prototype.buildPlatformsUsesArray=function(e){var t=[],a=[],i=[];return this.introManager.getPlatforms().forEach(function(n){var r=e[n].numOfSelectedImages,o=e[n].numOfSuggestedImages;0!==r&&t.push(n),a.push(n+"="+r),i.push(n+"="+o)}),{usedPlatforms:t,selectedImages:a,suggestedImages:i}},e.prototype.getPlatformUrl=function(e){return this.introManager.getPlatformUrl(e).replace(/^http(s?):\/\//i,"")},e.prototype.getPlatformUses=function(e){var t=this.getAllPlatformsUses();return 0===t[e].numOfSelectedImages?"":"("+t[e].numOfSelectedImages+" of "+t[e].numOfSuggestedImages+")"},e.prototype.getPlatformsDetailsForBI=function(){var e=this.getAllPlatformsUses(),t=this.buildPlatformsUsesArray(e);return{usedPlatforms:t.usedPlatforms.join(","),selectedImages:t.selectedImages.join(","),suggestedImages:t.suggestedImages.join(",")}},e}();e.IntroImportSiteLegalHelpers=t,angular.module("adiIntroAppInternal").service("introImportSiteLegalHelpers",t)}(A||(A={})),function(e){var t=function(){function t(t,a,i,n,r,o,s,l,c){var d=this;this.$timeout=t,this.consumerBiLogger=a,this.flags=i,this.introContentTpa=n,this.introImportSiteLegalHelpers=r,this.introManager=o,this.introUrlsImportHelper=s,this.introStep=l,this.$state=c,this.loading=!0,this.finishedImport=!1,this.imagesBySource={},this.platforms=[],this.diffs={},this.imageClicked=function(e,t){d.diffs[e]=t},this.introManager.data.referrer=e.IntroImportSiteConfirm.STEP}return t.$inject=["$timeout","consumerBiLogger","flags","introContentTpa","introImportSiteLegalHelpers","introManager","introUrlsImportHelper","introStep","$state"],t.prototype.$onInit=function(){var t=this;this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_IMAGES_SELECTION_LOADING,null,!1):this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_IMAGES_SELECTION,null,!1),this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introUrlsImportHelper.searchPlatformsIfNeeded().then(function(){t.platforms=t.introManager.getPlatforms(),t.addEmptyOrFailedPlatforms(),t.loadImages(),t.finishLoading()}):(this.platforms=this.introManager.getPlatforms(),this.loadImages())},t.prototype.finishLoading=function(){var t=this;this.$timeout(function(){return t.finishedImport=!0},0),this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.$timeout(function(){t.loading=!1,t.$state.current.name===e.INTRO_STATES.INTRO_IMAGES_SELECTION&&t.consumerBiLogger.intro.pageView(t.introContentTpa.categoryType(t.introManager.data.category),e.INTRO_STATES.INTRO_IMAGES_SELECTION,null,!1)},300):(this.$timeout(function(){return t.loading=!1},300),this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_IMAGES_SELECTION,null,!1))},t.prototype.removeSucceededPlatforms=function(t){var a=this.introManager.getAllMediaBySource("facebook");a&&a.length&&(t[e.BusinessPlatform.Facebook]="")},t.prototype.addEmptyOrFailedPlatforms=function(){var t=this,a=_.cloneDeep(this.introManager.getPlatformsData());(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&this.removeSucceededPlatforms(a);_.find(a,"Google");a&&a[e.BusinessPlatform.Google]&&a[e.BusinessPlatform.Google].length&&(a[e.BusinessPlatform.Google]="Google Places");var i=_.values(a),n=this.platforms.map(function(e){return t.introManager.getPlatformUrl(e)}),r=i.filter(function(e){return e&&e.length&&!_.includes(n,e)&&!_.includes(n,e+"/")});this.platforms.push.apply(this.platforms,r)},t.prototype.loadImages=function(){var e=this,t=this.introManager.getMedia();this.platforms.forEach(function(a){e.imagesBySource[a]=t.filter(function(e){return e.legalSource===a}).map(function(e){return{url:e.url,isChecked:e.userVerified}})})},t.prototype.next=function(){var t=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL;this.isNewPlatformsScreenVersion()&&(t=e.INTRO_STATES.INTRO_EDIT_USER),this.commit();var a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.selectImagesLegalPageNavigationClick("done",t,a.selectedImages,a.suggestedImages),this.introStep.next(t)},t.prototype.skip=function(){var t=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL,a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.selectImagesLegalPageNavigationClick("cancel",t,a.selectedImages,a.suggestedImages),this.introStep.skip(t)},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS;this.introManager.changeMediaVerificationStatus(!1);var a=this.introImportSiteLegalHelpers.getPlatformsDetailsForBI();this.consumerBiLogger.intro.selectImagesLegalPageNavigationClick("back",t,a.selectedImages,a.suggestedImages),this.introStep.skip(t)},t.prototype.commit=function(){this.introManager.updateMediaByDiffs(this.diffs)},t.prototype.getPlatformUrl=function(e){return this.introImportSiteLegalHelpers.getPlatformUrl(e)},t.prototype.isNewPlatformsScreenVersion=function(){return this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4},t.prototype.getNextLabel=function(){return this.flags.platformsScreen4?"intro.next-button":this.isNewPlatformsScreenVersion()?"intro.import-button":"intro.done-button"},t.prototype.isPlatformChecked=function(e){var t=this.imagesBySource[e]||[];return t.filter(function(e){return e.isChecked}).length===t.length},t.prototype.isSelectAllEnabled=function(){return 0===this.platforms.length||1!==this.selectedImagesToTotalRatio()},t.prototype.isDeselectAllEnabled=function(){return 0===this.platforms.length||0!==this.selectedImagesToTotalRatio()},t.prototype.selectedImagesToTotalRatio=function(){var e=this,t=0,a=0;return this.platforms.forEach(function(i){var n=e.imagesBySource[i]||[];t+=n.filter(function(e){return e.isChecked}).length,a+=n.length}),a>0&&t/a},t.prototype.toggleSelectedMedia=function(e){var t=this;e&&!this.isSelectAllEnabled||!e&&!this.isDeselectAllEnabled||this.platforms.forEach(function(a){t.changeAllMediaVerificationByPlatform(e,a)})},t.prototype.isCheckedPartially=function(e){var t=this.imagesBySource[e]||[],a=t.filter(function(e){return e.isChecked}).length;return a>0&&a<t.length},t.prototype.onAllPlatformClicked=function(e,t){var a=e.target.checked;this.changeAllMediaVerificationByPlatform(a,t)},t.prototype.changeAllMediaVerificationByPlatform=function(e,t){var a=this;t&&this.imagesBySource[t].forEach(function(t){t.isChecked=e,a.diffs[t.url]=t.isChecked})},t.STEP=e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM,t}();e.IntroImagesSelection=t,angular.module("adiIntroInternal").component("introImagesSelection",{controller:t,templateUrl:"views/intro/intro-images-selection.html"})}(A||(A={}));var A;S=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))(function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var a,i,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function t(t,a,i,n,r,o,s,l){var c=this;this.introStep=t,this.flags=a,this.youtubeChannelManager=i,this.introManager=n,this.socialLinkManager=r,this.$scope=o,this.validation=s,this.consumerBiLogger=l,this.flags.MED||(this.channelUrl=this.youtubeChannelManager.getChannelUrl(),this.$scope.$watch(function(){return c.channelUrl},function(e){c.isValidUrl=!(e.length>0)||new YoutubeFeedChannelService(e).isValidYtChannelId,c.isNextDisabled=!c.validation.isWebsite(e)})),this.consumerBiLogger.intro.pageView(e.CategoryTypes.WixVideo,e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL,null,!1)}return t.$inject=["introStep","flags","youtubeChannelManager","introManager","socialLinkManager","$scope","validation","consumerBiLogger"],t.prototype.next=function(){return S(this,void 0,void 0,function(){var t,a;return T(this,function(i){switch(i.label){case 0:this.isNextDisabled=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),this.youtubeChannelManager.isValidUrl(this.channelUrl)?[4,this.youtubeChannelManager.fetchChannel(this.channelUrl)]:[2,this.skip()];case 2:return t=i.sent(),this.introManager.data.media||(this.introManager.data.media={logos:[]}),this.introManager.data.media.logos=this.media(_.get(t,"snippet.thumbnails.medium.url")),this.introManager.data.media.photos=this.media(_.get(t,"brandingSettings.image.bannerImageUrl")),this.introManager.data.socialLinks=[{platform:this.socialLinkManager.PLATFORM_YOUTUBE,url:this.channelUrl}],this.consumerBiLogger.intro.contentImportPageNavigationClick("next",e.INTRO_STATES.INTRO_BUSINESS_LOCATION,null,null,null,null,!1),this.goToNextState(),[3,4];case 3:return a=i.sent(),console.error(a),this.isNextDisabled=!1,[3,4];case 4:return[2]}})})},t.prototype.skip=function(){this.consumerBiLogger.intro.contentImportPageNavigationClick("skip",e.INTRO_STATES.INTRO_BUSINESS_LOCATION,null,null,null,null,!1),this.introManager.resetSocialLinks(),this.goToNextState()},t.prototype.goToNextState=function(){this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},t.prototype.media=function(t){if(t){var a=[{source:e.YoutubeChannelManager.PhotoSourceYoutube,url:t,description:"",data:{}}];return a.forEach(function(e){e.userVerified=!0}),a}},t.prototype.back=function(){this.consumerBiLogger.intro.contentImportPageNavigationClick("back",e.INTRO_STATES.INTRO_BUSINESS_NAME,null,null,null,null,!1),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_NAME)},t}();e.IntroYoutubeChannel=t,angular.module("adiIntroInternal").component("introYoutubeChannel",{controller:t,templateUrl:"views/intro/intro-youtube-channel.html"})}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r){this.introStep=e,this.flags=t,this.introContentTpa=a,this.consumerBiLogger=i,this.introManager=n,this.$translate=r,this.businessName=this.introManager.data.name}return t.$inject=["introStep","flags","introContentTpa","consumerBiLogger","introManager","$translate"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_NAME,null,!1)},Object.defineProperty(t.prototype,"name",{get:function(){return this.businessName},set:function(e){this.businessName=e},enumerable:!0,configurable:!0}),t.prototype.canMoveNext=function(){return!this.name},t.prototype.isSiteConverter=function(){return!this.flags.MED&&(this.flags.wizSiteConverter||this.flags.textManager)&&this.introContentTpa.categoryType(this.introManager.data.category)!==e.CategoryTypes.SingleEvent},t.prototype.getNextStep=function(){return!this.flags.MED&&(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&this.introContentTpa.categoryType(this.introManager.data.category)!==e.CategoryTypes.SingleEvent?(this.introManager.initMedia(),e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS):this.flags.MED||this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4||!this.introManager.data.videoStructure?this.isSiteConverter()?e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT:e.INTRO_STATES.INTRO_BUSINESS_LOCATION:e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL},t.prototype.next=function(){this.name||(this.name=this.$translate.instant("intro.business-name.empty")),this.introManager.data.name=this.businessName;var e=this.getNextStep();this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(e,"next",this.name),this.introStep.next(e)},t.prototype.skip=function(){var e=this.getNextStep();this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(e,"skip",this.name),this.introManager.data.name="",this.introStep.next(e)},t.prototype.back=function(){var t=this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)===e.CategoryTypes.SingleEvent?e.INTRO_STATES.INTRO_CATEGORY_SEARCH:this.introManager.getServiceOffersOrAppsRecommendationStep();this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(t,"back",this.name),this.introStep.back(t)},t.prototype.getBusinessNameTitle=function(){var e=this.introManager.getCategoryNoError(),t=this.flags.newBusinessQuestions?this.introContentTpa.newBusinessNameTitle(e):this.introContentTpa.businessNameTitle(e);return this.$translate.instant(t)},t.prototype.getBusinessPlaceholder=function(){var e=this.introManager.getCategoryNoError(),t=this.introContentTpa.businessPlaceholder(e);return this.$translate.instant(t)},t.prototype.getPlaceholder=function(){return this.flags.newBusinessQuestions?this.getBusinessPlaceholder():this.$translate.instant("intro.business-name.input-placeholder")},t}();e.IntroBusinessName=t,angular.module("adiIntroInternal").component("introBusinessName",{controller:t,templateUrl:"views/intro/intro-business-name.html"})}(A||(A={})),function(e){var t=function(){function t(t,a,i,n,r,o,s){var l=this;this.introStep=t,this.flags=a,this.$translate=i,this.introContentTpa=n,this.consumerBiLogger=r,this.introManager=o,this.youtubeChannelManager=s,this.isOptional=!1,this.introPlacesOptions={},this.placesOptions={types:["geocode"]},this.isValid=function(){return l.isOptional||l.introManager.hasAddress};var c=this.introManager.getCategoryNoError();this.categoryType=n.categoryType(c),this.placeholder=this.placeholderKey(this.categoryType),this.categoryType===e.CategoryTypes.SingleEvent&&(this.isOptional=!0,this.introPlacesOptions.displayKeys=["name","formatted_address"],this.placesOptions.types=["establishment"]),this.introManager.data.referrer=e.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_LOCATION,null,!1)}return t.$inject=["introStep","flags","$translate","introContentTpa","consumerBiLogger","introManager","youtubeChannelManager"],Object.defineProperty(t.prototype,"address",{get:function(){return this.introManager.data.userLocation},set:function(e){this.introManager.data.userLocation=e,this.flags.wixEvents&&this.introManager.setAddress(this.introManager.data.userLocation)},enumerable:!0,configurable:!0}),t.prototype.getLocationTitle=function(){var e=this.introManager.getCategoryNoError(),t=this.introContentTpa.locationTitle(e);return this.$translate.instant(t)},t.prototype.skip=function(){this.introManager.data.userLocation=null,this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1;var e=this.nextStep(!0);delete this.introManager.data.searchResults,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(e,"skip",null),this.introStep.next(e)},t.prototype.nextStep=function(t){return this.flags.MED||this.categoryType!==e.CategoryTypes.SingleEvent?this.shouldSearchUser(t)?e.INTRO_STATES.INTRO_SEARCH_CONFIRM:e.INTRO_STATES.INTRO_EDIT_USER:e.INTRO_STATES.INTRO_BUSINESS_DATES},t.prototype.shouldSearchUser=function(e){return(!e||this.introManager.data.indifferentLocation)&&!!this.introManager.data.name&&this.introManager.data.name!==this.$translate.instant("intro.business-name.default")},t.prototype.shouldNotAnalyzeAddress=function(){return!this.flags.MED&&this.introManager.data.videoStructure&&this.youtubeChannelManager.introHasYoutubeChannel()},t.prototype.next=function(){if(this.shouldNotAnalyzeAddress())return this.introStep.next(this.nextStep(!0));if(this.isValid()){var t=this.introManager.hasAddress?this.introManager.data.userLocation.formatted_address:this.introManager.data.userLocation;this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"next",t),this.introStep.next(this.nextStep())}},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_NAME;this.flags.MED||this.categoryType===e.CategoryTypes.SingleEvent||!this.flags.wizSiteConverter&&!this.flags.textManager||(t=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT),!this.flags.MED&&this.introManager.data.videoStructure&&(t=e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL),this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(t,"back",null),this.introStep.back(t)},t.prototype.placeholderKey=function(e){var t="intro.business-location.input-placeholder";if(!e)return t;var a=t+"-"+e,i=this.$translate.instant(a);return i===a?t:i},t}();e.IntroBusinessLocation=t,angular.module("adiIntroInternal").component("introBusinessLocation",{controller:t,templateUrl:"views/intro/intro-business-location.html"})}(A||(A={})),function(e){var t=0,a=1,n={inTime:function(e,t,a){return void 0===a&&(a=new Date),a&&new Date(a.getFullYear(),a.getMonth(),a.getDate(),e,t)},startDate:function(){return new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+14,19,0,0)},endDate:function(e){return n.inTime(e.getHours()+4,e.getMinutes(),e)}},r=function(){function r(n,r,o,s,l,c,d){var u=this;this.introStep=n,this.flags=r,this.introWindow=o,this.consumerBiLogger=s,this.introContentTpa=l,this.CcDialogBuilder=c,this.introManager=d,this.optionalTimes=_.range(0,24).reduce(function(e,t,a){return e[2*a]=u.timeItem(t,0),e[2*a+1]=u.timeItem(t,30),e},[]),this.timezones=i.TimeZones,this.hasStartDate=function(){return u.dates&&u.dates[t]},this.hasEndDate=function(){return u.dates&&u.dates[a]},this.wrongStartDate=function(){return u.dates&&u.dates[0]&&u.dates[0]<new Date},this.wrongEndDate=function(){return u.dates&&u.dates[0]&&u.dates[1]&&u.dates[1]<u.dates[0]},this.dateLabel=function(e){return"intro.business-dates.date-label-"+(e===t?"from":"to")},this.startValueExists=function(){return""+!(!u.dates||!u.dates[0])},this.endValueExists=function(){return""+!(!u.dates||!u.dates[1])},this.timesFromDates=function(e){return e.map(function(e){return e?100*e.getHours()+e.getMinutes():null})},d.data.dates&&d.data.dates[t]||(d.data.dates=[null]),this.selectedTimes=this.timesFromDates(this.introManager.data.dates),d.data.timezone||(d.data.timezone=o.userTimezone()),this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_DATES,null,!1)}return r.$inject=["introStep","flags","introWindow","consumerBiLogger","introContentTpa","CcDialogBuilder","introManager"],Object.defineProperty(r.prototype,"dates",{get:function(){return this.introManager.data.dates},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"timezone",{get:function(){return this.introManager.data.timezone},set:function(e){this.introManager.data.timezone=e},enumerable:!0,configurable:!0}),r.prototype.onDateClicked=function(e,t){var a=this;this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===t?"start":"end")+" date","click"),this.setDefaults(t);var i=e.target.getBoundingClientRect(),n=i.x,r=i.y,o=i.height,s={parent:angular.element("intro-business-dates"),hasBackdrop:!1,clickOutsideToClose:!0,template:'<md-dialog ng-style="$ctrl.position"><p19-calendar date="$ctrl.currentDate" on-date-change="$ctrl.onDateChange(date)"></p19-calendar></md-dialog>',controller:function(){return{position:{top:r+o,left:n,position:"absolute"},currentDate:a.dates[t],onDateChange:function(e){return a.dateChanged(t,new Date(e))}}},controllerAs:"$ctrl"};this.CcDialogBuilder.show(s)},r.prototype.onTimeClicked=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===t?"start":"end")+" time","click"),this.setDefaults(t)},r.prototype.onTimezoneClicked=function(){angular.element("[data-hook=timezone-select]").click(),this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("timezone","click")},r.prototype.dateChanged=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" date","choose"),t.setHours(this.dates[e].getHours()),t.setMinutes(this.dates[e].getMinutes()),this.dates[e]=t},r.prototype.timeChanged=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" time","choose"),this.dates[e].setHours(Math.floor(t/100)),this.dates[e].setMinutes(t%100)},r.prototype.timezoneChanged=function(){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("timezone","choose")},r.prototype.addDate=function(){this.dates[a]=null,this.setDefaults(a),this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("end date","add")},r.prototype.removeDate=function(e){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" date","remove"),this.dates.splice(e,1),0===this.dates.length&&(this.dates[t]=null),this.selectedTimes=this.timesFromDates(this.dates)},r.prototype.next=function(){this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"next",e.INTRO_STATES.INTRO_EVENT_DETAILS,this.startValueExists()),this.introStep.next(e.INTRO_STATES.INTRO_EVENT_DETAILS)},r.prototype.back=function(){this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"back",e.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.startValueExists()),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},r.prototype.skip=function(){delete this.introManager.data.dates,this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"skip",e.INTRO_STATES.INTRO_EVENT_DETAILS,this.startValueExists()),this.introStep.next(e.INTRO_STATES.INTRO_EVENT_DETAILS)},r.prototype.setDefaults=function(e){this.dates[e]||(this.dates[e]=0===e?n.startDate():n.endDate(this.dates[t]),this.selectedTimes=this.timesFromDates(this.dates))},r.prototype.timeItem=function(e,t){return{value:100*e+t,display:this.introWindow.formattedTime(n.inTime(e,t))}},r}();e.IntroBusinessDates=r,angular.module("adiIntroInternal").component("introBusinessDates",{controller:r,templateUrl:"views/intro/intro-business-dates.html"})}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r){this.introStep=e,this.flags=t,this.introContentTpa=a,this.consumerBiLogger=i,this.$q=n,this.introManager=r,this.searchingBusinesses=!1,this.isInProcess=!1}return t.$inject=["introStep","flags","introContentTpa","consumerBiLogger","$q","introManager"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SEARCH_CONFIRM,null,!1)},Object.defineProperty(t.prototype,"businessName",{get:function(){return this.introManager.data.name},enumerable:!0,configurable:!0}),t.prototype.skip=function(){this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_EDIT_USER,"skip",this.introManager.data.name),this.introStep.wait(),this.introManager.data.referrer=e.INTRO_STATES.INTRO_SEARCH_CONFIRM,this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(e.INTRO_STATES.INTRO_EDIT_USER)},t.prototype.next=function(){var t=this;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_SELECT_USER,"next",this.introManager.data.name),this.searchingBusinesses=!0;var a=this.introManager.searchUsers();this.isInProcess=!0,this.$q.all([a]).catch(function(){t.isInProcess=!1}).finally(function(){t.searchingBusinesses=!1,t.introStep.next(e.INTRO_STATES.INTRO_SELECT_USER)})},t.prototype.isSearchingBusinesses=function(){return this.searchingBusinesses},t.prototype.back=function(){delete this.introManager.data.searchResults,this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_LOCATION,"back",this.introManager.data.name),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},t}();e.IntroSearchConfirm=t,angular.module("adiIntroInternal").component("introSearchConfirm",{controller:t,templateUrl:"views/intro/intro-search-confirm.html"})}(A||(A={})),function(e){var t=function(){function t(e,a,i,n,r,o,s,l,c){this.introStep=e,this.flags=a,this.consumerBiLogger=i,this.$q=n,this.introManager=r,this.wizWebsite=o,this.introContentTpa=s,this.fullStoryLoader=l,this.importSiteContent=c,this.introManager.data.referrer=t.STEP}return t.$inject=["introStep","flags","consumerBiLogger","$q","introManager","wizWebsite","introContentTpa","fullStoryLoader","importSiteContent"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),t.STEP,null,!1),this.wizWebsite.preloadFullSiteData(this.introManager.data.contactDetails.website,this.introManager.data.name)},t.prototype.next=function(){this.flags.debugWizSiteConverter||this.loadFullstory(),this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT,"next",this.introManager.data.name),this.importSite();var a=e.INTRO_STATES.INTRO_EDIT_USER;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",a,t.STEP),this.introStep.next(a)},t.prototype.importSite=function(){var e=this.introManager.data.contactDetails.website,t=this.introManager.data.name,a=this.introManager.data.siteConverterSessionId;this.introManager.data.importedSite={userId:null,siteAddress:e},this.flags.wizSiteConverter&&this.wizWebsite.postloadFullSiteData(e,t),this.flags.textManager&&this.importSiteContent.importTextsFromSite(e,t,a)},t.prototype.back=function(){var a=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(a,"back",this.introManager.data.name),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",a,t.STEP),this.introStep.back(a)},t.prototype.skip=function(){var a=e.INTRO_STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("skip",a,t.STEP),this.introManager.data.contactDetails.website="",this.introStep.skip(a)},t.prototype.loadFullstory=function(){var e=this,t={label:"site-generator-statics-consumer",sample:1,onReady:function(t){return e.consumerBiLogger.intro.fullStoryStarted(t)}};this.fullStoryLoader(t)},t.STEP=e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM,t}();e.IntroImportSiteConfirm=t,angular.module("adiIntroInternal").component("introImportSiteConfirm",{controller:t,templateUrl:"views/intro/intro-import-site-confirm.html"})}(A||(A={})),function(e){var t=function(){function t(t,a,i,n,r,o){this.introStep=t,this.$element=a,this.introManager=i,this.introContentTpa=n,this.flags=r,this.consumerBiLogger=o,this.loadingUserInfo=!1,this.title=this.getTitle(),this.resultsText=this.getResultsText(),this.name=this.introManager.data.name,this.address=this.introManager.data.userLocation,this.introManager.data.referrer=e.INTRO_STATES.INTRO_SELECT_USER}return t.$inject=["introStep","$element","introManager","introContentTpa","flags","consumerBiLogger"],t.prototype.setScrollbarListener=function(){var e=this,t=this.$element.find('[data-hook="back-to-top"]');this.scrollable=this.$element.find('[data-hook="scroll-container"]'),this.locationInput=this.$element.find('[data-hook="business-location-input"]'),this.scrollable.on("scroll",_.throttle(function(){return requestAnimationFrame(function(){return e.updateScrollTopVisibility(t)})},0)),this.updateScrollTopVisibility(t)},t.prototype.$onDestroy=function(){this.scrollable&&this.scrollable.off("scroll")},t.prototype.updateScrollTopVisibility=function(e){var t=this;if(void 0===e&&(e=this.back2Top),e&&0!==e.length){t.scrollable.scrollTop()>0?e.fadeIn(150):e.fadeOut(150)}},t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SELECT_USER,this.results.length,!1)},t.prototype.getResultsText=function(){return this.introManager.isWixWizError?"intro.select-user.results-error":0===this.results.length?"intro.select-user.results-none":"intro.select-user.results-"+(this.results.length>1?"multiple":"single")},t.prototype.getResultsLength=function(){return this.results.length>0?this.results.length:""},t.prototype.onGoToTopClicked=function(){this.consumerBiLogger.intro.wixwizSearchResultsGoToTopOfPageClick(this.results.length,null),this.goToTop()},t.prototype.goToTop=function(){this.scrollable.animate({scrollTop:0})},t.prototype.getTitle=function(){var e="intro.select-user.title";return this.introManager.isWixWizError?e="intro.select-user.title-error":0===this.results.length&&(e="intro.select-user.no-results"),e},Object.defineProperty(t.prototype,"subtitle",{get:function(){return this.introManager.isWixWizError?"error":0===this.results.length?"noresults":"someresults"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"results",{get:function(){return this.introManager.data.searchResults||[]},enumerable:!0,configurable:!0}),t.prototype.search=function(){var e=this;this.introManager.data.indifferentLocation=!this.address,this.introManager.data.name=this.name,this.introManager.data.userLocation=this.address,this.consumerBiLogger.intro.clickOnSearchButtonInSelectUserPage(this.name,this.introManager.data.userLocation.formatted_address),this.introManager.searchUsers().finally(function(){e.title=e.getTitle(),e.resultsText=e.getResultsText()})},t.prototype.next=function(t){var a=this;t.isLoading=!0,this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"next",this.results.length,null,this.results.indexOf(t),t.nameSimilarityRank,t.distance),this.loadingUserInfo=!0,this.introManager.getExtendedUser(t).finally(function(){_.get(a.introManager.data,"contactDetails.address.fullAddress")||a.introManager.setAddress(a.introManager.data.userLocation),a.loadingUserInfo=!1;var i=e.INTRO_STATES.INTRO_EDIT_USER;!a.flags.MED&&a.introManager.getMedia().length>0&&(a.introManager.handleIncomingMedia(),i=e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL),a.introStep.next(i),t.isLoading=!1})},t.prototype.skip=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"skip",this.results.length,null,null,null,null),this.flags.selectUserSkipLogic?this.resetCardData():this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(e.INTRO_STATES.INTRO_EDIT_USER)},t.prototype.resetCardData=function(){this.introManager.resetSocialLinks(),this.introManager.data.userLocation=null,this.introManager.setAddress(this.introManager.data.userLocation),_.set(this.introManager,"data.contactDetails.phone","")},t.prototype.back=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"back",this.results.length,null,null,null,null),this.introStep.back(e.INTRO_STATES.INTRO_SEARCH_CONFIRM)},t.prototype.isLoadingUser=function(){return this.loadingUserInfo},t.STEP=e.INTRO_STATES.INTRO_SELECT_USER,t}();e.IntroSelectUserInfo=t,angular.module("adiIntroInternal").component("introSelectUser",{templateUrl:"views/intro/intro-select-user.html",controller:t,bindings:{}}),angular.module("adiIntroInternal").directive("introScrollbar",["osUtils","flags",function(e,t){return{restrict:"A",scope:{onInit:"&?"},compile:function(t,a){return e.isIE&&t[0].removeAttribute("cc-scrollbar"),function(e){e.onInit&&e.onInit()}}}}])}(A||(A={})),function(e){var t=function(){function t(e,t,a,i,n,r,o){this.$injector=e,this.consumerBiLogger=t,this.flags=a,this.introContentTpa=i,this.introManager=n,this.introStep=r,this.logoManager=o}return t.$inject=["$injector","consumerBiLogger","flags","introContentTpa","introManager","introStep","logoManager"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_EDIT_USER,null,!1),(this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&!this.flags.MED&&(this.introUrlsImportHelper=this.$injector.get("introUrlsImportHelper"),this.introUrlsImportHelper.searchPlatformsIfNeeded())},Object.defineProperty(t.prototype,"introData",{get:function(){return this.introManager.data},enumerable:!0,configurable:!0}),t.prototype.next=function(){var t=this;if(this.consumerBiLogger.intro.editInfoCardPageNavigationClick("builder","next"),!this.introManager.data)throw"intro manager did not initialized.";this.introStep.hideContent(!0).then(function(){t.introManager.prepareDataForBuilder(),t.introStep.next(e.INTRO_FINISHED)})},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_SELECT_USER;if(!this.flags.MED&&(this.flags.platformsScreen||this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4)&&this.introContentTpa.categoryType(this.introManager.data.category)!==e.CategoryTypes.SingleEvent){var a=this.introManager.getPlatformsData();t=this.flags.platformsScreenV2||this.flags.platformsScreen3||this.flags.platformsScreen4?this.introManager.data.shouldVisitReviewImages&&this.introManager.hasMedia()?e.INTRO_STATES.INTRO_IMAGES_SELECTION:e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS:this.introManager.isImportedUrls(a)&&this.introManager.hasMedia()?e.INTRO_STATES.INTRO_IMPORT_SITE_LEGAL:e.INTRO_STATES.INTRO_IMPORT_PLATFORMS_URLS}else this.flags.wizSiteConverter||!this.flags.platformsScreen&&!this.flags.platformsScreenV2&&!this.flags.platformsScreen3&&!this.flags.platformsScreen4||!this.flags.MED&&this.introManager.getPlatforms().length>0?t=this.introManager.data.referrer||e.INTRO_STATES.INTRO_BUSINESS_LOCATION:this.introManager.data.userLocation?this.introManager.data.searchResults||(t=e.INTRO_STATES.INTRO_SEARCH_CONFIRM):t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.editInfoCardPageNavigationClick(t,"back"),this.introStep.back(t)},t}();e.IntroEditUserInfo=t,angular.module("adiIntroInternal").component("introEditUser",{templateUrl:"views/intro/intro-edit-user.html",controller:t,bindings:{}})}(A||(A={})),function(e){var t=function(){function t(t,a,n,r,o,s,l,c,d){var u=this;if(this.introWindow=t,this.introStep=a,this.osUtils=n,this.introContentTpa=r,this.consumerBiLogger=o,this.applicationState=s,this.socialLinkManager=l,this.applicationParameters=c,this.introManager=d,this.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_DATES;u.consumerBiLogger.intro.editInfoCardPageNavigationClick(t,"back"),u.introStep.back(t)},this.changeLocation=function(){return u.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},this.changeDates=function(){return u.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_DATES)},this.enableAddSocialLink=function(){return u.data.socialLinks.length<u.applicationParameters.maxSocialLinks},this.onSocialChanged=function(e){return e.platform=u.socialLinkManager.getPlatformNameByUrl(e.url)},this.isLinkInvalid=function(e){return!e.platform&&e.url},this.data=d.data,"string"==typeof this.data.userLocation?this.addressToDisplay=this.data.userLocation:this.data.userLocation&&(this.addressToDisplay=_.get(this.data,"userLocation.name")||_.get(this.data,"userLocation.formatted_address")),this.data.dates&&this.data.dates[0]&&(this.fromDate=this.introWindow.formattedDate(this.data.dates[0]),this.fromTime=this.introWindow.formattedTime(this.data.dates[0]),this.data.dates[1]&&(this.toDate=this.introWindow.formattedDate(this.data.dates[1]),this.toTime=this.introWindow.formattedTime(this.data.dates[1])),this.data.timezone)){var h=_.find(i.TimeZones,{key:this.data.timezone});this.timezoneToDisplay=h&&h.displayName}}return t.$inject=["introWindow","introStep","osUtils","introContentTpa","consumerBiLogger","applicationState","socialLinkManager","applicationParameters","introManager"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_EVENT_DETAILS,null,!1)},t.prototype.next=function(){var t=this;this.consumerBiLogger.intro.editInfoCardPageNavigationClick("builder","next"),this.introStep.hideContent(!0).then(function(){t.introManager.prepareDataForBuilder(),t.introStep.next(e.INTRO_FINISHED),t.applicationState.goToBuilder()})},t.prototype.addEmptySocialLink=function(){var e={platform:"",url:""};this.data.socialLinks.push(e),this.osUtils.isIE||(this.focusedSocial=e)},t.prototype.deleteSocialLink=function(e){this.data.socialLinks=this.data.socialLinks.filter(function(t){return t!==e}),this.onFieldChanged(e.platform,"social",e.url,"")},t.prototype.onFieldChanged=function(e,t,a,i,n){if(i!==a){var r=i?i.length:0,o=a?i?"edit":"remove":"add";this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(e,t,r,o,"intro",n||null)}},t}();e.IntroEventDetails=t,angular.module("adiIntroInternal").component("introEventDetails",{controller:t,templateUrl:"views/intro/intro-event-details.html"})}(A||(A={})),function(e){var t=function(){function e(e,t,a){this.$parse=e,this.clientTopology=t,this.flags=a,this.logoUrl=this.getLogoPlaceholder(),this.flags.MED||(this.bannerUrl=this.getBannerFromDataOrLogo()),this.showHeader=!!_.isUndefined(this.showHeader)||this.showHeader,this.selectable=!!_.isUndefined(this.selectable)||this.selectable}return e.$inject=["$parse","clientTopology","flags"],e.prototype.getBannerFromDataOrLogo=function(){return this.$parse("media.photos[0].url")(this.data)||this.logoUrl},e.prototype.getLogoPlaceholder=function(){return this.$parse("media.logos[0].url")(this.data)},e.prototype.handleSelect=function(){this.onSelected&&this.onSelected()},e.prototype.isPlaceholder=function(){return this.logoUrl&&this.logoUrl.indexOf("/logo-placeholder")>=0},e}();e.BusinessCardStatic=t,angular.module("adiIntroInternal").component("businessCardStatic",{controller:t,templateUrl:"views/intro/business-card-static.html",bindings:{data:"=",onSelected:"&",showHeader:"<?",selectable:"<?"}})}(A||(A={})),function(e){var t=function(){function e(e){e.MED||(this.bannerStyle={backgroundImage:"url("+this.bannerUrl+")"})}return e.$inject=["flags"],e}();angular.module("adiIntroInternal").component("businessCardHeader",{controller:t,templateUrl:"views/intro/business-card-header.html",bindings:{logoUrl:"=",bannerUrl:"<?"}})}(A||(A={})),function(e){var t=function(){function e(e,t,a,i,n,r){this.previewUrls=e,this.consumerBiLogger=t,this.introAdiIntegration=a,this.$element=i,this.$timeout=n,this.flags=r}return e.$inject=["previewUrls","consumerBiLogger","introAdiIntegration","$element","$timeout","flags"],Object.defineProperty(e.prototype,"logoButtonIcon",{get:function(){return"coloration:"+(this.justReplaceButton?"replace":this.logoIsPlaceholder()?"add-small":"edit")},enumerable:!0,configurable:!0}),e.prototype.openMediaManager=function(){var e=this;this.introAdiIntegration.mediaGalleryAdapter.selectLogo().then(function(t){var a=e.previewUrls.getImageThumbnailUrl(t[0].relativeUri,t[0].mediaType);e.onEdit({$url:a,$data:t[0]})})},e.prototype.logoIsPlaceholder=function(){return this.url&&this.url.indexOf("/logo-placeholder")>=0},e.prototype.clickOnInputFile=function(){var e=this;this.inputFileElm||(this.inputFileElm=this.$element.find('[data-hook="file-upload"]')),this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder(this.origin.startsWith("welcome")?"welcome":"no-tour",this.origin),this.$timeout(function(){e.inputFileElm.click(),document.activeElement.blur()})},e.prototype.editLogoClick=function(){(this.enableEdit&&this.logoIsPlaceholder()||this.justReplaceButton)&&this.clickOnInputFile()},e}();e.BusinessCardLogo=t,angular.module("adiIntroInternal").component("businessCardLogo",{controller:t,templateUrl:"views/intro/business-card-logo.html",bindings:{url:"=",origin:"=",enableEdit:"=?",justReplaceButton:"=?",onDelete:"&",onEdit:"&",useMediaManager:"=?",showWrappingCircle:"=?",isUploading:"=",uploadError:"="}})}(A||(A={}));var w=function(){function e(){}return e.prototype.createSprite=function(e){var t=this,a=[];return e.forEach(function(e){switch(e.type){case"circle":_.isUndefined(e.radius)&&console.error("Circle definition missing radius",e),a.push(t.createSpriteCircle(e));break;case"rect":(_.isUndefined(e.width)||_.isUndefined(e.height))&&console.error("Rectangle definition missing width or height",e),a.push(t.createSpriteRect(e))}}),a},e.prototype.drawCircle=function(e,t,a,i,n,r,o){if(void 0===n&&(n="#fff"),void 0===o&&(o=0),e.save(),r){var s=r.from,l=s[0],c=s[1],d=r.to,u=d[0],h=d[1],p=e.createLinearGradient(l,c,u,h);_.forEach(r.stops,function(e){return p.addColorStop(e[0],e[1])}),e.fillStyle=p}else e.fillStyle=n;o&&(e.shadowColor=n,e.shadowBlur=o,e.shadowOffsetX=0,e.shadowOffsetY=0),e.beginPath(),e.arc(a,i,t,0,2*Math.PI),e.fill(),e.closePath(),e.restore()},e.prototype.drawRect=function(e,t,a,i,n,r,o,s){if(void 0===r&&(r="#fff"),void 0===s&&(s=0),e.save(),o){var l=o.from,c=l[0],d=l[1],u=o.to,h=u[0],p=u[1],f=e.createLinearGradient(c,d,h,p);_.forEach(o.stops,function(e){return f.addColorStop(e[0],e[1])}),e.fillStyle=f}else e.fillStyle=r;s&&(e.shadowColor=r,e.shadowBlur=s,e.shadowOffsetX=0,e.shadowOffsetY=0),e.beginPath(),e.rect(i,n,t,a),e.fill(),e.closePath(),e.restore()},e.prototype.createSpriteCircle=function(e){var t=e.name,a=e.group,i=e.type,n=e.radius,r=e.color,o=e.gradient,s=e.blur,l=document.createElement("canvas"),c=l.getContext("2d");return l.width=l.height=2*(n+s),this.drawCircle(c,n,l.width/2,l.height/2,r,o),s&&StackBlur.canvasRGBA(c.canvas,0,0,l.width,l.height,s),{name:t,group:a,type:i,src:l}},e.prototype.createSpriteRect=function(e){var t=e.name,a=e.group,i=e.type,n=e.width,r=e.height,o=e.color,s=e.gradient,l=e.blur,c=document.createElement("canvas"),d=c.getContext("2d");return c.width=2*(n+l),c.height=2*(r+l),this.drawRect(d,n,r,l,l,o,s),l&&StackBlur.canvasRGBA(d.canvas,0,0,c.width,c.height,l),{name:t,group:a,type:i,src:c}},e.prototype.createShadowSprite=function(e,t,a){var i=document.createElement("canvas").getContext("2d"),n=e.height/5,r=e.width,o=n*(t*Math.PI/180);i.canvas.width=r+o+a,i.canvas.height=n+a;var s=this.drawTrapezoid("rgba(27,105,154)",r,n,0,n,o,a),l=this.drawTrapezoid("rgba(27,105,154)",r,n,n/1.68,n-10,o,.75*a);return i.globalAlpha=.06,i.drawImage(s,0,0),i.drawImage(l,0,0),{canvas:i.canvas,width:i.canvas.width,height:i.canvas.height,delta:o}},e.prototype.drawTrapezoid=function(e,t,a,i,n,r,o){var s=document.createElement("canvas").getContext("2d");return s.canvas.width=t+r+o,s.canvas.height=a+o,s.save(),s.translate(o/2,o/2),s.fillStyle=e,s.beginPath(),s.moveTo(r,i),s.lineTo(t,i),s.lineTo(t+r,n),s.lineTo(0,n),s.closePath(),s.fill(),s.restore(),o&&StackBlur.canvasRGBA(s.canvas,0,0,s.canvas.width,s.canvas.height,o),s.canvas},e}();angular.module("adiIntroInternal").service("backdropAnimationsCanvasUtils",w);var N=function(){return function(){this.bg={color:"#67a0bd",gradient:"linear-gradient(to bottom, #6ea2c8 0%, #93c8d9 17%, #93c8d9 26%, #629bb7 58%, #4c7e9e 74%, #487697 80%, #446786 92%)"},this.options={firstTime:{duration:.75},idle:{duration:.6,minDuration:5,maxDuration:10,heightPercentage:.85,offset:{x:10,y:5},mouseOffset:{starIdle4:5,starIdle3:3,starIdle2:1.4,starIdle1:1},amount:{starIdle1:20,starIdle2:7,starIdle3:4,starIdle4:2}},slide:{duration:1,repeat:0},blank:{duration:1.4},wait:{duration:4,notify:2,durationOffset:{star1:2.4,star2:2,star3:1.7,star4:1.4,star5:1.1,line1:2.3,line2:1.9,line3:1},amount:{star1:20,star2:10,star3:7,star4:2,star5:1,line1:2,line2:1,line3:1},distance:3},next:{show:{duration:1},hide:{duration:.8}},back:{show:{duration:.2},hide:{duration:.3}},resize:{hide:{duration:.3},show:{duration:.3}},scale:{duration:.5}},this.spriteData=[{name:"starIdle1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.15)",blur:0},{name:"starIdle2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.2)",blur:1},{name:"starIdle3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.3)",blur:2},{name:"starIdle4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.2)",blur:1},{name:"star1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.4)",blur:0},{name:"star2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.3)",blur:1},{name:"star3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.5)",blur:1},{name:"star4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.3)",blur:5},{name:"star5",group:"stars",type:"rect",width:80,height:80,color:"rgba(255,255,255,0.2)",blur:20},{name:"line1",group:"lines",type:"rect",width:200,height:2,gradient:{from:[0,0],to:[200,0],stops:[[0,"rgba(255,255,255,0.3)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line2",group:"lines",type:"rect",width:300,height:3,gradient:{from:[0,0],to:[300,0],stops:[[0,"rgba(255,255,255,0.4)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line3",group:"lines",type:"rect",width:400,height:3,gradient:{from:[0,0],to:[400,0],stops:[[0,"rgba(255,255,255,0.6)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"shadow",type:"circle",group:"shadows",radius:60,gradient:{from:[0,0],to:[0,60],stops:[[0,"rgba(0,0,0,1)"],[1,"rgba(0,0,0,0.3)"]]},blur:30}]}}();angular.module("adiIntroInternal").constant("backdropAnimationsConfig",new N);var R=function(){function e(e,t,a){var i=this;this.backdropAnimationsCanvasUtils=e,this.$q=t,this.flags=a,this.shadowOpacity=1,this.horizLineOut=function(e,t){var a=i.$q.defer(),n=e.layers,r=e.timelines,o=e.state,s=o.panel.prevDimensions,l=_.find(n.panelLayers,function(e){return"panel"===e.name}),c=_.find(n.panelLayers,function(e){return"shadow"===e.name});return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(l,t,{y:"+="+s.height/2,height:2,ease:Quint.easeIn},0).to(c,t,{alpha:0,height:30,y:"+="+(c.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,t.resolve()},[o,a]),a.promise},this.vertLineOut=function(e,t){var a=i.$q.defer(),n=e.layers,r=e.timelines,o=e.state,s=o.panel.prevDimensions,l=_.find(n.panelLayers,function(e){return"panel"===e.name}),c=_.find(n.panelLayers,function(e){return"shadow"===e.name});return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(l,.7*t,{x:"+="+s.width/2,width:2,ease:Quint.easeIn},0).to(c,.7*t,{x:s.x+s.width/2-15,alpha:0,width:30,height:30,y:"+="+(c.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,t.resolve()},[o,a]),a.promise},this.horizLineCenterIn=function(e,t){var a=e.layers,n=e.timelines,r=e.state,o=i.$q.defer(),s=r.panel.nextDimensions,l=i.getPanelLayer(s),c=i.getPanelShadowLayer(e,s);return a.panelLayers=[l,c],n.transitionTimeline=n.transitionTimeline||new TimelineMax,n.transitionTimeline.set(l,{x:0,y:0,translateX:s.x+s.width/2,translateY:s.y,width:2,rotate:0,alpha:1}).to(l,.4*t,{bezier:{type:"cubic",values:[{translateX:s.x+s.width/2,translateY:s.y},{translateX:s.x+3*s.width/4,translateY:s.y},{translateX:s.x+s.width,translateY:s.y+s.height/4},{translateX:s.x+s.width,translateY:s.y+s.height/2}]},rotate:Math.PI/2,height:s.width,ease:Cubic.easeOut}).set(l,{translateX:s.x,width:s.width,height:2,rotate:0}).set(c,{height:30,y:"+="+(c.height/2-30)}).to(l,.6*t,{translateY:s.y,height:s.height,ease:Expo.easeInOut},"showPanel").to(c,.6*t,{alpha:i.shadowOpacity,height:c.height,y:"-="+(c.height/2-30),ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(e,t){e.panel.visible=!0,n.transitionTimeline=null,t.resolve()},[r,o]),o.promise},this.vertLineRightIn=function(e,t){var a=e.canvas,n=e.layers,r=e.timelines,o=e.state,s=i.$q.defer(),l=o.panel.nextDimensions,c=i.getPanelLayer(l),d=i.getPanelShadowLayer(e,l);return n.panelLayers=[c,d],r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.set(c,{x:0,y:0,rotate:0,height:2,alpha:1,translateX:l.x,translateY:l.y}).to(c,.4*t,{bezier:{type:"cubic",values:[{translateX:l.x,translateY:l.y+l.height/2},{translateX:l.x,translateY:l.y+l.height/4},{translateX:l.x+l.width/2,translateY:l.y},{translateX:l.x+l.width,translateY:l.y}]},rotate:Math.PI/2,width:l.height,height:2,ease:Cubic.easeOut}).set(c,{height:l.height,width:2,rotate:0}).set(d,{width:30,x:l.x+1.075*l.width,y:"+="+(d.height/2-30)}).to(c,.6*t,{translateX:l.x,width:l.width,ease:Expo.easeInOut},"showPanel").to(d,.6*t,{alpha:i.shadowOpacity,ease:Cubic.easeIn},"showPanel").to(d,.6*t,{x:(a.width-d.width)/2,y:"-="+(d.height/2-30),width:d.width,ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[o,s]),s.promise},this.fadeOut=function(e,t,a){var n=i.$q.defer(),r=e.layers,o=e.timelines,s=e.state;return o.transitionTimeline=o.transitionTimeline||new TimelineMax,o.transitionTimeline.to(r.panelLayers,t,{alpha:0,ease:a||Sine.easeOut},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,o.transitionTimeline=null,r.panelLayers=[],t.resolve()},[s,n]),n.promise},this.cutOut=function(e,t){var a=i.$q.defer(),n=e.layers,r=e.timelines,o=e.state;return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(n.panelLayers,.1*t,{},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,n.panelLayers=[],t.resolve()},[o,a]),a.promise},this.fadeIn=function(e,t,a){var n=e.layers,r=e.timelines,o=e.state,s=i.$q.defer(),l=o.panel.nextDimensions,c=i.getPanelLayer(l),d=i.getPanelShadowLayer(e,l);return n.panelLayers=[c,d],r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(c,t,{alpha:1,ease:a||Sine.easeOut},0).to(d,t,{alpha:i.shadowOpacity,ease:a||Sine.easeOut},0).eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[o,s]),s.promise},this.scale=function(e,t,a){var n=e.layers,r=e.timelines,o=e.state,s=i.$q.defer(),l=o.panel.nextDimensions,c=_.find(n.panelLayers,function(e){return"panel"===e.name}),d=_.find(n.panelLayers,function(e){return"shadow"===e.name}),u=i.getPanelLayer(l),h=i.getPanelShadowLayer(e,l);return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(c,t,_.assign({ease:a||Sine.easeOut},_.pick(u,["x","y","width","height"])),0).to(d,t,_.assign({ease:a||Sine.easeOut},_.pick(h,["x","y","width","height"])),0).eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[o,s]),s.promise},this.floatIn=function(e,t){var a=e.layers,n=e.timelines,r=e.state.panel.nextDimensions,o=i.fadeIn(e,t,Quad.easeIn);return n.transitionTimeline.from(a.panelLayers,t,{x:"-="+r.width/2,ease:Quad.easeOut},0),o},this.floatOut=function(e,t){var a=e.layers,n=e.timelines,r=e.state.panel.prevDimensions,o=i.fadeOut(e,t,Quad.easeInOut);return n.transitionTimeline.to(a.panelLayers,t,{x:"+="+r.width/2,ease:Quad.easeIn},0),o},this.fadeAndScaleIn=function(e,t){var a=e.layers,n=e.timelines,r=e.state.panel.nextDimensions,o=i.fadeIn(e,t,Quint.easeIn);return n.transitionTimeline.from(a.panelLayers,t,{width:"-="+.1*r.width,height:"-="+.1*r.height,x:"+="+.05*r.width,y:"+="+.05*r.height,ease:Quad.easeOut},0),o},this.particlesIn=function(e,t){var a=e.layers,n=e.timelines,r=e.state,o=i.$q.defer(),s=r.panel.nextDimensions,l=s.x,c=s.y,d=s.width,u=s.height,h={width:70,height:70},p={width:70,height:70},f={width:35,height:35},g={width:45,height:45},m={width:60,height:60},y={width:70,height:70},b=[{name:"cube",params:[p.width,p.height,0,0,"#fff"]}],S={},T=[{name:"a",canvas:"cube",x:l+.15*d,y:c+.15*u,width:g.width,height:g.height},{name:"b",canvas:"cube",x:l+.7*d,y:c+.15*u,width:g.width,height:g.height},{name:"c",canvas:"cube",x:l+.9*d,y:c+.3*u,width:g.width,height:g.height},{name:"d",canvas:"cube",x:l+.05*d,y:c+.5*u,width:f.width,height:f.height},{name:"e",canvas:"cube",x:l+.2*d,y:c+.6*u,width:m.width,height:m.height},{name:"g",canvas:"cube",x:l+.7*d,y:c+.55*u,width:f.width,height:f.height},{name:"h",canvas:"cube",x:l+.05*d,y:c+.9*u,width:f.width,height:f.height},{name:"i",canvas:"cube",x:l+.55*d,y:c+.85*u,width:f.width,height:f.height},{name:"j",canvas:"cube",x:l+.1*d,y:c+.7*u,width:y.width,height:y.height},{name:"k",canvas:"cube",x:l+.95*d,y:c+.65*u,width:f.width,height:f.height}];_.forEach(b,function(e){var t,a=i.getNewCanvasCtx(e.params[0],e.params[1]);(t=i.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[i,a].concat(e.params)),S[e.name]=a.canvas});var v=_.map(T,function(e){var t=S[e.canvas];return{x:e.x,y:e.y,width:e.width,height:e.height,alpha:1,name:e.name,image:t}}),I=i.getPanelLayer(r.panel.nextDimensions),k=i.getPanelShadowLayer(e,r.panel.nextDimensions);a.panelLayers=[I,k].concat(v);var M=_.keyBy(a.panelLayers,"name"),C=Quart.easeOut,E=Quint.easeOut,A=.6*t,w=.4*t;return n.transitionTimeline=n.transitionTimeline||new TimelineMax,n.transitionTimeline.set(I,{width:h.width,height:h.height,alpha:1}).addLabel("particles",0).addLabel("panel","particles+="+A).to(v,A,{alpha:.2,ease:C},"particles+="+.5*A).from(M.a,t,{x:l+.3*d,y:c+.25*u,ease:C},"particles").from(M.b,t,{x:l+.62*d,y:c+.35*u,ease:C},"particles").from(M.c,t,{x:l+.8*d,y:c+.33*u,ease:C},"particles").from(M.d,t,{x:l+.41*d,y:c+.48*u,ease:C},"particles").from(M.e,t,{x:l+.3*d,y:c+.55*u,ease:C},"particles").from(M.g,t,{x:l+.6*d,y:c+.5*u,ease:C},"particles").from(M.h,t,{x:l+.38*d,y:c+.7*u,ease:C},"particles").from(M.i,t,{x:l+.6*d,y:c+.7*u,ease:C},"particles").from(M.j,t,{x:l+.3*d,y:c+.6*u,ease:C},"particles").from(M.k,t,{x:l+.8*d,y:c+.55*u,ease:C},"particles").fromTo(I,A+w/2,{x:l+.46*d,y:c+.42*u},{x:l+.1*d,y:c+.1*u,width:.8*d,height:.8*u,ease:SlowMo.ease.config(.1,.6,!1)},0).to(I,w/2,{x:l,y:c,width:d,height:u,ease:E},A+w/2).to(k,.75*w,{delay:.25*w,alpha:i.shadowOpacity,ease:E},"panel").from(k,w,{height:30,width:30,x:l+d/2-15,ease:E},"panel").eventCallback("onComplete",function(e,t,a,i,n,r){a.panel.visible=!0,e.transitionTimeline=null,t.panelLayers=[n,r],i.resolve()},[n,a,r,o,I,k]),o.promise},this.cornersOut=function(e,t){var a=e.layers,n=e.timelines,r=e.state,o=i.$q.defer(),s=r.panel.prevDimensions,l=s.x,c=s.y,d=s.width,u=s.height,h=r.panel.nextDimensions,p=c+u,f=l+d,g=Expo.easeOut,m=t/2,y=Math.min(d,u),b=Math.sqrt(Math.pow((y-200)/2,2)+Math.pow((y-200)/2,2)),S=Math.asin((u-200)/2/b),T=[{name:"particle",params:[100,100,0,0,"#fff"]},{name:"line",params:[b,2,0,0,"#fff"]}],v=[{name:"particleTL",canvas:"particle",x:l,y:c},{name:"particleTR",canvas:"particle",x:f-100,y:c},{name:"particleBR",canvas:"particle",x:f-100,y:p-100},{name:"particleBL",canvas:"particle",x:l,y:p-100},{name:"lineTL",canvas:"line",x:0,y:0,rotate:S,translateX:l+100,translateY:c+100},{name:"lineTR",canvas:"line",x:0,y:0,rotate:Math.PI-S,translateX:f-100,translateY:c+100},{name:"lineBR",canvas:"line",x:0,y:0,rotate:Math.PI+S,translateX:f-100,translateY:p-100},{name:"lineBL",canvas:"line",x:0,y:0,rotate:2*Math.PI-S,translateX:l+100,translateY:p-100}],I={};_.forEach(T,function(e){var t,a=i.getNewCanvasCtx(e.params[0],e.params[1]);(t=i.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[i,a].concat(e.params)),I[e.name]=a.canvas});var k=_.map(v,function(e){var t=I[e.canvas];return{x:e.x,y:e.y,width:t.width,height:t.height,alpha:1,rotate:e.rotate,translateX:e.translateX,translateY:e.translateY,name:e.name,image:t}});a.panelLayers=a.panelLayers.concat(k);var M=_.keyBy(a.panelLayers,"name"),C=[M.lineTL,M.lineTR,M.lineBR,M.lineBL],E=[M.particleTL,M.particleTR,M.particleBR,M.particleBL];return n.transitionTimeline=n.transitionTimeline||new TimelineMax,n.transitionTimeline.set(M.panel,{alpha:0,delay:.1}).to(M.shadow,t/4,{alpha:0},"start").fromTo(C,t,{width:.75*b},{width:0,ease:g},"start").to(E,m,{width:16,height:16,ease:g},"start").to(M.particleTR,m,{x:f-16,ease:g},"start").to(M.particleBR,m,{x:f-16,y:p-16,ease:g},"start").to(M.particleBL,m,{y:p-16,ease:g},"start").to(M.lineTL,m,{translateX:l+16,translateY:c+16,ease:g},"start").to(M.lineTR,m,{translateX:f-16,translateY:c+16,ease:g},"start").to(M.lineBR,m,{translateX:f-16,translateY:p-16,ease:g},"start").to(M.lineBL,m,{translateX:l+16,translateY:p-16,ease:g},"start").eventCallback("onComplete",function(e,t,a,i){a.panel.visible=!1,e.transitionTimeline=null,i.resolve()},[n,a,r,o]),_.isEqual(r.panel.prevDimensions,r.panel.nextDimensions)||n.transitionTimeline.to(M.particleTL,.2*t,{x:h.x,y:h.y,ease:Linear.easeNone},t).to(M.particleTR,.2*t,{x:h.x+h.width-16,y:h.y,ease:Linear.easeNone},t).to(M.particleBR,.2*t,{x:h.x+h.width-16,y:h.y+h.height-16,ease:Linear.easeNone},t).to(M.particleBL,.2*t,{x:h.x,y:h.y+h.height-16,ease:Linear.easeNone},t),o.promise},this.cornersIn=function(e,t){var a=e.canvas,n=e.layers,r=e.timelines,o=e.state,s=i.$q.defer(),l=o.panel.nextDimensions,c=l.x,d=l.y,u=l.width,h=l.height,p=d+h,f=c+u,g=Expo.easeInOut,m=t/2,y=[{name:"particle",params:[16,16,0,0,"#fff"]},{name:"hLine",params:[u,1,0,0,"#fff"]},{name:"vLine",params:[1,h,0,0,"#fff"]}],b=[{name:"particleTL",canvas:"particle",x:c,y:d},{name:"particleTR",canvas:"particle",x:f-16,y:d},{name:"particleBR",canvas:"particle",x:f-16,y:p-16},{name:"particleBL",canvas:"particle",x:c,y:p-16},{name:"lineT",canvas:"hLine",x:c+32,y:d+8},{name:"lineR",canvas:"vLine",x:f-8,y:d+32},{name:"lineB",canvas:"hLine",x:f-16,y:p-8},{name:"lineL",canvas:"vLine",x:c+8,y:p-16}],S={};_.forEach(y,function(e){var t,a=i.getNewCanvasCtx(e.params[0],e.params[1]);(t=i.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[i,a].concat(e.params)),S[e.name]=a.canvas});var T=_.map(b,function(e){var t=S[e.canvas];return{x:e.x,y:e.y,width:t.width,height:t.height,alpha:1,name:e.name,image:t}}),v=i.getPanelLayer(o.panel.nextDimensions),I=i.getPanelShadowLayer(e,o.panel.nextDimensions);n.panelLayers=[v,I].concat(T);var k=_.keyBy(n.panelLayers,"name"),M=[k.lineT,k.lineR,k.lineB,k.lineL];return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.set(M,{width:1,height:1}).to(k.particleTL,m,{x:c+u-16,ease:g},"particles").to(k.particleTR,m,{y:d+h-16,ease:g},"particles").to(k.particleBR,m,{x:c,ease:g},"particles").to(k.particleBL,m,{y:d,ease:g},"particles").to(k.lineT,m,{width:u-32,ease:g},"particles").to(k.lineR,m,{height:h-32,ease:g},"particles").to(k.lineB,m,{x:c+16,width:u-32,ease:g},"particles").to(k.lineL,m,{y:d+16,height:h-32,ease:g},"particles").addLabel("hideLines").to(k.lineT,m,{x:c+u-16,width:0,ease:g},"hideLines").to(k.lineR,m,{y:d+h-16,height:0,ease:g},"hideLines").to(k.lineB,m,{width:0,ease:g},"hideLines").to(k.lineL,m,{height:0,ease:g},"hideLines").fromTo(v,m,{width:u/2,height:h/2,x:c+u/4,y:d+h/4,alpha:.5,immediateRender:!1},{x:c,y:d,width:u,height:h,alpha:1,ease:Expo.easeOut},"hideLines+=0.2").fromTo(I,m,{x:c+u/4,width:u/2,height:h/8},{x:(a.width-I.width)/2,width:I.width,height:I.height,alpha:i.shadowOpacity,ease:Expo.easeOut},"hideLines+=0.2").eventCallback("onComplete",function(e,t,a,i,n,r){a.panel.visible=!0,e.transitionTimeline=null,t.panelLayers=[n,r],i.resolve()},[r,n,o,s,v,I]),s.promise}}return e.$inject=["backdropAnimationsCanvasUtils","$q","flags"],e.prototype.getNewCanvasCtx=function(e,t){var a=document.createElement("canvas"),i=a.getContext("2d");return a.width=e,a.height=t,i},e.prototype.getPanelLayer=function(e){var t=this.getNewCanvasCtx(e.width,e.height);return this.backdropAnimationsCanvasUtils.drawRect(t,e.width,e.height,0,0,"#fff"),{x:e.x,y:e.y,width:e.width,height:e.height,alpha:0,translateX:0,translateY:0,rotate:0,name:"panel",image:t.canvas}},e.prototype.getPanelShadowLayer=function(e,t){var a=e.canvas,i=this.backdropAnimationsCanvasUtils.createShadowSprite(t,45,45);return{x:(a.width-i.width)/2,y:.8*a.height,width:i.width,height:i.height,alpha:0,name:"shadow",image:i.canvas}},e}();angular.module("adiIntroInternal").service("backdropAnimationsTransitions",R);var O=function(){function e(e,t,a,i,n,r,o){var s=this;this.backdropAnimationsConfig=e,this.backdropAnimationsCanvasUtils=t,this.backdropAnimationsTransitions=a,this.$q=i,this.clientTopology=n,this.flags=r,this.$window=o,this.trackMouseMovement=function(e){var t=e.clientX,a=e.clientY,i=s.scene,n=i.layers,r=i.canvas,o=i.state,l=s.config.options.idle.mouseOffset,c=1-t/(r.width/2),d=1-a/(r.height/2);_.forEach(n.idleLayers,function(e){e.translateX=c*l[e.name],e.translateY=d*l[e.name]}),o.drawOnTicker=!0},this.config=_.merge({},e),this.scene=null}return e.$inject=["backdropAnimationsConfig","backdropAnimationsCanvasUtils","backdropAnimationsTransitions","$q","clientTopology","flags","$window"],e.prototype.init=function(e,t){var a=this;this.setBg(e),this.scene=this.setScene(this.setCanvas(e),this.config.spriteData),TweenMax.ticker.addEventListener("tick",this.drawLayers,this),this.setDimensions(t);var i=t?this.play("idle"):this.$q.when();return this.scene.state.transitionDeferred=i.then(function(){return t?a.runPanelAnimation(a.config.options.firstTime.duration,"firstTime"):a.$q.when()}),this.scene.state.transitionDeferred},e.prototype.play=function(e,t){var a=this;if(void 0===e&&(e=null),this.scene){var i,n=this.config.options,r=this.scene.state,o=this.$q,s=r.transitionDeferred;switch(this.setDimensions(t),e){case"next":i=r.panel.visible?s.then(function(){return a.runPanelAnimation(n.next.hide.duration,"nextOut")}).then(function(){return a.runPanelAnimation(n.next.show.duration,"nextIn")}):s.then(function(){return a.runPanelAnimation(n.next.show.duration,"firstTime")});break;case"back":i=r.panel.visible?s.then(function(){return a.runPanelAnimation(n.back.hide.duration,"backOut")}).then(function(){return o.all([a.runPanelAnimation(n.back.show.duration,"backIn"),a.showIdleLayers(n.idle.duration,n.idle.amount),a.parallaxIdleOnMouse()])}):s.then(function(){return o.all([a.runPanelAnimation(n.back.show.duration,"firstTime"),a.showIdleLayers(n.idle.duration,n.idle.amount),a.parallaxIdleOnMouse()])});break;case"skip":i=this.play("next");break;case"wait":i=s.then(function(){return o.all([a.runPanelAnimation(n.next.hide.duration,"blankOut"),a.hideIdleLayers(n.next.hide.duration)]).then(function(){return o.all([a.showIdleLayers(n.idle.duration,n.wait.amount),a.infiniteSlideIdleLayer(n.wait.duration)])})});break;case"blank":i=s.then(function(){return a.runPanelAnimation(n.next.hide.duration,"blankOut")}).then(function(){return a.stopParallaxOnMouse()}).then(function(){return a.hideIdleLayers(n.blank.duration)});break;case"idle":i=s.then(function(){return o.all([a.showIdleLayers(n.idle.duration,n.idle.amount),a.parallaxIdleOnMouse()])})}return r.transitionDeferred=i,r.transitionDeferred}},e.prototype.resize=function(e){var t=this,a=this.scene.state;return a.resizeDeferred?this.resizeDebounced(e):(a.resizeDeferred=this.$q.defer(),this.resizeDebounced=_.debounce(function(e){t.setDimensions(e),a.resizeDeferred.resolve()},250,{leading:!1,trailing:!0}),this.resizeDebounced(e),a.resizeNotifyDeferred=a.transitionDeferred.then(function(){return a.resizeDeferred.promise}).then(function(){return t.delayedResize()})),a.resizeNotifyDeferred},e.prototype.scale=function(e,t){return void 0===t&&(t=this.config.options.scale.duration),this.scene.state.panel.visible?(this.setDimensions(e),this.runPanelAnimation(t,"scale")):this.$q.when()},e.prototype.delayedResize=function(){var e=this,t=this.config.options,a=this.scene,i=a.canvas,n=a.state,r=i.parentNode;return n.resizeDeferred=null,this.setCanvasSize(r.offsetWidth,r.offsetHeight),n.panel.visible?this.runPanelAnimation(t.resize.hide.duration,"resizeOut").then(function(){return e.runPanelAnimation(t.resize.show.duration,"resizeIn")}):this.$q.when()},e.prototype.dispose=function(){if(this.stopParallaxOnMouse(),TweenMax.ticker.removeEventListener("tick",this.drawLayers),this.scene){var e=this.scene,t=e.state,a=e.timelines;return _(a).compact().forEach(function(e){return e.kill().clear()}),_.get(t,["transitionDeferred","reject"])&&t.transitionDeferred.reject(),_.get(t,["resizeDeferred","reject"])&&t.resizeDeferred.reject(),_.get(t,["resizeNotifyDeferred","reject"])&&t.resizeNotifyDeferred.reject(),this.scene=null,this.$q.when()}},e.prototype.setBg=function(e){var t=this.config.bg,a=t.imageId,i=t.color,n=t.gradient,r=Math.min(window.screen.width,2048),o=Math.min(window.screen.height,1108),s=a?"url("+this.clientTopology.mediaUrl+"/"+a+"/v1/fill/w_"+r+",h_"+o+",al_c,q_90/"+a+")":"";e.style.background=i+" "+(n||s)+" no-repeat 50% 50% / cover"},e.prototype.setScene=function(e,t){var a=this.backdropAnimationsCanvasUtils.createSprite(t),i={drawOnTicker:!1,nextTransitionIndex:0,transitionDeferred:this.$q.when(),resizeDeferred:null,resizeNotifyDeferred:null,globalAlpha:1,panel:{visible:!1,prevDimensions:{},nextDimensions:{}}},n=document.createElement("canvas");return n.width=e.width,n.height=e.height,{sprite:a,layers:{idleLayers:[],panelLayers:[]},timelines:{idleTimeline:null,transitionTimeline:null,slideTimeline:null,alphaTimeline:null},canvas:e,offScreenCanvas:n,state:i}},e.prototype.setCanvas=function(e){var t=document.createElement("canvas");return t.width=e.offsetWidth,t.height=e.offsetHeight,t.id="backdrop-canvas",e.appendChild(t),t},e.prototype.setCanvasSize=function(e,t){var a=this.scene,i=a.canvas,n=a.offScreenCanvas;i.width=n.width=e,i.height=n.height=t},e.prototype.setDimensions=function(e){e&&(this.scene.state.panel.prevDimensions=this.scene.state.panel.nextDimensions,this.scene.state.panel.nextDimensions=e)},e.prototype.drawLayers=function(){var e=this.scene,t=e.layers,a=e.state,i=e.timelines,n=e.canvas,r=e.offScreenCanvas;if(_.some(i,function(e){return e&&e.isActive()})&&(a.drawOnTicker=!0),a.drawOnTicker){_.every(i,function(e){return!e||!e.isActive()})&&(a.drawOnTicker=!1);var o=r.getContext("2d"),s=n.getContext("2d");o.clearRect(0,0,n.width,n.height),s.clearRect(0,0,n.width,n.height),a.globalAlpha>0&&(_.values(t).forEach(function(e){e.forEach(function(e){if(o.save(),e.alpha>0){o.globalAlpha=e.alpha;var t=_.isNumber(e.scaleX)?e.scaleX:1,a=_.isNumber(e.scaleY)?e.scaleY:1,i=e.rotate||0,n=_.isNumber(e.translateX)?e.translateX:0,r=_.isNumber(e.translateY)?e.translateY:0;o.setTransform(Math.cos(i)*t,Math.sin(i),-Math.sin(i),Math.cos(i)*a,n,r),e.source?o.drawImage(e.image,e.source.x||0,e.source.y||0,e.source.width||e.width,e.source.height||e.height,e.x,e.y,e.width,e.height):o.drawImage(e.image,e.x,e.y,e.width,e.height),o.restore()}})}),s.globalAlpha=a.globalAlpha,s.drawImage(o.canvas,0,0))}},e.prototype.stopParallaxOnMouse=function(){return this.$window.removeEventListener("mousemove",this.trackMouseMovement),this.$q.when()},e.prototype.parallaxIdleOnMouse=function(){return this.$window.addEventListener("mousemove",this.trackMouseMovement,!1),this.$q.when()},e.prototype.runPanelAnimation=function(e,t){return this.getAnimationFunc(t)(this.scene,e)},e.prototype.getAnimationFunc=function(e){var t=this.backdropAnimationsTransitions,a=[{out:t.horizLineOut,inn:t.vertLineRightIn},{out:t.cornersOut,inn:t.cornersIn},{out:t.vertLineOut,inn:t.horizLineCenterIn},{out:t.cutOut,inn:t.particlesIn}];switch(e){case"nextIn":var i=a[this.scene.state.nextTransitionIndex].inn;return this.scene.state.nextTransitionIndex=(this.scene.state.nextTransitionIndex+1)%a.length,i;case"nextOut":return a[this.scene.state.nextTransitionIndex].out;case"firstTime":return t.fadeAndScaleIn;case"blankOut":return t.fadeOut;case"backIn":return t.floatIn;case"backOut":return t.floatOut;case"resizeIn":return t.fadeIn;case"resizeOut":return t.fadeOut;case"scale":return t.scale}},e.prototype.showIdleLayers=function(e,t){void 0===e&&(e=1);var a=this.$q.defer(),i=this.scene,n=i.layers,r=i.timelines,o=i.canvas,s=this.config.options;return n.idleLayers.length?(a.resolve(),a.promise):(r.alphaTimeline=r.alphaTimeline||new TimelineMax,n.idleLayers=this.createIdleLayers(o.width,o.height*(s.idle.heightPercentage||1),t),r.alphaTimeline.set(n.idleLayers,{alpha:0}).to(n.idleLayers,e,{alpha:1}).eventCallback("onComplete",function(e,t){t.alphaTimeline=null,e.resolve()},[a,r]),this.createIdleLayersTimeline(),a.promise)},e.prototype.hideIdleLayers=function(e){void 0===e&&(e=1);var t=this.$q.defer(),a=this.scene,i=a.layers,n=a.timelines;return i.idleLayers.length?(n.alphaTimeline=n.alphaTimeline||new TimelineMax,n.alphaTimeline.to(i.idleLayers,e,{alpha:0}).eventCallback("onComplete",function(e,t,a){this.stopInfiniteSlide(),a.idleTimeline&&(a.idleTimeline.pause().kill(),a.idleTimeline=null),a.alphaTimeline=null,t.idleLayers=[]},[t,i,n],this).call(function(e){return e.resolve()},[t],this,.05),t.promise):(t.resolve(),t.promise)},e.prototype.infiniteSlideIdleLayer=function(e){void 0===e&&(e=1);var t=this.$q.defer(),a=this.scene,i=a.layers,n=a.timelines,r=a.canvas,o=this.config.options.wait.durationOffset,s=this.config.options.wait.distance;if(!i.idleLayers.length)return t.resolve(),t.promise;if(n.slideTimeline){if(n.slideTimeline.isActive())return t.resolve(),t.promise;n.slideTimeline.progress(1).clear()}n.slideTimeline=new TimelineMax;var l=this.createIdleLayers(r.width*(s-1),r.height,this.config.options.wait.amount,r.width),c=i.idleLayers.map(function(e){return _.assign(_.omit(e,"_gsTweenID"),{x:e.x+r.width*s,alpha:1})});return i.idleLayers=i.idleLayers.concat(l,c),i.idleLayers.forEach(function(t){n.slideTimeline.fromTo(t,e*o[t.name],{x:t.x},{x:"-="+r.width*s,ease:Linear.easeNone,repeat:-1},0)}),n.slideTimeline.call(function(){return t.resolve()},[t],null,this.config.options.wait.notify),t.promise},e.prototype.stopInfiniteSlide=function(){var e=this.scene,t=e.layers,a=e.timelines,i=e.canvas;return a.slideTimeline&&(t.idleLayers=t.idleLayers.filter(function(e){return e.x>=0&&e.x<=i.width+e.width}),a.slideTimeline&&(a.slideTimeline.pause().kill(),a.slideTimeline=null)),this.$q.when()},e.prototype.createIdleLayersTimeline=function(){var e=this,t=this.scene,a=t.timelines,i=t.layers;a.idleTimeline=a.idleTimeline||new TimelineMax,a.idleTimeline.clear(),a.idleTimeline.autoRemoveChildren=!0,_.forEach(i.idleLayers,function(t,i){return e.createSingleLayerTweens(t,a.idleTimeline)})},e.prototype.createSingleLayerTweens=function(e,t){var a=this,i=this.config.options,n=(_.random(0,1,!1)?-1:1)*e.offset.x,r=(_.random(0,1,!1)?-1:1)*e.offset.y,o=_.random(i.idle.minDuration,i.idle.maxDuration,!1);t.to(e,o/2,{y:"+="+r,repeat:1,yoyo:!0,ease:Sine.easeInOut},0).to(e,o,{x:"+="+n,repeat:0,ease:Sine.easeInOut,onComplete:function(){a.scene&&a.createIdleLayersTimeline()},onCompleteScope:this},0)},e.prototype.createIdleLayers=function(e,t,a,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=this.scene.sprite,o=this.config.options,s=[];return _.forEach(a,function(e,t){return s=s.concat(Array(e).fill(t))}),_.map(s,function(a){var s=r.find(function(e){return e.name===a}).src;return{x:_.random(s.width,e-s.width,!1)+i,y:_.random(s.height,t-s.height,!1)+n,width:s.width,height:s.height,alpha:1,name:a,image:s,offset:{x:o.idle.offset.x,y:o.idle.offset.y}}})},e}();angular.module("adiIntroInternal").service("backdropAnimations",O);var x=function(){function e(e){var t=this;this.backdropAnimations=e;var a=document.querySelector("nav"),i=document.querySelector("#backdrop");console.log(i),this.backdropAnimations.init(i).then(function(){return console.log("init done")}),window.addEventListener("resize",function(){t.backdropAnimations.resize({width:600,height:600,x:(window.innerWidth-600)/2,y:(window.innerHeight-600)/2}).then(function(){return console.log("resize done")})}),a.addEventListener("click",function(e){switch(console.log(e.target.id),e.target.id){case"next":t.backdropAnimations.play("next",{width:800,height:500,x:(window.innerWidth-800)/2,y:(window.innerHeight-500)/2}).then(function(){return console.log("next done")});break;case"back":t.backdropAnimations.play("back",{width:800,height:300,x:(window.innerWidth-800)/2,y:(window.innerHeight-300)/2}).then(function(){return console.log("back done")});break;case"skip":t.backdropAnimations.play("skip",{width:400,height:200,x:(window.innerWidth-400)/2,y:(window.innerHeight-200)/2}).then(function(){return console.log("skip done")});break;case"blank":t.backdropAnimations.play("blank").then(function(){return console.log("blank done")});break;case"wait":t.backdropAnimations.play("wait").then(function(){return console.log("wait done")});break;case"idle":t.backdropAnimations.play("idle").then(function(){return console.log("idle done")})}})}return e.$inject=["backdropAnimations"],e}();angular.module("adiIntroInternal").component("backdropPlayground",{templateUrl:"views/backdrop-playground.html",controller:x});try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/category-search.html","<div class='category-search'>\n<form class='search-form b01-big-text-field -relative' data-hook='type-form' ng-submit='$ctrl.submit()'>\n<md-autocomplete data-hook='input-container' dont-store-matches='$ctrl.dontStoreMatches' hidden-override='$ctrl.isDropdownSuggestionsHidden' intro-md-autocomplete intro-md-disable-on-resize='false' intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl._onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-menu-container-class='{{::$ctrl.acOptionsContainerClass}}' md-no-cache='true' md-search-changed='$ctrl._onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected' placeholder='{{ ::$ctrl.$translate.instant(&#39;intro.category-search.input-placeholder&#39;) }}'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='::{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<div class='item-text' md-highlight-flags='i' md-highlight-text='$ctrl.getHighlightText(category)'>{{:: $ctrl.getDisplayText(category) }}</div>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search-intro'></i>\n</form>\n<div cc-scrollbar class='examples faded thin-scrollbar' data-hook='search-example-label' ng-if='!$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{::'intro.category-search.suggestions-label' | translate}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl._onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{:: $ctrl.getExampleText(example)}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='$ctrl.isEmptySearch() &amp;&amp; !$ctrl.hideNoCategoryMatches'>\n<div class='icon'></div>\n<div class='title' compile='::&#39;intro.category-search.no-result-label&#39; | translate'></div>\n<ul class='no-category-generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl._onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='generic-suggestions' data-hook='empty-message' ng-if='$ctrl.shouldShowGenericPopover() &amp;&amp; !$ctrl.isEmptySearch() &amp;&amp; !$ctrl.hideGenericSuggestions'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul class='generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl._onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/file-upload-select.html","<input accept='image/png ,image/gif, image/jpg' data-hook='file-upload' style='display:none' type='file'>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/image-selector.html","<div class='image-selector'>\n<div class='image-tile' ng-class='{&quot;selected&quot;: image.isChecked}' ng-click='$ctrl.onTileClicked($index)' ng-mouseout='isHover=false' ng-mouseover='isHover=true' ng-repeat='image in $ctrl.getImages' ng-style='$ctrl.getImageStyle(image, isHover)'>\n<cc-svg-icon data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true' ng-if='image.isChecked'></cc-svg-icon>\n</div>\n<div class='image-tile empty-tile no-images' ng-if='($ctrl.flags.platformsScreenV2 || $ctrl.flags.platformsScreen3 || $ctrl.flags.platformsScreen4) &amp;&amp; !$ctrl.getImages || !$ctrl.getImages.length'>\n{{::'intro.no-images' | translate}}\n</div>\n<div class='image-tile empty-tile' ng-click='$ctrl.onEmptyTileClicked()' ng-if='!$ctrl.isShowAll'>\n<span class='empty-text'>+{{ $ctrl.moreImagesNumber }}</span>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-back-button.html","<div class='intro-back-button'>\n<button data-hook='back' ng-attr-type='button' ng-click='$ctrl.handleClick()'>\n<cc-svg-icon class='back-arrow-icon' icon='misc:longarrow'></cc-svg-icon>\n<span class='button-text back-button' translate='intro.back-button'></span>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-next-button.html","<button class='p9-primary next-button' data-hook='next' focus-if='$ctrl.focusIf' ng-attr-type='button' ng-class='{&#39;-disabled&#39;: $ctrl.isDisabled}' ng-click='$ctrl.handleClick()' ng-disabled='$ctrl.isDisabled'>\n<span class='button-text' translate='{{$ctrl.getLabel()}}'></span>\n</button>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-skip-button.html","<button class='empty-button' data-hook='skip' ng-attr-type='button' ng-click='$ctrl.handleClick()'>\n<span class='button-text skip-button' translate='{{$ctrl.getLabel()}}'></span>\n</button>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-header.html","<div class='banner' ng-if='$ctrl.bannerUrl' ng-style='$ctrl.bannerStyle'></div>\n<svg height='100%' ng-if='!$ctrl.bannerUrl' preserveAspectRatio='none' viewBox='0 0 91 91' width='100%'>\n<image filter='url(#intro-image-blur)' height='100%' ng-attr-href='{{$ctrl.logoUrl}}' width='100%'></image>\n</svg>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-static.html","<div class='intro-bcsn-wrapper' ng-class='{&#39;intro-bcsn-selectable&#39;: $ctrl.selectable}'>\n<div class='intro-bcsn-logo' ng-style='{&#39;background-image&#39;: &#39;url(&#39; + $ctrl.logoUrl + &#39;)&#39;}'>\n<div class='camera' ng-if='!$ctrl.logoUrl'></div>\n</div>\n<div class='intro-bcsn-details'>\n<div class='intro-bcsn-name'>{{$ctrl.data.name}}</div>\n<div class='intro-bcsn-email'>{{$ctrl.data.contactDetails.email || '&nbsp;'}}</div>\n<div class='intro-bcsn-phone'>{{$ctrl.data.contactDetails.phone || '&nbsp;'}}</div>\n<div class='intro-bcsn-address'>{{$ctrl.data.contactDetails.address.fullAddress}}</div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.data.isLoading'></cc-svg-icon>\n<div class='a05-forward-button intro-bcsn-button cc-x-height' ng-if='!$ctrl.data.isLoading &amp;&amp; $ctrl.selectable'>\n<span>{{::'intro.select-user.select-button' | translate }}</span>\n</div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-blocked-category.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' compile='::&#39;intro.blocked-category.title&#39; | translate'></div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;/assets/images/intro/new/go-to-editor.png&#39; | externalImage}}'>\n<div class='text' data-hook='blocked-message-desc' translate='intro.blocked-category.description'></div>\n<a class='p9-primary' data-hook='blocked-message-link' ng-click='$ctrl.onNext()' ng-href='{{ $ctrl.blockedRedirectUrl }}' target='_blank'>\n<span class='button-text' translate='intro.blocked-category.back-button'></span>\n</a>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-dates.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='intro.business-dates.input-label'></div>\n</left>\n<right>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<div class='error-message' ng-if='$ctrl.wrongStartDate()' translate='intro.business-dates.wrong-start-date'></div>\n<div class='error-message' ng-if='$ctrl.wrongEndDate()' translate='intro.business-dates.wrong-end-date'></div>\n<div class='date' data-hook='date' ng-repeat='date in $ctrl.dates track by $index'>\n<div class='date-label t04a-label' ng-class='{&quot;date-from-label&quot;: $first}' ng-if='$ctrl.hasEndDate()' translate='{{$ctrl.dateLabel($index)}}'></div>\n<div class='date-picker'>\n<i class='cc-icon-booking'></i>\n<div class='like-input placeholder' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='!$ctrl.dates[$index]' translate='intro.business-dates.date-placeholder'></div>\n<div class='like-input' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='$ctrl.dates[$index]'>\n{{$ctrl.dates[$index] | date:'MM/dd/yyyy'}}\n</div>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n<div class='time-picker'>\n<i class='cc-icon-time'></i>\n<md-select class='intro-select' data-hook='time-picker' intro-md-select md-container-class='intro-md-select cc-md-select' md-on-close='$ctrl.onTimeClosed($event, $index)' ng-change='$ctrl.timeChanged($index, $ctrl.selectedTimes[$index])' ng-click='$ctrl.onTimeClicked($event, $index)' ng-model='$ctrl.selectedTimes[$index]' placeholder='{{:: &quot;intro.business-dates.time-placeholder&quot; | translate}}'>\n<md-option ng-bind='time.display' ng-repeat='time in $ctrl.optionalTimes track by time.value' ng-value='time.value'></md-option>\n</md-select>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n</div>\n<div class='timezone' data-hook='timezone' ng-if='$ctrl.hasStartDate()'>\n<span class='t04a-label' ng-bind='$ctrl.timezone'></span>\n<button class='p9b-text-button' ng-click='$ctrl.onTimezoneClicked()' translate='intro.business-dates.change-timezone' type='button'></button>\n<md-select class='intro-select' data-hook='timezone-select' intro-md-select md-container-class='intro-md-select cc-md-select' ng-change='$ctrl.timezoneChanged()' ng-model='$ctrl.timezone'>\n<md-option adi-automation='{{zone.key}}' ng-bind='zone.displayName' ng-repeat='zone in $ctrl.timezones track by zone.key' ng-value='zone.key'></md-option>\n</md-select>\n</div>\n<div class='add-date' ng-if='$ctrl.hasStartDate() &amp;&amp; !$ctrl.hasEndDate()'>\n<div class='add-button' data-hook='add-date' ng-click='$ctrl.addDate()' type='button'>\n<div class='add-button-icon cc-icon-add-small cc-icon-circle'></div>\n<div class='add-button-label' translate='intro.business-dates.add-date'></div>\n</div>\n</div>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-location.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::$ctrl.getLocationTitle() | translate' data-hook='input-label'></div>\n</left>\n<right>\n<form class='b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' class='input-icon' icon='misc:location'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='business-location-input' focus-if='!$os.isIE' force-selection='!$ctrl.isOptional' g-places-autocomplete intro-g-places-autocomplete='$ctrl.introPlacesOptions' ng-blur='$ctrl.hidePlaceholder = false' ng-click='$ctrl.hidePlaceholder = true' ng-model='$ctrl.address' options='$ctrl.placesOptions' placeholder='{{$ctrl.placeholder | translate}}'>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline' ng-if='!$ctrl.isOptional' wix-translate-compile='intro.business-location.subline'></div>\n<div class='search-tip-title' data-hook='search-tip' ng-if='$ctrl.isOptional' ng-style='$ctrl.boxTipStyle' translate='intro.business-location.search-tip'></div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.isValid()' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-youtube-channel.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' data-hook='input-title' translate='{{:: &quot;intro.youtube-channel.label&quot;}}'></div>\n</left>\n<right>\n<form class='search-form b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='channel-id-input' focus-if='true' ng-model='$ctrl.channelUrl' placeholder='{{:: &quot;intro.youtube-channel.placeholder&quot; | translate }}' type='text'>\n<span class='message is-error' ng-hide='$ctrl.isValidUrl' translate='{{::&#39;intro.import-youtube-url.channel-does-not-exist&#39;|translate}}'></span>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' is-disabled='$ctrl.isNextDisabled' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-name.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&quot;{{$ctrl.getBusinessNameTitle()}}&quot;' data-hook='input-title'></div>\n</left>\n<right>\n<form class='b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' class='input-icon' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='business-name-input' focus-if='true' ng-model='$ctrl.name' placeholder='{{::$ctrl.getPlaceholder()}}' type='text'>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.name' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-category-search.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&quot;{{$ctrl.getVerticalTranslation(&#39;intro.category-search.label&#39;)}}&quot;' data-hook='input-label'></div>\n</left>\n<right>\n<category-search default-categories='$ctrl.defaultCategories' is-dropdown-suggestions-hidden='$ctrl.isDropdownSuggestionsHidden' is-reset-term='$ctrl.isResetItem(term, matches)' last-searched-term='$ctrl.lastSearchedTerm' on-example-click='$ctrl._onExampleClick(term)' on-search-changed='$ctrl._onSearchChanged(term, matches, result)' on-select-from-empty-list='$ctrl._onSelectFromEmptyList(item, $index)' on-selected-from-list='$ctrl._onSelectedFromList(term)' on-submit='$ctrl.next()' pre-suggestions-by-vertical='$ctrl.preSuggestionsByVertical' result='$ctrl.result' search-term='$ctrl.searchTerm' selected='$ctrl.selected' valid-category='$ctrl.validCategory' vertical='$ctrl.vertical'></category-search>\n</right>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.validCategory' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-recaptcha.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label recaptcha-title' compile='::&#39;intro.recaptcha.title&#39; | translate' data-hook='recaptcha-title'></div>\n</left>\n<right>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<div class='recaptcha'>\n<div class='recaptcha-widget' id='recaptcha-widget'></div>\n<div class='terms' compile='::&#39;intro.recaptcha.terms&#39; | translate'></div>\n</div>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.userIsValid' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-edit-user.html","<intro-step-layout>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='business_card.title'></div>\n</left>\n<right>\n<div cc-scrollbar class='intro-edit-user'>\n<div class='edit-user-form'>\n<business-card-editable data='$ctrl.introData' field-changed='$ctrl.onFieldChanged($value)' uploading-logo='$ctrl.logoManager.uploadingLogo'></business-card-editable>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-event-details.html","<intro-step-layout>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='business_card.title'></div>\n</left>\n<right>\n<div cc-scrollbar class='right-content'>\n<div class='card-input name'>\n<label data-hook='name-label' translate='intro.event-details.name-label'></label>\n<input cc-select-on-focus data-hook='name-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;intro.event-details.name-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input description'>\n<label data-hook='description-label' maxlength='300' translate='intro.event-details.description-label'></label>\n<textarea cc-select-on-focus data-hook='description-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;description&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.description' placeholder='{{::&#39;intro.event-details.description-placeholder&#39; | translate}}' type='text'></textarea>\n</div>\n<div class='card-input'>\n<label data-hook='address-label' translate='intro.event-details.address-label'></label>\n<div class='input-value' data-hook='address-input'>\n<div class='input-value-inner'>\n<div ng-if='!$ctrl.addressToDisplay'>{{ 'intro.event-details.location-tbd' | translate }}</div>\n<div ng-if='$ctrl.addressToDisplay'>{{ $ctrl.addressToDisplay }}</div>\n</div>\n<a class='p9b-text-button' data-hook='address-change' ng-click='$ctrl.changeLocation()' translate='intro.change-link'></a>\n</div>\n</div>\n<div class='card-input'>\n<label data-hook='dates-label' translate='intro.event-details.dates-label'></label>\n<div class='card-input-dates'>\n<div class='input-value'>\n<div data-hook='from-date' ng-if='!$ctrl.fromDate'>{{ 'intro.event-details.date-tbd' | translate }}</div>\n<div data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; !$ctrl.toDate'>{{ 'intro.event-details.date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; $ctrl.toDate'>{{ 'intro.event-details.from-date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div data-hook='to-date' ng-if='$ctrl.toDate'>{{ 'intro.event-details.to-date' | translate: {date: $ctrl.toDate, time: $ctrl.toTime} }}</div>\n<div data-hook='timezone' ng-if='$ctrl.timezoneToDisplay'>{{ $ctrl.timezoneToDisplay }}</div>\n</div>\n<a class='p9b-text-button' data-hook='dates-change' ng-click='$ctrl.changeDates()' translate='intro.change-link'></a>\n</div>\n</div>\n<ng-include src='&#39;views/intro/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-content.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&#39;intro.import-site-content.title&#39; | translate'></div>\n<div class='diptych-sublabel' translate='intro.import-site-content.sublabel'></div>\n</left>\n<right>\n<form class='search-form b01-big-text-field -relative' data-hook='type-form' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' data-hook='business-website-input' focus-if ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.address' placeholder='{{::&#39;intro.import-site-content.address-message&#39; | translate}}' type='text'>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline'>\n<span class='message' ng-class='{&#39;is-error&#39;: !$ctrl.isWebsiteAddressValid || $ctrl.isError}' translate='{{$ctrl.tipMessage}}'></span>\n<div class='link-button' data-hook='no-import-site-skip' ng-click='$ctrl.skip()' translate='intro.import-content.skip-button-name'></div>\n<span translate='intro.import-content.skip-content'></span>\n</div>\n</right>\n<back-action>\n<intro-back-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<intro-next-button is-disabled='$ctrl.isNextDisabled' ng-if='!$ctrl.isInProcess' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-platforms-urls.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' compile='::&#39;new-intro.platforms-urls.title&#39; | translate' ng-if='!$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4'></div>\n<div class='diptych-label' compile='::&#39;new-intro.platforms-urls.title-new&#39; | translate' ng-if='$ctrl.flags.platformsScreen3 || $ctrl.flags.platformsScreen4'></div>\n<div class='diptych-sublabel' data-hook='input-label' ng-if='!$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4'>{{'new-intro.platforms-urls.sublabel' | translate}}</div>\n<div class='diptych-sublabel' compile='::&#39;new-intro.platforms-urls.sublabel-new&#39; | translate' data-hook='input-label' ng-if='$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4'></div>\n<div class='diptych-sublabel' compile='::&#39;new-intro.platforms-urls.subtitle-new&#39; | translate' data-hook='input-label' ng-if='$ctrl.flags.platformsScreen4'></div>\n</left>\n<right>\n<div class='background-overlay' ng-if='$ctrl.shouldShowLoader'></div>\n<platforms-container ng-if='$ctrl.flags.platformsScreenV2 || $ctrl.flags.platformsScreen3 || $ctrl.flags.platformsScreen4' update-next-button-state='$ctrl.updateNextButtonState()'></platforms-container>\n<platforms-container ng-if='!$ctrl.flags.platformsScreenV2 &amp;&amp; !$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4'></platforms-container>\n</right>\n<back-action>\n<intro-back-button ng-if='!$ctrl.shouldShowLoader' on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button label-key='{{:: $ctrl.getSkipLabel()}}' ng-if='!$ctrl.shouldShowLoader' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='spin-loader' icon='misc:loader-circle-small' ng-if='$ctrl.shouldShowLoader'></cc-svg-icon>\n<intro-next-button is-disabled='$ctrl.isNextDisabled' ng-if='!$ctrl.shouldShowLoader' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-search-confirm.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' compile='::&quot;intro.search-confirm.title&quot; | translate:{ businessName:$ctrl.businessName}' data-hook='search-confirm-message'></div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;/assets/images/intro/new/import-site-confirm.png&#39; | externalImage}}'>\n<div class='text'>\n<span translate='intro.search-confirm.details'></span>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<intro-next-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-confirm.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' data-hook='search-confirm-message'>\n{{::'intro.category-search.import-site-confirm.title' | translate }}\n</div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;/assets/images/intro/new/import-site-confirm.png&#39; | externalImage}}'>\n<div class='text'>\n<span translate='intro.category-search.import-site-confirm.body'></span>\n<span translate='intro.category-search.import-site-confirm.validate-content'></span>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-legal.html","<intro-step-layout align-right-to='center' class='legal-rights large-intro-stage'>\n<left>\n<business-card-static class='disable-responsiveness align-card-to-middle intro-sun-bcs' data-hook='suggested-business' data='$ctrl.introManager.data.selectedBussinessCard' selectable='false' show-header='false'></business-card-static>\n</left>\n<right>\n<p class='legal-title' translate='intro.import-site-legal.title2'></p>\n<p class='legal-sub-title'>\n<span>{{ $ctrl.subTitle }}&nbsp;</span>\n<button class='review-images-button' ng-click='$ctrl.reviewImages()' translate='intro.import-site-legal.review-images2'></button>\n<div class='confirm-message'>{{::'intro.import-site-legal.confirm-message2' | translate }}</div>\n</p>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button label-key='intro.import-site-legal.skip-button' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' label-key='{{$ctrl.getNextLabel()}}' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-images-selection.html","<intro-step-layout class='large-intro-stage'>\n<left>\n<div class='diptych-label' data-hook='search-confirm-message'>\n{{::'intro.images-selection.title' | translate }}\n</div>\n</left>\n<right class='image-selection-container'>\n<div class='select-all' ng-if='(!$ctrl.flags.platformsScreenV2 &amp;&amp; !$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4) || !$ctrl.loading'>\n<button class='select-all-button' ng-class='{&#39;disabled&#39;: !$ctrl.isSelectAllEnabled()}' ng-click='$ctrl.toggleSelectedMedia(true)'>{{::'intro.images-selection.select-all' | translate }}</button>\n<span>&nbsp;&nbsp;&verbar;&nbsp;&nbsp;</span>\n<button class='select-all-button' ng-class='{&#39;disabled&#39;: !$ctrl.isDeselectAllEnabled()}' ng-click='$ctrl.toggleSelectedMedia(false)'>{{::'intro.images-selection.deselect-all' | translate }}</button>\n</div>\n<div class='platforms-container' ng-if='(!$ctrl.flags.platformsScreenV2 &amp;&amp; !$ctrl.flags.platformsScreen3 &amp;&amp; !$ctrl.flags.platformsScreen4) || !$ctrl.loading'>\n<div class='platform-images' ng-repeat='platform in $ctrl.platforms'>\n<label class='g01-checkbox platform-checkox' ng-class='{&#39;checked_partially&#39;: $ctrl.isCheckedPartially(platform)}'>\n<input adi-automation='checkout-selectall-{{:: platform}}' focus-if='$index === 0' ng-checked='$ctrl.isPlatformChecked(platform)' ng-click='$ctrl.onAllPlatformClicked($event, platform)' type='checkbox'>\n<span class='platform-container'>\n<div class='platform-name'>{{ $ctrl.getPlatformUrl(platform) }}</div>\n</span>\n</label>\n<image-selector class='image-selector-wrapper' image-clicked='$ctrl.imageClicked' images='$ctrl.imagesBySource[platform]'></image-selector>\n</div>\n</div>\n<div class='images-import-progress-bar-container' ng-if='($ctrl.flags.platformsScreenV2 || $ctrl.flags.platformsScreen3 || $ctrl.flags.platformsScreen4) &amp;&amp; $ctrl.loading'>\n<div class='images-import-progress-bar'>\n{{'intro.import-images-loading-text' | translate}}\n<div class='progress-bar'>\n<div class='progress-bar-fill' ng-class='{&#39;full&#39;: $ctrl.finishedImport}'></div>\n</div>\n</div>\n</div>\n</right>\n<skip-action ng-if=':: !$ctrl.isNewPlatformsScreenVersion()'>\n<intro-skip-button label-key='intro.cancel-button' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<skip-action ng-if=':: $ctrl.isNewPlatformsScreenVersion()'>\n<intro-skip-button label-key='intro.back-button' on-click='$ctrl.back()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' is-disabled='($ctrl.flags.platformsScreenV2 || $ctrl.flags.platformsScreen3 || $ctrl.flags.platformsScreen4) &amp;&amp; $ctrl.loading' label-key='{{ $ctrl.getNextLabel() }}' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-select-user.html","<intro-step-layout align-right-to='{{$ctrl.results.length === 0 &amp;&amp; &#39;title&#39;}}'>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='{{$ctrl.title}}'></div>\n</left>\n<right>\n<button class='intro-sun-top' data-hook='back-to-top' ng-click='$ctrl.onGoToTopClicked()' type='button'>\n<i class='cc-icon-intro-back-arrow intro-rounded-button-icon'></i>\n<div>{{'general.top' | translate}}</div>\n</button>\n<div cc-scrollbar class='intro-sun' data-hook='scroll-container' intro-scrollbar ng-class='{&quot;intro-su-empty&quot;: $ctrl.results.length === 0}' on-init='$ctrl.setScrollbarListener()'>\n<div class='intro-sun-subtitle'>\n<span>{{$ctrl.getResultsLength()}}</span>\n<span wix-translate-compile='{{$ctrl.resultsText}}'></span>\n</div>\n<form class='intro-sun-inputs'>\n<input autocomplete='off' class='b02-small-text-field intro-sun-name' data-hook='business-name-input' focus-if ng-model='$ctrl.name' placeholder='{{&quot;intro.select-user.name&quot; | translate}}' type='text'>\n<span class='input-sun-in'>{{::'intro.select-user.in' | translate}}</span>\n<input autocomplete='off' class='b02-small-text-field intro-sun-address' data-hook='business-location-input' focus-if force-selection='true' g-places-autocomplete ng-model='$ctrl.address' options='{types: [&quot;geocode&quot;]}' placeholder='{{&quot;intro.select-user.address&quot; | translate}}' type='text'>\n<button class='intro-sun-search cc-icon-search-intro intro-rounded-button-icon' data-hook='search-button' ng-click='$ctrl.search()'></button>\n</form>\n<div class='intro-su-cards'>\n<business-card-static class='intro-sun-bcs' data-hook='suggested-business' data='result' ng-click='$ctrl.next(result);' ng-repeat='result in $ctrl.results' show-header='false'></business-card-static>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-service-offer.html","<intro-step-layout align-right-to='{{::$ctrl.flags.serviceOffersNewUI ? &#39;center&#39; : &#39;title&#39;}}'>\n<left>\n<div class='diptych-label' compile='::&#39;intro.service.title&#39; | translate'></div>\n</left>\n<right>\n<form ng-if=':: !$ctrl.flags.serviceOffersNewUI' ng-submit='$ctrl.next()'>\n<div class='service-offer-option' data-hook='service-offer-{{::offer.type}}' ng-if='::$ctrl.shouldShowOffer(offer.type)' ng-repeat='offer in $ctrl.offers track by $index'>\n<label class='g01-checkbox'>\n<input focus-if='$index === 0' ng-change='$ctrl.onOfferChanged(offer)' ng-model='offer.checked' type='checkbox'>\n<span>{{::'intro.contentExperiment.service.' + offer.type | translate}}</span>\n</label>\n</div>\n</form>\n<form class='apps' ng-if=':: $ctrl.flags.serviceOffersNewUI' ng-submit='$ctrl.next()'>\n<div class='title'>{{'intro.apps-recommendation.title' | translate}}</div>\n<div class='description'>{{'intro.apps-recommendation.description' | translate }}</div>\n<service-offers on-click='$ctrl.onOfferChanged()' service-offers=':: $ctrl.filteredServiceOffers' statics-url='$ctrl.staticsUrl'></service-offers>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button label-key='{{:: $ctrl.getSkipLabel()}}' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-apps-recommendation.html","<intro-step-layout>\n<left>\n<div class='diptych-label'>{{'intro.apps-recommendation.label' | translate}}</div>\n</left>\n<right class='apps-recommendation-container'>\n<form class='apps' id='apps-content' ng-submit='$ctrl.next()'>\n<div class='content'>\n<div class='header'>\n<div class='title'>{{'intro.apps-recommendation.title' | translate}}</div>\n<div class='description' ng-bind-html='$ctrl.getDescriptionMessage()'></div>\n</div>\n<div class='apps-recommendation' ng-if='!$ctrl.isAppsLoading'>\n<apps-recommendation apps-recommendation='$ctrl.appsRecommendation' on-click='$ctrl.onClick(app)' on-show-all-apps='$ctrl.focusOnAdditionalApps()' statics-url='$ctrl.staticsUrl'></apps-recommendation>\n<div class='white-rectangle'></div>\n</div>\n</div>\n</form>\n<div class='bottom'>\n<skip-action>\n<intro-skip-button label-key='{{:: $ctrl.getSkipLabel()}}' ng-if='!$ctrl.isAppsLoading' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' ng-if='!$ctrl.isAppsLoading' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isAppsLoading'></cc-svg-icon>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-step-layout.html","<div class='intro-step-layout'>\n<div class='intro-left-wrap'>\n<div class='cc-icon-wix-logo intro-logo'></div>\n<div class='intro-left standard-diptych-top' data-hook='left' ng-if='$ctrl.isUsed(&#39;left&#39;)' ng-transclude='left'></div>\n</div>\n<div class='intro-right-wrap'>\n<div class='intro-right' data-hook='right' ng-class='[$ctrl.getRightClass()]' ng-if='$ctrl.isUsed(&#39;right&#39;)' ng-transclude='right'></div>\n</div>\n<div class='back-action' data-hook='back-action' ng-if='$ctrl.isUsed(&#39;backAction&#39;)' ng-transclude='backAction'></div>\n<div class='next-actions-container'>\n<div class='skip-action' data-hook='skip-action' ng-if='$ctrl.isUsed(&#39;skipAction&#39;)' ng-transclude='skipAction'></div>\n<div class='next-action' data-hook='next-action' ng-if='$ctrl.isUsed(&#39;nextAction&#39;)' ng-transclude='nextAction'></div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro.html","<div class='intro-loading' data-hook='loading'>\n<div class='message' translate='intro.loading-message'></div>\n</div>\n<div class='intro-content' data-hook='animation-content'>\n<ui-view class='animatable' ng-class='[$ctrl.lastNavigation]'></ui-view>\n</div>\n<svg>\n<filter id='intro-image-blur'>\n<feGaussianBlur stdDeviation='60'></feGaussianBlur>\n</filter>\n</svg>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card/business-card-social-links.html","<div class='card-input social'>\n<label class='label-wrapper'>{{::'business_card.social-media.label' | translate}}</label>\n<div class='links-wrapper'>\n<div class='social-link-wrapper' ng-repeat='link in $ctrl.data.socialLinks track by $index'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='{{link.platform | socialIcon}}'></cc-svg-icon>\n<input cc-select-on-focus data-hook='social-link' enter-to-tab field-track='$ctrl.onFieldChanged(link.platform, &quot;social&quot;, $old, $value)' focus-if='$ctrl.focusedSocial === link' ng-attr-placeholder='{{::&#39;business_card.social.placeholder&#39; | translate}}' ng-blur='showError = true; $ctrl.focusedSocial = null;' ng-change='$ctrl.onSocialChanged(link)' ng-class='{&#39;invalid-social-link&#39; : showError !== link &amp;&amp; $ctrl.isLinkInvalid(link)}' ng-focus='showError = false' ng-model-options='{debounce: {&#39;default&#39;: 500, &#39;blur&#39;: 0}}' ng-model='link.url' type='text'>\n<div cc-tooltip-position='top' cc-tooltip='intro_card_url_invalid' class='social-link-validation cc-icon-negative-validation'></div>\n<div cc-tooltip-position='top' cc-tooltip='intro_delete' class='social-link-delete cc-icon-delete' ng-click='$ctrl.deleteSocialLink(link)'></div>\n</div>\n<div class='add-button' data-hook='add-social' ng-click='$ctrl.addEmptySocialLink()' ng-if='$ctrl.enableAddSocialLink()'>\n<div class='add-button-icon cc-icon-add-small intro-rounded-button-icon'></div>\n<div class='add-button-label'>{{::'business_card.add-social-network.label' | translate}}</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-editable.html","<div class='business-card-editable'>\n<div class='card-header'>\n<div class='card-input logo'>\n<label>{{::'general.logo' | translate }}</label>\n<business-card-logo-new class='card-logo' data-hook='identify-logo' enable-edit='true' is-uploading='$ctrl.logoManager.uploadingLogo' on-delete='$ctrl.logoManager.deleteLogo()' on-edit='$ctrl.logoManager.uploadLogo(file)' origin='$ctrl.getOrigin()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo-new>\n</div>\n</div>\n<div class='card-body' name='IntroForm' ng-form>\n<div class='card-inputs-container'></div>\n<div class='card-input name'>\n<label>{{::'business_card.name.label' | translate }}</label>\n<input cc-select-on-focus data-hook='company-name' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;company name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;business_card.name.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input'>\n<label>{{::'intro.business-card-editable.email.label' | translate }}</label>\n<input autocomplete='off' cc-select-on-focus class='business-email' data-hook='email' enter-to-tab field-track='$ctrl.onFieldChanged(&#39;email&#39;, &#39;text&#39;, $old, $value)' name='email' ng-model='$ctrl.data.contactDetails.email' ng-pattern='$ctrl.$translate.instant(&#39;regex.email_format&#39;)' placeholder='{{::&#39;business_card.email.placeholder&#39; | translate}}' type='text'>\n<div class='email-invalid-tooltip' data-hook='email-invalid-tooltip' ng-if='IntroForm.email.$error.pattern'>\n<cc-validation tooltip='intro_card_email_invalid'></cc-validation>\n</div>\n</div>\n<div class='card-input address'>\n<label>{{::'business_card.address.label' | translate }}</label>\n<textarea cc-select-on-focus data-hook='address' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;address&quot;, &quot;text&quot;, $old, $value)' intro-address-formatter ng-attr-placeholder='{{::&#39;business_card.address.placeholder&#39; | translate}}' ng-model='$ctrl.data.contactDetails.address.fullAddress' rows='3'></textarea>\n</div>\n<div class='card-input'>\n<label>{{::'business_card.phone.label' | translate }}</label>\n<input cc-select-on-focus data-hook='phone' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;phone&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.phone' placeholder='{{::&#39;business_card.phone.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input fax'>\n<label>{{::'business_card.fax.label' | translate }}</label>\n<input cc-select-on-focus data-hook='fax' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;fax&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.fax' placeholder='{{::&#39;business_card.fax.placeholder&#39; | translate}}' type='text'>\n</div>\n<ng-include src='&#39;views/intro/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-logo.html","<div class='logo'>\n<file-upload-select data-hook='logo-upload-file' ng-if='!$ctrl.useMediaManager' on-select='$ctrl.onEdit({file : $file})'></file-upload-select>\n<div adi-automation='{{$ctrl.url}}' class='intro-bch-logo-image' data-hook='logo-image' ng-click='$ctrl.enableEdit &amp;&amp; $ctrl.clickOnInputFile()' ng-style='{&#39;background-image&#39;: $ctrl.url &amp;&amp; !$ctrl.isUploading ? &#39;url(&#39; + $ctrl.url + &#39;)&#39; : &#39;&#39;}'>\n<div class='logo-wrapping-circle' ng-if='$ctrl.showWrappingCircle'></div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isUploading'></cc-svg-icon>\n</div>\n<div class='intro-bch-edit' data-hook='edit-panel' ng-class='{&#39;is-uploading&#39;: $ctrl.isUploading &amp;&amp; !$ctrl.uploadError, &#39;fade-down&#39;: $ctrl.justReplaceButton, &#39;delay-entrance&#39;: $ctrl.justReplaceButton}' ng-if='$ctrl.enableEdit'>\n<input ng-click='$ctrl.openMediaManager()' ng-if='$ctrl.useMediaManager' type='button'>\n<div class='intro-logo-button intro-logo-add-button p9b-text-button -small' data-hook='add-button' ng-click='$ctrl.clickOnInputFile()' ng-if='$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-add-icon' icon='coloration:add-small'></cc-svg-icon>\n{{::'intro.logo.add' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-edit-label p9b-text-button -small' data-hook='edit-label' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-edit-icon' icon='coloration:edit'></cc-svg-icon>\n{{::'intro.logo.edit' | translate}}\n</div>\n<div class='intro-logo-edit-actions' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replace' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-remove-button p9b-text-button -small' data-hook='delete-button' ng-click='$ctrl.onDelete()'>\n{{::'intro.logo.remove' | translate}}\n</div>\n</div>\n<div class='intro-logo-extractor-actions fade-down' ng-if='$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='just-replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replaceLogo' | translate}}\n</div>\n</div>\n<div class='intro-logo-button p9b-text-button -small fade-down' data-hook='uploading-logo-text' ng-if='$ctrl.isUploading'>\n{{::'intro.logo.uploading' | translate}}\n</div>\n<div class='intro-bch-logo-error' ng-show='$ctrl.uploadError'>{{:: 'intro.logo.error' | translate}}</div>\n</div>\n</div>\n")}])}});
//# sourceMappingURL=intro-js.bundle.min.js.map